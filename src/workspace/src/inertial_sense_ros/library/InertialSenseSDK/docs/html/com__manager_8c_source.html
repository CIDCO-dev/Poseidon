<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SDK: src/com_manager.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Logo_Full_color_300x61.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SDK
   &#160;<span id="projectnumber">Release 1.8.0</span>
   </div>
   <div id="projectbrief">Communications, logger, and bootloader libraries.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">com_manager.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="com__manager_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">MIT LICENSE</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">Copyright (c) 2014-2019 Inertial Sense, Inc. - http://inertialsense.com</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files(the &quot;Software&quot;), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions :</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="com__manager_8h.html">com_manager.h</a>&quot;</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &lt;string.h&gt;</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &lt;stdlib.h&gt;</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">// enable filtering of duplicate packets</span></div><div class="line"><a name="l00018"></a><span class="lineno"><a class="line" href="com__manager_8c.html#aa4f64c2456c2ae641614ebf622e839d8">   18</a></span>&#160;<span class="preprocessor">#define ENABLE_FILTER_DUPLICATE_PACKETS 1</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">// whether the first character or all characters are checked in duplicate packets</span></div><div class="line"><a name="l00021"></a><span class="lineno"><a class="line" href="com__manager_8c.html#a58158e674661f2ffc7c66939747af5cf">   21</a></span>&#160;<span class="preprocessor">#define ENABLE_FILTER_DUPLICATE_PACKETS_MATCH_ALL_CHARACTERS 0</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div><div class="line"><a name="l00023"></a><span class="lineno"><a class="line" href="com__manager_8c.html#aae1426c5c3c8c473a70adcbd634eb8fc">   23</a></span>&#160;<span class="preprocessor">#define PARSE_DOUBLE(str) strtod(str, 0)</span></div><div class="line"><a name="l00024"></a><span class="lineno"><a class="line" href="com__manager_8c.html#a686bc9b96dac380b2a986cf808056d15">   24</a></span>&#160;<span class="preprocessor">#define PARSE_FLOAT(str) strtof(str, 0)</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div><div class="line"><a name="l00026"></a><span class="lineno"><a class="line" href="com__manager_8c.html#ae68296caef3ece6bdd0faeae69b6e4e1">   26</a></span>&#160;<span class="preprocessor">#define MIN_REQUEST_PERIOD_MS       1               // (ms) 1 KHz</span></div><div class="line"><a name="l00027"></a><span class="lineno"><a class="line" href="com__manager_8c.html#a295549e9a60f31107cf055cdc3c13b28">   27</a></span>&#160;<span class="preprocessor">#define MAX_REQUEST_PERIOD_MS       100000          // (ms)</span></div><div class="line"><a name="l00028"></a><span class="lineno"><a class="line" href="com__manager_8c.html#a055a98068f64092742e6e50a5167c4a4">   28</a></span>&#160;<span class="preprocessor">#define MSG_PERIOD_SEND_ONCE        -1</span></div><div class="line"><a name="l00029"></a><span class="lineno"><a class="line" href="com__manager_8c.html#a530fd5a94ed593dd66ec7cdeee00b411">   29</a></span>&#160;<span class="preprocessor">#define MSG_PERIOD_DISABLED         0</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="keyword">static</span> <a class="code" href="structcom__manager__t.html">com_manager_t</a> g_cm;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="keywordtype">int</span> <a class="code" href="com__manager_8c.html#a8a84f49889437055ac05a506c5b9a292">initComManagerInstanceInternal</a></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;(</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    <a class="code" href="structcom__manager__t.html">com_manager_t</a>* cmInstance,</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <span class="keywordtype">int</span> numHandles,</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <span class="keywordtype">int</span> maxEnsuredPackets,</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <span class="keywordtype">int</span> stepPeriodMilliseconds,</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <span class="keywordtype">int</span> retryCount,</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <a class="code" href="com__manager_8h.html#aa4d655efaad55f4d6669667462d6d822">pfnComManagerRead</a> readFnc,</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <a class="code" href="com__manager_8h.html#a4ae6f964df346995494b68893bb4dec4">pfnComManagerSend</a> sendFnc,</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <a class="code" href="com__manager_8h.html#a0d626c2c2ae7b974b2daa2fc3080029d">pfnComManagerSendBufferAvailableBytes</a> txFreeFnc,</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <a class="code" href="com__manager_8h.html#a4d1cf2c64ae86f8dfc4c0976651fba6a">pfnComManagerPostRead</a> pstRxFnc,</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <a class="code" href="com__manager_8h.html#a018afe7c16e51b37e48d536d977fbc75">pfnComManagerPostAck</a> pstAckFnc,</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <a class="code" href="com__manager_8h.html#aa6f59ccc6e623e7cea518e0924f4e417">pfnComManagerDisableBroadcasts</a> disableBcastFnc,</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <a class="code" href="structcom__manager__buffers__t.html">com_manager_buffers_t</a> *buffers</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;);</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="keywordtype">int</span> <a class="code" href="com__manager_8c.html#a0e2d283526ff7000a71192b8f63b7777">processAsciiRxPacket</a>(<a class="code" href="structcom__manager__t.html">com_manager_t</a>* cmInstance, <span class="keywordtype">int</span> pHandle, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* start, <span class="keywordtype">int</span> count);</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="keywordtype">void</span> <a class="code" href="com__manager_8c.html#aaa0cccdf3490b0effcce07fed8460953">parseAsciiPacket</a>(<a class="code" href="structcom__manager__t.html">com_manager_t</a>* cmInstance, <span class="keywordtype">int</span> pHandle, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* buf, <span class="keywordtype">int</span> count);</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="keywordtype">int</span> <a class="code" href="com__manager_8c.html#acc32b1a0dbfb593f2bf49d52775bff27">processBinaryRxPacket</a>(<a class="code" href="structcom__manager__t.html">com_manager_t</a>* cmInstance, <span class="keywordtype">int</span> pHandle, <a class="code" href="structpacket__t.html">packet_t</a> *pkt, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> additionalDataAvailable);</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="keywordtype">void</span> <a class="code" href="com__manager_8c.html#a0a04aba97ca175f8e08018d2965ac0af">enableBroadcastMsg</a>(<a class="code" href="structcom__manager__t.html">com_manager_t</a>* cmInstance, <a class="code" href="structbroadcast__msg__t.html">broadcast_msg_t</a> *msg, <span class="keywordtype">int</span> periodMultiple);</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="keywordtype">void</span> <a class="code" href="com__manager_8c.html#a305a8082a720fd5b3bc521012df55202">disableBroadcastMsg</a>(<a class="code" href="structcom__manager__t.html">com_manager_t</a>* cmInstance, <a class="code" href="structbroadcast__msg__t.html">broadcast_msg_t</a> *msg);</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="keywordtype">void</span> <a class="code" href="com__manager_8c.html#ae1ab50b97d65b1cc6e1bd806ff0187dc">disableDidBroadcast</a>(<a class="code" href="structcom__manager__t.html">com_manager_t</a>* cmInstance, <span class="keywordtype">int</span> pHandle, <a class="code" href="structp__data__disable__t.html">p_data_disable_t</a> *disable);</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="keywordtype">int</span> <a class="code" href="com__manager_8c.html#a631d359bd470ffd894fbc248a3e0a5d4">sendPacket</a>(<a class="code" href="structcom__manager__t.html">com_manager_t</a>* cmInstance, <span class="keywordtype">int</span> pHandle, <a class="code" href="structpacket__t.html">packet_t</a> *dPkt, uint8_t additionalPktFlags);</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="keywordtype">int</span> <a class="code" href="com__manager_8c.html#adefe5ab74a1adf2b17626a35b7b5d8e8">sendDataPacket</a>(<a class="code" href="structcom__manager__t.html">com_manager_t</a>* cmInstance, <span class="keywordtype">int</span> pHandle, <a class="code" href="structpkt__info__t.html">pkt_info_t</a> *msg);</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="keywordtype">void</span> <a class="code" href="com__manager_8c.html#a0f161b11e9a91492c7515c9d59ce8016">sendAck</a>(<a class="code" href="structcom__manager__t.html">com_manager_t</a>* cmInstance, <span class="keywordtype">int</span> pHandle, <a class="code" href="structpacket__t.html">packet_t</a> *pkt, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> pid_ack);</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="keywordtype">int</span> <a class="code" href="com__manager_8c.html#ac3c471d6faca973221ce4e43e34fc817">findAsciiMessage</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> * a, <span class="keyword">const</span> <span class="keywordtype">void</span> * b);</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">//  Packet processing</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">// com manager only...</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="keywordtype">int</span> <a class="code" href="com__manager_8c.html#a2350b0785db4c4bf35d46901128475e6">encodeBinaryPacket</a>(<a class="code" href="structcom__manager__t.html">com_manager_t</a>* cmInstance, <span class="keywordtype">int</span> pHandle, <a class="code" href="structbuffer__t.html">buffer_t</a> *pkt, <a class="code" href="structpacket__t.html">packet_t</a> *dPkt, uint8_t additionalPktFlags);</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="keywordtype">int</span> <a class="code" href="com__manager_8c.html#aa9b75e21fa2d1c9fb04166a1b80d2d9e">validateAsciiChecksum</a>(<a class="code" href="structcom__manager__t.html">com_manager_t</a>* cmInstance, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* buf, <span class="keywordtype">int</span> count);</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="keywordtype">int</span> <a class="code" href="com__manager_8c.html#a3e131ffd2b0658b9fa9b90271bb5b638">processAsciiPacket</a>(<a class="code" href="structcom__manager__t.html">com_manager_t</a>* cmInstance, <span class="keywordtype">int</span> pHandle, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* data, <span class="keywordtype">int</span> dataLength);</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="keywordtype">int</span> <a class="code" href="com__manager_8c.html#aec43bd8335ac3a31fe2e668c7611b209">processBinaryPacket</a>(<a class="code" href="structcom__manager__t.html">com_manager_t</a>* cmInstance, <span class="keywordtype">int</span> pHandle, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* dataStart, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* data, <span class="keywordtype">int</span> dataLength, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* additionalDataAvailable);</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="keywordtype">int</span> <a class="code" href="com__manager_8c.html#aeeee35f3d2f1cf8f56a7b95d1ccc8ab4">processPassThroughBytes</a>(<a class="code" href="structcom__manager__t.html">com_manager_t</a>* cmInstance, <span class="keywordtype">int</span> pHandle, <a class="code" href="structring__buffer__t.html">ring_buffer_t</a>* ringBuffer);</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="keywordtype">int</span> <a class="code" href="com__manager_8c.html#a9f308bd49e5afa45f8deb7f01302241f">beginUbloxPacket</a>(<a class="code" href="structcom__manager__t.html">com_manager_t</a>* cmInstance, <span class="keywordtype">int</span> pHandle, <a class="code" href="structring__buffer__t.html">ring_buffer_t</a>* ringBuffer);</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="keywordtype">int</span> <a class="code" href="com__manager_8c.html#acbf78e85e9b31849a67e1dca09688f9f">beginRtcm3Packet</a>(<a class="code" href="structcom__manager__t.html">com_manager_t</a>* cmInstance, <span class="keywordtype">int</span> pHandle, <a class="code" href="structring__buffer__t.html">ring_buffer_t</a>* ringBuffer);</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="keywordtype">int</span> <a class="code" href="com__manager_8c.html#a8aa67e959b62f86989c00aa923549304">asciiMessageCompare</a>(<span class="keyword">const</span> <span class="keywordtype">void</span>* elem1, <span class="keyword">const</span> <span class="keywordtype">void</span>* elem2);</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">//  Packet Retry</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="keywordtype">void</span> <a class="code" href="com__manager_8c.html#ae62f18ac3c8c1dcde204cb554fba53e3">stepPacketRetry</a>(<a class="code" href="structcom__manager__t.html">com_manager_t</a>* cmInstance);</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<a class="code" href="structpacket__t.html">packet_t</a>* <a class="code" href="com__manager_8c.html#a1872147ebc2cceda89f51b04edcc82e8">registerPacketRetry</a>(<a class="code" href="structcom__manager__t.html">com_manager_t</a>* cmInstance, <span class="keywordtype">int</span> pHandle, uint8_t pid, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> data[], <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> dataSize);</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="keywordtype">void</span> <a class="code" href="com__manager_8c.html#a8752fd18e0f3378d4feab9f8398fa172">updatePacketRetryData</a>(<a class="code" href="structcom__manager__t.html">com_manager_t</a>* cmInstance, <a class="code" href="structpacket__t.html">packet_t</a> *pkt);</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="keywordtype">void</span> <a class="code" href="com__manager_8c.html#a993761774598a78d7bcb807aa493ed4a">updatePacketRetryAck</a>(<a class="code" href="structcom__manager__t.html">com_manager_t</a>* cmInstance, <a class="code" href="structpacket__t.html">packet_t</a> *pkt);</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="keywordtype">void</span> <a class="code" href="com__manager_8c.html#a6de6ec07690eea63b78d52c6b36f6557">stepComManagerSendMessages</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="keywordtype">void</span> <a class="code" href="com__manager_8c.html#a8bb05c7251208dda62e92b8be1f4c5ad">stepComManagerSendMessagesInstance</a>(<a class="code" href="com__manager_8h.html#aa4c7b70d216e3ec5adc54f13afc5ffde">CMHANDLE</a> cmInstance);</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div><div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="com__manager_8h.html#a4336f36a840ad97152a693893866ca2e">   79</a></span>&#160;<a class="code" href="com__manager_8h.html#aa4c7b70d216e3ec5adc54f13afc5ffde">CMHANDLE</a> <a class="code" href="com__manager_8c.html#a4336f36a840ad97152a693893866ca2e">comManagerGetGlobal</a>(<span class="keywordtype">void</span>) { <span class="keywordflow">return</span> &amp;g_cm; }</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="keywordtype">int</span> <a class="code" href="com__manager_8c.html#aef0ad84b52912d62c84e234f23b920fd">comManagerInit</a></div><div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="com__manager_8h.html#aef0ad84b52912d62c84e234f23b920fd">   82</a></span>&#160;(</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="keywordtype">int</span> numHandles,</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="keywordtype">int</span> maxEnsuredPackets,</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="keywordtype">int</span> stepPeriodMilliseconds,</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keywordtype">int</span> retryCount,</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <a class="code" href="com__manager_8h.html#aa4d655efaad55f4d6669667462d6d822">pfnComManagerRead</a> readFnc,</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <a class="code" href="com__manager_8h.html#a4ae6f964df346995494b68893bb4dec4">pfnComManagerSend</a> sendFnc,</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <a class="code" href="com__manager_8h.html#a0d626c2c2ae7b974b2daa2fc3080029d">pfnComManagerSendBufferAvailableBytes</a> txFreeFnc,</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <a class="code" href="com__manager_8h.html#a4d1cf2c64ae86f8dfc4c0976651fba6a">pfnComManagerPostRead</a> pstRxFnc,</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <a class="code" href="com__manager_8h.html#a018afe7c16e51b37e48d536d977fbc75">pfnComManagerPostAck</a> pstAckFnc,</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <a class="code" href="com__manager_8h.html#aa6f59ccc6e623e7cea518e0924f4e417">pfnComManagerDisableBroadcasts</a> disableBcastFnc,</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <a class="code" href="structcom__manager__buffers__t.html">com_manager_buffers_t</a> *buffers</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;)</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;{</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="com__manager_8c.html#a8a84f49889437055ac05a506c5b9a292">initComManagerInstanceInternal</a>(</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        &amp;g_cm, </div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        numHandles, </div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        maxEnsuredPackets, </div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        stepPeriodMilliseconds, </div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        retryCount, </div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        readFnc, </div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        sendFnc, </div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        txFreeFnc, </div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        pstRxFnc, </div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        pstAckFnc, </div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        disableBcastFnc, </div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        buffers);</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;}</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="keywordtype">int</span> <a class="code" href="com__manager_8c.html#a96f45191814da82deddfedfa0bdabb78">comManagerInitInstance</a></div><div class="line"><a name="l00112"></a><span class="lineno"><a class="line" href="com__manager_8h.html#a96f45191814da82deddfedfa0bdabb78">  112</a></span>&#160;(</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <a class="code" href="com__manager_8h.html#aa4c7b70d216e3ec5adc54f13afc5ffde">CMHANDLE</a> cmHandle,</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="keywordtype">int</span> numHandles,</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="keywordtype">int</span> maxEnsuredPackets,</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="keywordtype">int</span> stepPeriodMilliseconds,</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keywordtype">int</span> retryCount,</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <a class="code" href="com__manager_8h.html#aa4d655efaad55f4d6669667462d6d822">pfnComManagerRead</a> readFnc,</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <a class="code" href="com__manager_8h.html#a4ae6f964df346995494b68893bb4dec4">pfnComManagerSend</a> sendFnc,</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <a class="code" href="com__manager_8h.html#a0d626c2c2ae7b974b2daa2fc3080029d">pfnComManagerSendBufferAvailableBytes</a> txFreeFnc,</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <a class="code" href="com__manager_8h.html#a4d1cf2c64ae86f8dfc4c0976651fba6a">pfnComManagerPostRead</a> pstRxFnc,</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <a class="code" href="com__manager_8h.html#a018afe7c16e51b37e48d536d977fbc75">pfnComManagerPostAck</a> pstAckFnc,</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <a class="code" href="com__manager_8h.html#aa6f59ccc6e623e7cea518e0924f4e417">pfnComManagerDisableBroadcasts</a> disableBcastFnc,</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <a class="code" href="structcom__manager__buffers__t.html">com_manager_buffers_t</a> *buffers</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;)</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;{</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keywordtype">int</span> result = 0;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <a class="code" href="structcom__manager__t.html">com_manager_t</a>* cmInstance = (<a class="code" href="structcom__manager__t.html">com_manager_t</a>*)cmHandle;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keywordflow">if</span> (cmInstance != 0)</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    {</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        memset(cmInstance, 0, <span class="keyword">sizeof</span>(<a class="code" href="structcom__manager__t.html">com_manager_t</a>));</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        result = <a class="code" href="com__manager_8c.html#a8a84f49889437055ac05a506c5b9a292">initComManagerInstanceInternal</a>(</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;            cmInstance, </div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;            numHandles, </div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;            maxEnsuredPackets, </div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;            stepPeriodMilliseconds, </div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;            retryCount, </div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;            readFnc, </div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;            sendFnc, </div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;            txFreeFnc, </div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;            pstRxFnc, </div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;            pstAckFnc, </div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;            disableBcastFnc,</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;            buffers);</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    }</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keywordflow">return</span> result;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;}</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="keywordtype">int</span> <a class="code" href="com__manager_8c.html#a8a84f49889437055ac05a506c5b9a292">initComManagerInstanceInternal</a></div><div class="line"><a name="l00151"></a><span class="lineno"><a class="line" href="com__manager_8c.html#a8a84f49889437055ac05a506c5b9a292">  151</a></span>&#160;(</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <a class="code" href="structcom__manager__t.html">com_manager_t</a>* cmInstance,</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keywordtype">int</span> numHandles,</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keywordtype">int</span> maxEnsuredPackets,</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keywordtype">int</span> stepPeriodMilliseconds,</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keywordtype">int</span> retryCount,</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <a class="code" href="com__manager_8h.html#aa4d655efaad55f4d6669667462d6d822">pfnComManagerRead</a> readFnc,</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <a class="code" href="com__manager_8h.html#a4ae6f964df346995494b68893bb4dec4">pfnComManagerSend</a> sendFnc,</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <a class="code" href="com__manager_8h.html#a0d626c2c2ae7b974b2daa2fc3080029d">pfnComManagerSendBufferAvailableBytes</a> txFreeFnc,</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <a class="code" href="com__manager_8h.html#a4d1cf2c64ae86f8dfc4c0976651fba6a">pfnComManagerPostRead</a> pstRxFnc,</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <a class="code" href="com__manager_8h.html#a018afe7c16e51b37e48d536d977fbc75">pfnComManagerPostAck</a> pstAckFnc,</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <a class="code" href="com__manager_8h.html#aa6f59ccc6e623e7cea518e0924f4e417">pfnComManagerDisableBroadcasts</a> disableBcastFnc,</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <a class="code" href="structcom__manager__buffers__t.html">com_manager_buffers_t</a> *buffers</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;)</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;{</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    int32_t i;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    numHandles = <a class="code" href="_i_s_constants_8h.html#a089e3be78d482b1bfebf6f9c9b83982b">_CLAMP</a>(numHandles, 1, 1024);</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="comment">// assign new variables</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    cmInstance-&gt;<a class="code" href="structcom__manager__t.html#af1204df7157bed57959a9daa3f83884c">maxEnsuredPackets</a> = maxEnsuredPackets;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    cmInstance-&gt;<a class="code" href="structcom__manager__t.html#aef5b95591013849e1710861537ed5818">readCallback</a> = readFnc;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a49b2fded8a1c7c3142bc1a90f34603ea">sendPacketCallback</a> = sendFnc;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ac70b1bd3d8e2c27fe81aab2b9221d294">txFreeCallback</a> = txFreeFnc;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a03cb7e17301933e8c57c17ca36d51c34">pstRxFnc</a> = pstRxFnc;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a17e30577ccee8dfd9f641af9d5e49940">pstAckFnc</a> = pstAckFnc;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a8ec022c21b008d2c9c3c706470e47e26">disableBcastFnc</a> = disableBcastFnc;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ab98e59906ef79731a315b0f404f17bc3">numHandes</a> = numHandles;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ad698cf1f00ae25965d355ec7f6e86c94">stepPeriodMilliseconds</a> = stepPeriodMilliseconds;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a2a4da8b8846be0d82a1d83af2adb7698">ensureRetryCount</a> = retryCount;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keywordflow">if</span> (buffers == NULL)</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    {</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    }</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="comment">// Buffer: message broadcasts</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keywordflow">if</span> (buffers-&gt;<a class="code" href="structcom__manager__buffers__t.html#a477681448e22b6f844d039f5e14d3839">broadcastMsg</a> == NULL || buffers-&gt;<a class="code" href="structcom__manager__buffers__t.html#afa906788fb790e91801c0e2d3fc4fbf2">broadcastMsgSize</a> &lt; <a class="code" href="com__manager_8h.html#a94b57baf71498218c44b4d81e3e3f0a0">COM_MANAGER_BUF_SIZE_BCAST_MSG</a>(<a class="code" href="com__manager_8h.html#a08d1326bfd508f5c35f3a8853488ad04">MAX_NUM_BCAST_MSGS</a>))</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    {</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    }</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a01a38214bdf57c48d70a7b6c7dbdf32c">broadcastMessages</a> = (<a class="code" href="structbroadcast__msg__t.html">broadcast_msg_t</a>*)buffers-&gt;<a class="code" href="structcom__manager__buffers__t.html#a477681448e22b6f844d039f5e14d3839">broadcastMsg</a>;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    memset(cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a01a38214bdf57c48d70a7b6c7dbdf32c">broadcastMessages</a>, 0, buffers-&gt;<a class="code" href="structcom__manager__buffers__t.html#afa906788fb790e91801c0e2d3fc4fbf2">broadcastMsgSize</a>);</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    </div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="comment">// Buffer: ring buffers for serial reads / writes</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keywordflow">if</span> (buffers-&gt;<a class="code" href="structcom__manager__buffers__t.html#ad73b0757abb3b56ec49180e9076715b0">ringBuffer</a> == NULL || buffers-&gt;<a class="code" href="structcom__manager__buffers__t.html#a9fd06bf2e96ae43aa2be6edff9e473ad">ringBufferSize</a> &lt; <a class="code" href="com__manager_8h.html#a389c19dc7e581fceacb2828389d54fd2">COM_MANAGER_BUF_SIZE_RING_BUFFER</a>(numHandles))</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    {</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    }</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a96e9b622e9ce79bafbe1f603b20e2a20">ringBuffers</a> = (<a class="code" href="structring__buffer__t.html">ring_buffer_t</a>*)buffers-&gt;<a class="code" href="structcom__manager__buffers__t.html#ad73b0757abb3b56ec49180e9076715b0">ringBuffer</a>;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    memset(cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a96e9b622e9ce79bafbe1f603b20e2a20">ringBuffers</a>, 0, buffers-&gt;<a class="code" href="structcom__manager__buffers__t.html#a9fd06bf2e96ae43aa2be6edff9e473ad">ringBufferSize</a>);</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="comment">// Buffer: ensured packets</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="keywordflow">if</span> (cmInstance-&gt;<a class="code" href="structcom__manager__t.html#af1204df7157bed57959a9daa3f83884c">maxEnsuredPackets</a> &gt; 0)</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    {</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        <span class="keywordflow">if</span> (buffers-&gt;<a class="code" href="structcom__manager__buffers__t.html#a2679dfcb91d2fdd6b27dc803e02e1328">ensuredPackets</a> == NULL || buffers-&gt;<a class="code" href="structcom__manager__buffers__t.html#a0ee871f443915dd29829988bff07904a">ensuredPacketsSize</a> &lt; <a class="code" href="com__manager_8h.html#aa0545344d4561b3d4aa1a603e7f634bb">COM_MANAGER_BUF_SIZE_ENSURED_PKTS</a>(cmInstance-&gt;<a class="code" href="structcom__manager__t.html#af1204df7157bed57959a9daa3f83884c">maxEnsuredPackets</a>))</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        {</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        }</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a7fc3af964301b311635445291553551a">ensuredPackets</a> = (<a class="code" href="structensured__pkt__t.html">ensured_pkt_t</a>*)buffers-&gt;<a class="code" href="structcom__manager__buffers__t.html#a2679dfcb91d2fdd6b27dc803e02e1328">ensuredPackets</a>;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        memset(cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a7fc3af964301b311635445291553551a">ensuredPackets</a>, 0, buffers-&gt;<a class="code" href="structcom__manager__buffers__t.html#a0ee871f443915dd29829988bff07904a">ensuredPacketsSize</a>);</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt; cmInstance-&gt;<a class="code" href="structcom__manager__t.html#af1204df7157bed57959a9daa3f83884c">maxEnsuredPackets</a>; i++)</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        {</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a7fc3af964301b311635445291553551a">ensuredPackets</a>[i].<a class="code" href="structensured__pkt__t.html#a0e33c78ab018ea5e2c608fea068f746d">counter</a> = -2; <span class="comment">// indicates no retries are enabled</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a7fc3af964301b311635445291553551a">ensuredPackets</a>[i].<a class="code" href="structensured__pkt__t.html#ac5b00d01fa5171945076634d25685345">pkt</a>.<a class="code" href="structpacket__t.html#a4955d2c7f0cacef9987e6e33a7dfc885">body</a>.<a class="code" href="structbuf_ptr__t.html#ad4295aa9699eea57f6219a92475a327c">ptr</a> = cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a7fc3af964301b311635445291553551a">ensuredPackets</a>[i].<a class="code" href="structensured__pkt__t.html#aeb7cc782edb497b401824b9a7cc458f9">pktBody</a>;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        }</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    }</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="comment">// Buffer: status</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="keywordflow">if</span> (buffers-&gt;<a class="code" href="structcom__manager__buffers__t.html#a4045c290e509f8bcc7eec6f7c2d9948e">status</a> == NULL || buffers-&gt;<a class="code" href="structcom__manager__buffers__t.html#a93c0d4cd565b3d1189cdcfecccc65e6d">statusSize</a> &lt; <a class="code" href="com__manager_8h.html#acc5755cbc1eac0f807fd7a93bac869f0">COM_MANAGER_BUF_SIZE_STATUS</a>(numHandles))</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    {</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    }</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ae1c22dddc776abe38f50a78ff1f76893">status</a> = (<a class="code" href="structcom__manager__status__t.html">com_manager_status_t</a>*)buffers-&gt;<a class="code" href="structcom__manager__buffers__t.html#a4045c290e509f8bcc7eec6f7c2d9948e">status</a>;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    memset(cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ae1c22dddc776abe38f50a78ff1f76893">status</a>, 0, buffers-&gt;<a class="code" href="structcom__manager__buffers__t.html#a93c0d4cd565b3d1189cdcfecccc65e6d">statusSize</a>);</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="preprocessor">#if ENABLE_PACKET_CONTINUATION</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        </div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="comment">// Buffer: status</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="keywordflow">if</span> (buffers-&gt;<a class="code" href="structcom__manager__buffers__t.html#af407f1ad7af8de08124156d829524b0d">packetContinuation</a> == NULL || buffers-&gt;<a class="code" href="structcom__manager__buffers__t.html#af5572549ba5acc41d2f6c95d6fd51a7d">packetContinuationSize</a> &lt; <a class="code" href="com__manager_8h.html#ae16f35cdf4ed5d9fa40006518b9f3b61">COM_MANAGER_BUF_SIZE_PKT_CONTINUATION</a>(numHandles))</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    {</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    }</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    cmInstance-&gt;con = (<a class="code" href="structp__data__t.html">p_data_t</a>*)buffers-&gt;<a class="code" href="structcom__manager__buffers__t.html#af407f1ad7af8de08124156d829524b0d">packetContinuation</a>;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    memset(cmInstance-&gt;con, 0, buffers-&gt;<a class="code" href="structcom__manager__buffers__t.html#af5572549ba5acc41d2f6c95d6fd51a7d">packetContinuationSize</a>);</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    </div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;}</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div><div class="line"><a name="l00242"></a><span class="lineno"><a class="line" href="com__manager_8c.html#a8aa67e959b62f86989c00aa923549304">  242</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="com__manager_8c.html#a8aa67e959b62f86989c00aa923549304">asciiMessageCompare</a>(<span class="keyword">const</span> <span class="keywordtype">void</span>* elem1, <span class="keyword">const</span> <span class="keywordtype">void</span>* elem2)</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;{</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <a class="code" href="structascii_message_map__t.html">asciiMessageMap_t</a>* e1 = (<a class="code" href="structascii_message_map__t.html">asciiMessageMap_t</a>*)elem1;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <a class="code" href="structascii_message_map__t.html">asciiMessageMap_t</a>* e2 = (<a class="code" href="structascii_message_map__t.html">asciiMessageMap_t</a>*)elem2;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="keywordflow">return</span> memcmp(e1-&gt;<a class="code" href="structascii_message_map__t.html#a321bf44d43b7484a7b206741225a0a1a">messageId</a>, e2-&gt;<a class="code" href="structascii_message_map__t.html#a321bf44d43b7484a7b206741225a0a1a">messageId</a>, 4);</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;}</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div><div class="line"><a name="l00250"></a><span class="lineno"><a class="line" href="com__manager_8h.html#a77e8440a1bacfa6c2427174f8ffe2a6b">  250</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="com__manager_8c.html#a77e8440a1bacfa6c2427174f8ffe2a6b">comManagerRegisterASCII</a>(<a class="code" href="structascii_message_map__t.html">asciiMessageMap_t</a>* asciiMessages, <span class="keywordtype">int</span> asciiMessagesCount, <a class="code" href="com__manager_8h.html#a9d0f8665a43491f9b0e729ae7ff3695c">pfnComManagerAsciiMessageHandler</a> msgFnc, <a class="code" href="com__manager_8h.html#a9d0f8665a43491f9b0e729ae7ff3695c">pfnComManagerAsciiMessageHandler</a> msgFncPost)</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;{</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <a class="code" href="com__manager_8c.html#ad0bc38eb0c3c8f9dcf3b18813cc02e8e">comManagerRegisterASCIIInstance</a>(&amp;g_cm, asciiMessages, asciiMessagesCount, msgFnc, msgFncPost);</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;}</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div><div class="line"><a name="l00255"></a><span class="lineno"><a class="line" href="com__manager_8h.html#a005e44a26217db33e173b13ef8000cf9">  255</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="com__manager_8c.html#ad0bc38eb0c3c8f9dcf3b18813cc02e8e">comManagerRegisterASCIIInstance</a>(<a class="code" href="com__manager_8h.html#aa4c7b70d216e3ec5adc54f13afc5ffde">CMHANDLE</a> cmInstance_, <a class="code" href="structascii_message_map__t.html">asciiMessageMap_t</a>* asciiMessages, <span class="keywordtype">int</span> asciiMessagesCount, <a class="code" href="com__manager_8h.html#a9d0f8665a43491f9b0e729ae7ff3695c">pfnComManagerAsciiMessageHandler</a> msgFnc, <a class="code" href="com__manager_8h.html#a9d0f8665a43491f9b0e729ae7ff3695c">pfnComManagerAsciiMessageHandler</a> msgFncPost)</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;{</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <a class="code" href="structcom__manager__t.html">com_manager_t</a>* cmInstance = (<a class="code" href="structcom__manager__t.html">com_manager_t</a>*)cmInstance_;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a7b82b19bdc580ff201c26478dccf4bcf">asciiMessages</a> = asciiMessages;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    cmInstance-&gt;<a class="code" href="structcom__manager__t.html#acdd39e362d1688f6af6f80ca5399cb1f">asciiMessagesCount</a> = asciiMessagesCount;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a160ec6a0aed3e2c8ef5aefab78b4f085">asciiMessageHandler</a> = msgFnc;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ad62909fc9a34160f2b2707506b8c12f4">asciiMessageHandlerPost</a> = msgFncPost;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    </div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="keywordflow">if</span> (asciiMessagesCount &gt; 1)</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    {</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        qsort(asciiMessages, <span class="keyword">sizeof</span>(asciiMessages[0]), asciiMessagesCount, <a class="code" href="com__manager_8c.html#a8aa67e959b62f86989c00aa923549304">asciiMessageCompare</a>);</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    }</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;}</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div><div class="line"><a name="l00270"></a><span class="lineno"><a class="line" href="com__manager_8h.html#a9887c6cd8d50dbb31888d12f9b7efddc">  270</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="com__manager_8c.html#a9887c6cd8d50dbb31888d12f9b7efddc">comManagerRegister</a>(uint32_t dataId, <a class="code" href="com__manager_8h.html#a1073351c9cb5c933c1f5ee9e0040a802">pfnComManagerPreSend</a> txFnc, <a class="code" href="com__manager_8h.html#a4d1cf2c64ae86f8dfc4c0976651fba6a">pfnComManagerPostRead</a> pstRxFnc, <span class="keyword">const</span> <span class="keywordtype">void</span>* txDataPtr, <span class="keywordtype">void</span>* rxDataPtr, <span class="keywordtype">int</span> dataSize, uint8_t pktFlags)</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;{</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <a class="code" href="com__manager_8c.html#a2d21a50f10c5d29e4b628166c38205a8">comManagerRegisterInstance</a>(&amp;g_cm, dataId, txFnc, pstRxFnc, txDataPtr, rxDataPtr, dataSize, pktFlags);</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;}</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div><div class="line"><a name="l00275"></a><span class="lineno"><a class="line" href="com__manager_8h.html#a6cd5088737bfad7efabe238a163cd78e">  275</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="com__manager_8c.html#a2d21a50f10c5d29e4b628166c38205a8">comManagerRegisterInstance</a>(<a class="code" href="com__manager_8h.html#aa4c7b70d216e3ec5adc54f13afc5ffde">CMHANDLE</a> cmInstance_, uint32_t dataId, <a class="code" href="com__manager_8h.html#a1073351c9cb5c933c1f5ee9e0040a802">pfnComManagerPreSend</a> txFnc, <a class="code" href="com__manager_8h.html#a4d1cf2c64ae86f8dfc4c0976651fba6a">pfnComManagerPostRead</a> pstRxFnc, <span class="keyword">const</span> <span class="keywordtype">void</span>* txDataPtr, <span class="keywordtype">void</span>* rxDataPtr, <span class="keywordtype">int</span> dataSize, uint8_t pktFlags)</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;{</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <a class="code" href="structcom__manager__t.html">com_manager_t</a>* cmInstance = (<a class="code" href="structcom__manager__t.html">com_manager_t</a>*)cmInstance_;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="comment">// Validate ID and data pointer</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="keywordflow">if</span> (dataId &gt;= <a class="code" href="data__sets_8h.html#a777819ed9aeeb6f96e9a74764d75064a">DID_COUNT</a>)</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    {</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    }</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="comment">// Function called to update struct before data is sent</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    cmInstance-&gt;<a class="code" href="structcom__manager__t.html#aea2db79a0cfa6806c350f03a1ed11734">regData</a>[dataId].<a class="code" href="structregistered__data__t.html#afd7c6955e72c835d5042524079925376">preTxFnc</a> = txFnc;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="comment">// Function called after data is received and struct is updated</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    cmInstance-&gt;<a class="code" href="structcom__manager__t.html#aea2db79a0cfa6806c350f03a1ed11734">regData</a>[dataId].<a class="code" href="structregistered__data__t.html#a004d79bbd9213f90e3409565f1ef48cc">pstRxFnc</a> = pstRxFnc;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="comment">// Pointer to data struct for Tx</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    cmInstance-&gt;<a class="code" href="structcom__manager__t.html#aea2db79a0cfa6806c350f03a1ed11734">regData</a>[dataId].<a class="code" href="structregistered__data__t.html#a89967b25487646d30f3d94c72cbe0430">dataSet</a>.<a class="code" href="structbuf_tx_rx_ptr__t.html#adb7fdcf7f9e8c13377db7643b67199b2">txPtr</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)txDataPtr;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="comment">// Pointer to data struct for Rx</span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    cmInstance-&gt;<a class="code" href="structcom__manager__t.html#aea2db79a0cfa6806c350f03a1ed11734">regData</a>[dataId].<a class="code" href="structregistered__data__t.html#a89967b25487646d30f3d94c72cbe0430">dataSet</a>.<a class="code" href="structbuf_tx_rx_ptr__t.html#a3c8e53783acdd89e12c360315fbaac0e">rxPtr</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)rxDataPtr;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="comment">// Size of data struct</span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    cmInstance-&gt;<a class="code" href="structcom__manager__t.html#aea2db79a0cfa6806c350f03a1ed11734">regData</a>[dataId].<a class="code" href="structregistered__data__t.html#a89967b25487646d30f3d94c72cbe0430">dataSet</a>.<a class="code" href="structbuf_tx_rx_ptr__t.html#aa35ef37b9fa29843a3f96140484c3dce">size</a> = dataSize;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    </div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="comment">// Packet flags</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    cmInstance-&gt;<a class="code" href="structcom__manager__t.html#aea2db79a0cfa6806c350f03a1ed11734">regData</a>[dataId].<a class="code" href="structregistered__data__t.html#ad7c741990c4b4bf9af22356127dc2f08">pktFlags</a> = pktFlags;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;}</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div><div class="line"><a name="l00304"></a><span class="lineno"><a class="line" href="com__manager_8h.html#a5153eef615e1ad8cd2025156d1be51d7">  304</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="com__manager_8c.html#a5153eef615e1ad8cd2025156d1be51d7">comManagerStep</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;{</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <a class="code" href="com__manager_8c.html#abb80b40c7d59e01f84a4cb5a4a337a37">comManagerStepInstance</a>(&amp;g_cm);</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;}</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div><div class="line"><a name="l00309"></a><span class="lineno"><a class="line" href="com__manager_8h.html#ab21b64f82a4af5312ef06ad41de5257f">  309</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="com__manager_8c.html#abb80b40c7d59e01f84a4cb5a4a337a37">comManagerStepInstance</a>(<a class="code" href="com__manager_8h.html#aa4c7b70d216e3ec5adc54f13afc5ffde">CMHANDLE</a> cmInstance_)</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;{</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <a class="code" href="structcom__manager__t.html">com_manager_t</a>* cmInstance = (<a class="code" href="structcom__manager__t.html">com_manager_t</a>*)cmInstance_;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    uint8_t c, additionalDataAvailable, canReadAgain;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    int32_t n, pHandle, freeByteCount;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <a class="code" href="structring__buffer__t.html">ring_buffer_t</a>* ringBuffer;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="keywordflow">if</span> (cmInstance-&gt;<a class="code" href="structcom__manager__t.html#aef5b95591013849e1710861537ed5818">readCallback</a>)</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    {</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        <span class="keywordflow">for</span> (pHandle = 0; pHandle &lt; cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ab98e59906ef79731a315b0f404f17bc3">numHandes</a>; pHandle++)</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        {</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;            ringBuffer = cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a96e9b622e9ce79bafbe1f603b20e2a20">ringBuffers</a> + pHandle;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;            canReadAgain = 1;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            readAgain:</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            freeByteCount = (<a class="code" href="com__manager_8h.html#a779b513296068d2a6186659183ff3c2c">RING_BUFFER_SIZE</a> - ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#a5bfd66636fb127b97f58ddd9eecb960d">endIndex</a>);</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;            <span class="comment">// if we are out of free space, we need to either move bytes over or start over</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;            <span class="keywordflow">if</span> (freeByteCount == 0)</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;            {</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                <span class="keywordflow">if</span> (ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#a2923f0836c88d3d7055f20b25edc2fd8">startIndex</a> &lt; <a class="code" href="com__manager_8h.html#aeb9aa926cea56bd3907b418e3c62a7e7">RING_BUFFER_FLUSH_THRESHOLD</a>)</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                {</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                    <span class="comment">// we will be hung unless we flush the ring buffer, we have to drop bytes in this case and the caller</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                    <span class="comment">//  will need to resend the data</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;                    ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#a2923f0836c88d3d7055f20b25edc2fd8">startIndex</a> = 0;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                    ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#a5bfd66636fb127b97f58ddd9eecb960d">endIndex</a> = 0;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                    ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#ac100861fe6491df179556a3c0cb7384b">scanIndex</a> = 0;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                }</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                <span class="keywordflow">else</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                {</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                    <span class="comment">// shift over the remaining data in the hopes that we will get a valid packet by appending the next read call</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                    ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#a5bfd66636fb127b97f58ddd9eecb960d">endIndex</a> -= ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#a2923f0836c88d3d7055f20b25edc2fd8">startIndex</a>;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                    ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#ac100861fe6491df179556a3c0cb7384b">scanIndex</a> -= ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#a2923f0836c88d3d7055f20b25edc2fd8">startIndex</a>;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                    memmove(ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#a35b6546f057e9b211c1f51f8537388dc">buf</a>, ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#a35b6546f057e9b211c1f51f8537388dc">buf</a> + ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#a2923f0836c88d3d7055f20b25edc2fd8">startIndex</a>, ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#a5bfd66636fb127b97f58ddd9eecb960d">endIndex</a>);</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                    ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#a2923f0836c88d3d7055f20b25edc2fd8">startIndex</a> = 0;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                }</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                <span class="comment">// re-calculate free byte count</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                freeByteCount = (<a class="code" href="com__manager_8h.html#a779b513296068d2a6186659183ff3c2c">RING_BUFFER_SIZE</a> - ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#a5bfd66636fb127b97f58ddd9eecb960d">endIndex</a>);</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;            }</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;            <span class="keywordflow">if</span> ((n = cmInstance-&gt;<a class="code" href="structcom__manager__t.html#aef5b95591013849e1710861537ed5818">readCallback</a>(cmInstance, pHandle, ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#a35b6546f057e9b211c1f51f8537388dc">buf</a> + ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#a5bfd66636fb127b97f58ddd9eecb960d">endIndex</a>, freeByteCount)) &gt; 0)</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;            {</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                additionalDataAvailable = 0;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ae1c22dddc776abe38f50a78ff1f76893">status</a>[pHandle].<a class="code" href="structcom__manager__status__t.html#ac612f97d0b588330e0ce0293170a60f0">readCounter</a> += n;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;                ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#a5bfd66636fb127b97f58ddd9eecb960d">endIndex</a> += n;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;                <span class="keywordflow">while</span> (ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#ac100861fe6491df179556a3c0cb7384b">scanIndex</a> &lt; ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#a5bfd66636fb127b97f58ddd9eecb960d">endIndex</a>)</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                {</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                    <span class="comment">// check for pass through bytes</span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                    <span class="keywordflow">if</span> (cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ae1c22dddc776abe38f50a78ff1f76893">status</a>[pHandle].<a class="code" href="structcom__manager__status__t.html#ae21797145c303bff1e0df2126550232d">passThroughBytes</a> &gt; 0)</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                    {</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                        <a class="code" href="com__manager_8c.html#aeeee35f3d2f1cf8f56a7b95d1ccc8ab4">processPassThroughBytes</a>(cmInstance, pHandle, ringBuffer);</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                    }</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                    c = ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#a35b6546f057e9b211c1f51f8537388dc">buf</a>[ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#ac100861fe6491df179556a3c0cb7384b">scanIndex</a>++];</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                    <span class="keywordflow">switch</span> (c)</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                    {</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                        <span class="keywordflow">case</span> <a class="code" href="_i_s_comm_8h.html#a739834da5d5205125ac7115741c30c63ae6fe9b97817df1aa809783bfc33f5d39">PSC_ASCII_START_BYTE</a>:</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                        {</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                            cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ae1c22dddc776abe38f50a78ff1f76893">status</a>[pHandle].<a class="code" href="structcom__manager__status__t.html#a799659757d78ea8a857bc35994b9cb8a">startByte</a> = <a class="code" href="_i_s_comm_8h.html#a739834da5d5205125ac7115741c30c63ae6fe9b97817df1aa809783bfc33f5d39">PSC_ASCII_START_BYTE</a>;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                            ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#a2923f0836c88d3d7055f20b25edc2fd8">startIndex</a> = ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#ac100861fe6491df179556a3c0cb7384b">scanIndex</a> - 1;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                        } <span class="keywordflow">break</span>;</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                        <span class="keywordflow">case</span> <a class="code" href="_i_s_comm_8h.html#a739834da5d5205125ac7115741c30c63ab65949193083fea6f789b9b447df716f">PSC_START_BYTE</a>:</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                        {</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                            cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ae1c22dddc776abe38f50a78ff1f76893">status</a>[pHandle].<a class="code" href="structcom__manager__status__t.html#a799659757d78ea8a857bc35994b9cb8a">startByte</a> = <a class="code" href="_i_s_comm_8h.html#a739834da5d5205125ac7115741c30c63ab65949193083fea6f789b9b447df716f">PSC_START_BYTE</a>;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                            ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#a2923f0836c88d3d7055f20b25edc2fd8">startIndex</a> = ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#ac100861fe6491df179556a3c0cb7384b">scanIndex</a> - 1;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                        } <span class="keywordflow">break</span>;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                        <span class="keywordflow">case</span> <a class="code" href="_i_s_comm_8h.html#a739834da5d5205125ac7115741c30c63aa49dc3f2b3a356aaca93e955456e6856">PSC_ASCII_END_BYTE</a>:</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;                        {</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                            <span class="keywordflow">if</span> (cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ae1c22dddc776abe38f50a78ff1f76893">status</a>[pHandle].<a class="code" href="structcom__manager__status__t.html#a799659757d78ea8a857bc35994b9cb8a">startByte</a> == <a class="code" href="_i_s_comm_8h.html#a739834da5d5205125ac7115741c30c63ae6fe9b97817df1aa809783bfc33f5d39">PSC_ASCII_START_BYTE</a>)</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                            {</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;                                <a class="code" href="com__manager_8c.html#a3e131ffd2b0658b9fa9b90271bb5b638">processAsciiPacket</a>(cmInstance, pHandle, ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#a35b6546f057e9b211c1f51f8537388dc">buf</a> + ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#a2923f0836c88d3d7055f20b25edc2fd8">startIndex</a>, ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#ac100861fe6491df179556a3c0cb7384b">scanIndex</a> - ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#a2923f0836c88d3d7055f20b25edc2fd8">startIndex</a>);</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;                            }</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;                            ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#a2923f0836c88d3d7055f20b25edc2fd8">startIndex</a> = ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#ac100861fe6491df179556a3c0cb7384b">scanIndex</a>;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                            cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ae1c22dddc776abe38f50a78ff1f76893">status</a>[pHandle].<a class="code" href="structcom__manager__status__t.html#a799659757d78ea8a857bc35994b9cb8a">startByte</a> = 0;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                        } <span class="keywordflow">break</span>;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                        <span class="keywordflow">case</span> <a class="code" href="_i_s_comm_8h.html#a739834da5d5205125ac7115741c30c63a5206c6e0545c0e46afc3cb7eaf2fe9c4">PSC_END_BYTE</a>:</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                        {</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;                            <span class="keywordflow">if</span> (cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ae1c22dddc776abe38f50a78ff1f76893">status</a>[pHandle].<a class="code" href="structcom__manager__status__t.html#a799659757d78ea8a857bc35994b9cb8a">startByte</a> == <a class="code" href="_i_s_comm_8h.html#a739834da5d5205125ac7115741c30c63ab65949193083fea6f789b9b447df716f">PSC_START_BYTE</a>)</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;                            {</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;                                <a class="code" href="com__manager_8c.html#aec43bd8335ac3a31fe2e668c7611b209">processBinaryPacket</a>(cmInstance, pHandle, ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#a35b6546f057e9b211c1f51f8537388dc">buf</a>, ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#a35b6546f057e9b211c1f51f8537388dc">buf</a> + ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#a2923f0836c88d3d7055f20b25edc2fd8">startIndex</a>, ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#ac100861fe6491df179556a3c0cb7384b">scanIndex</a> - ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#a2923f0836c88d3d7055f20b25edc2fd8">startIndex</a>, &amp;additionalDataAvailable);</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                            }</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                            ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#a2923f0836c88d3d7055f20b25edc2fd8">startIndex</a> = ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#ac100861fe6491df179556a3c0cb7384b">scanIndex</a>;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                            cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ae1c22dddc776abe38f50a78ff1f76893">status</a>[pHandle].<a class="code" href="structcom__manager__status__t.html#a799659757d78ea8a857bc35994b9cb8a">startByte</a> = 0;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                        } <span class="keywordflow">break</span>;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                        <span class="keywordflow">case</span> <a class="code" href="_i_s_comm_8h.html#a739834da5d5205125ac7115741c30c63a3c40c8ab20b400ce92d105b470e09891">UBLOX_START_BYTE1</a>:</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                        {</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;                            <span class="keywordflow">if</span> (<a class="code" href="com__manager_8c.html#a9f308bd49e5afa45f8deb7f01302241f">beginUbloxPacket</a>(cmInstance, pHandle, ringBuffer))</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;                            {</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;                                <span class="keywordflow">return</span>;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;                            }</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;                        } <span class="keywordflow">break</span>;</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;                        <span class="keywordflow">case</span> <a class="code" href="_i_s_comm_8h.html#a739834da5d5205125ac7115741c30c63ae2342a40d92a37d68326fb13d2f7d40e">RTCM3_START_BYTE</a>:</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                        {</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;                            <span class="keywordflow">if</span> (<a class="code" href="com__manager_8c.html#acbf78e85e9b31849a67e1dca09688f9f">beginRtcm3Packet</a>(cmInstance, pHandle, ringBuffer))</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;                            {</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;                                <span class="keywordflow">return</span>;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;                            }</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                        } <span class="keywordflow">break</span>;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                    }</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                }</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                <span class="keywordflow">if</span> (additionalDataAvailable &amp;&amp; canReadAgain)</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                {</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                    canReadAgain = 0;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                    <span class="keywordflow">goto</span> readAgain;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                }</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;            }</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;            </div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;            <span class="keywordflow">if</span> ((cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ae1c22dddc776abe38f50a78ff1f76893">status</a>[pHandle].<a class="code" href="structcom__manager__status__t.html#a8212909888b506491643d391cd7da2c3">flags</a> &amp; <a class="code" href="_i_s_comm_8h.html#ab0476659eb782bc338d77d1e1142abc3ad74e332e6cd1df17a285332390c72323">CM_PKT_FLAGS_RX_VALID_DATA</a>) &amp;&amp; cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ae1c22dddc776abe38f50a78ff1f76893">status</a>[pHandle].<a class="code" href="structcom__manager__status__t.html#ac612f97d0b588330e0ce0293170a60f0">readCounter</a> &gt; 128)</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;            {</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                <span class="comment">// communication problem, clear communication received bit</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;                cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ae1c22dddc776abe38f50a78ff1f76893">status</a>[pHandle].<a class="code" href="structcom__manager__status__t.html#a8212909888b506491643d391cd7da2c3">flags</a> &amp;= (~<a class="code" href="_i_s_comm_8h.html#ab0476659eb782bc338d77d1e1142abc3ad74e332e6cd1df17a285332390c72323">CM_PKT_FLAGS_RX_VALID_DATA</a>);</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;            }</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        }</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    }</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <a class="code" href="com__manager_8c.html#a8bb05c7251208dda62e92b8be1f4c5ad">stepComManagerSendMessagesInstance</a>(cmInstance);</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;}</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;</div><div class="line"><a name="l00438"></a><span class="lineno"><a class="line" href="com__manager_8c.html#a6de6ec07690eea63b78d52c6b36f6557">  438</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="com__manager_8c.html#a6de6ec07690eea63b78d52c6b36f6557">stepComManagerSendMessages</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;{</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <a class="code" href="com__manager_8c.html#a8bb05c7251208dda62e92b8be1f4c5ad">stepComManagerSendMessagesInstance</a>(&amp;g_cm);</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;}</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;</div><div class="line"><a name="l00443"></a><span class="lineno"><a class="line" href="com__manager_8c.html#a8bb05c7251208dda62e92b8be1f4c5ad">  443</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="com__manager_8c.html#a8bb05c7251208dda62e92b8be1f4c5ad">stepComManagerSendMessagesInstance</a>(<a class="code" href="com__manager_8h.html#aa4c7b70d216e3ec5adc54f13afc5ffde">CMHANDLE</a> cmInstance_)</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;{</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <a class="code" href="structcom__manager__t.html">com_manager_t</a>* cmInstance = cmInstance_;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    </div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="comment">// Send data (if necessary)</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="structbroadcast__msg__t.html">broadcast_msg_t</a>* bcPtr = cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a01a38214bdf57c48d70a7b6c7dbdf32c">broadcastMessages</a>, *ptrEnd = (cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a01a38214bdf57c48d70a7b6c7dbdf32c">broadcastMessages</a> + <a class="code" href="com__manager_8h.html#a08d1326bfd508f5c35f3a8853488ad04">MAX_NUM_BCAST_MSGS</a>); bcPtr &lt; ptrEnd; bcPtr++)</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    {</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        <span class="comment">// If send buffer does not have space, exit out</span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        <span class="keywordflow">if</span> (cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ac70b1bd3d8e2c27fe81aab2b9221d294">txFreeCallback</a> &amp;&amp; (bcPtr-&gt;pkt.txData.size &gt; (uint32_t)cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ac70b1bd3d8e2c27fe81aab2b9221d294">txFreeCallback</a>(cmInstance, bcPtr-&gt;pHandle)))</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        {</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        }</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        <span class="comment">// Send once and remove from message queue</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bcPtr-&gt;period == <a class="code" href="com__manager_8c.html#a055a98068f64092742e6e50a5167c4a4">MSG_PERIOD_SEND_ONCE</a>)</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        {</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;            <a class="code" href="com__manager_8c.html#adefe5ab74a1adf2b17626a35b7b5d8e8">sendDataPacket</a>(cmInstance, bcPtr-&gt;pHandle, &amp;(bcPtr-&gt;pkt));</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;            <a class="code" href="com__manager_8c.html#a305a8082a720fd5b3bc521012df55202">disableBroadcastMsg</a>(cmInstance, bcPtr);</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        }</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        <span class="comment">// Broadcast messages</span></div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bcPtr-&gt;period &gt; 0)</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        {</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;            <span class="comment">// Check if counter has expired</span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;            <span class="keywordflow">if</span> (++bcPtr-&gt;counter &gt;= bcPtr-&gt;period)</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;            {</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;                bcPtr-&gt;counter = 0;    <span class="comment">// reset counter</span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;                <span class="comment">// Prep data if callback exists</span></div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                <span class="keywordflow">if</span> (cmInstance-&gt;<a class="code" href="structcom__manager__t.html#aea2db79a0cfa6806c350f03a1ed11734">regData</a>[bcPtr-&gt;dataHdr.id].<a class="code" href="structregistered__data__t.html#afd7c6955e72c835d5042524079925376">preTxFnc</a>)</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;                {</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;                    cmInstance-&gt;<a class="code" href="structcom__manager__t.html#aea2db79a0cfa6806c350f03a1ed11734">regData</a>[bcPtr-&gt;dataHdr.id].<a class="code" href="structregistered__data__t.html#afd7c6955e72c835d5042524079925376">preTxFnc</a>(cmInstance, bcPtr-&gt;pHandle);</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                }</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                <a class="code" href="com__manager_8c.html#adefe5ab74a1adf2b17626a35b7b5d8e8">sendDataPacket</a>(cmInstance, bcPtr-&gt;pHandle, &amp;(bcPtr-&gt;pkt));</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;            }</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        }</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    }</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <span class="comment">// Resend data (if necessary)</span></div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <a class="code" href="com__manager_8c.html#ae62f18ac3c8c1dcde204cb554fba53e3">stepPacketRetry</a>(cmInstance);</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;}</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;</div><div class="line"><a name="l00483"></a><span class="lineno"><a class="line" href="com__manager_8h.html#a2812b540bae8534ce94668e0b4c5c617">  483</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="com__manager_8c.html#a2812b540bae8534ce94668e0b4c5c617">comManagerSetPassThrough</a>(<a class="code" href="com__manager_8h.html#a74683b05c0ff3f3c394e2a391e7bb42f">pfnComManagerPassThrough</a> handler)</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;{</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <a class="code" href="com__manager_8c.html#a75c9e4c2b6f2c9a44991454fa9dc8822">comManagerSetPassThroughInstance</a>(&amp;g_cm, handler);</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;}</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;</div><div class="line"><a name="l00488"></a><span class="lineno"><a class="line" href="com__manager_8h.html#a75c9e4c2b6f2c9a44991454fa9dc8822">  488</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="com__manager_8c.html#a75c9e4c2b6f2c9a44991454fa9dc8822">comManagerSetPassThroughInstance</a>(<a class="code" href="com__manager_8h.html#aa4c7b70d216e3ec5adc54f13afc5ffde">CMHANDLE</a> cmInstance, <a class="code" href="com__manager_8h.html#a74683b05c0ff3f3c394e2a391e7bb42f">pfnComManagerPassThrough</a> handler)</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;{</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <span class="keywordflow">if</span> (cmInstance != 0)</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    {</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        ((<a class="code" href="structcom__manager__t.html">com_manager_t</a>*)cmInstance)-&gt;passThroughHandler = handler;</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    }</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;}</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;</div><div class="line"><a name="l00496"></a><span class="lineno"><a class="line" href="com__manager_8h.html#a4ad33af42c470295b3e053956cd3a6b4">  496</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="com__manager_8c.html#a4ad33af42c470295b3e053956cd3a6b4">comManagerSetRmcCallback</a>(<a class="code" href="com__manager_8h.html#a70a8b02edd1174af2af3c4a79b465d72">pfnComManagerAsapMsg</a> handler)</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;{</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <a class="code" href="com__manager_8c.html#a7f293526ff6f68cdedfb57181d456bd8">comManagerSetRmcCallbackInstance</a>(&amp;g_cm, handler);</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;}</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;</div><div class="line"><a name="l00501"></a><span class="lineno"><a class="line" href="com__manager_8h.html#a7f293526ff6f68cdedfb57181d456bd8">  501</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="com__manager_8c.html#a7f293526ff6f68cdedfb57181d456bd8">comManagerSetRmcCallbackInstance</a>(<a class="code" href="com__manager_8h.html#aa4c7b70d216e3ec5adc54f13afc5ffde">CMHANDLE</a> cmInstance, <a class="code" href="com__manager_8h.html#a70a8b02edd1174af2af3c4a79b465d72">pfnComManagerAsapMsg</a> handler)</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;{</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <span class="keywordflow">if</span> (cmInstance != 0)</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    {</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        ((<a class="code" href="structcom__manager__t.html">com_manager_t</a>*)cmInstance)-&gt;rmcHandler = handler;</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    }</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;}</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;</div><div class="line"><a name="l00509"></a><span class="lineno"><a class="line" href="com__manager_8h.html#a5a99656c76c4e36420c61a9887081286">  509</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="com__manager_8c.html#a5a99656c76c4e36420c61a9887081286">comManagerAssignUserPointer</a>(<a class="code" href="com__manager_8h.html#aa4c7b70d216e3ec5adc54f13afc5ffde">CMHANDLE</a> cmInstance, <span class="keywordtype">void</span>* userPointer)</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;{</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    ((<a class="code" href="structcom__manager__t.html">com_manager_t</a>*)cmInstance)-&gt;userPointer = userPointer;</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;}</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;</div><div class="line"><a name="l00514"></a><span class="lineno"><a class="line" href="com__manager_8h.html#ae2cd08328452b51eb95fdfdaaac1f869">  514</a></span>&#160;<span class="keywordtype">void</span>* <a class="code" href="com__manager_8c.html#ae2cd08328452b51eb95fdfdaaac1f869">comManagerGetUserPointer</a>(<a class="code" href="com__manager_8h.html#aa4c7b70d216e3ec5adc54f13afc5ffde">CMHANDLE</a> cmInstance)</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;{</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <span class="keywordflow">return</span> ((<a class="code" href="structcom__manager__t.html">com_manager_t</a>*)cmInstance)-&gt;userPointer;</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;}</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;</div><div class="line"><a name="l00519"></a><span class="lineno"><a class="line" href="com__manager_8h.html#a2a8e7beee9874f9f2cbc9669186dbba3">  519</a></span>&#160;<a class="code" href="structcom__manager__status__t.html">com_manager_status_t</a>* <a class="code" href="com__manager_8c.html#a2a8e7beee9874f9f2cbc9669186dbba3">comManagerGetStatus</a>(<span class="keywordtype">int</span> pHandle)</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;{</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="com__manager_8c.html#a5653d29c5faff7390f7568db9d6918cd">comManagerGetStatusInstance</a>(&amp;g_cm, pHandle);</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;}</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;</div><div class="line"><a name="l00524"></a><span class="lineno"><a class="line" href="com__manager_8h.html#a5653d29c5faff7390f7568db9d6918cd">  524</a></span>&#160;<a class="code" href="structcom__manager__status__t.html">com_manager_status_t</a>* <a class="code" href="com__manager_8c.html#a5653d29c5faff7390f7568db9d6918cd">comManagerGetStatusInstance</a>(<a class="code" href="com__manager_8h.html#aa4c7b70d216e3ec5adc54f13afc5ffde">CMHANDLE</a> cmInstance, <span class="keywordtype">int</span> pHandle)</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;{</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="keywordflow">return</span> &amp;(((<a class="code" href="structcom__manager__t.html">com_manager_t</a>*)cmInstance)-&gt;status[pHandle]);</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;}</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;</div><div class="line"><a name="l00541"></a><span class="lineno"><a class="line" href="com__manager_8h.html#a2f5355ba3c4e3467fd3eba423904324b">  541</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="com__manager_8c.html#a2f5355ba3c4e3467fd3eba423904324b">comManagerGetData</a>(<span class="keywordtype">int</span> pHandle, uint32_t dataId, <span class="keywordtype">int</span> offset, <span class="keywordtype">int</span> size, <span class="keywordtype">int</span> periodMultiple)</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;{</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <a class="code" href="com__manager_8c.html#a6d8d453c752f85113a253e87285694fa">comManagerGetDataInstance</a>(&amp;g_cm, pHandle, dataId, offset, size, periodMultiple);</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;}</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;</div><div class="line"><a name="l00546"></a><span class="lineno"><a class="line" href="com__manager_8h.html#a6d8d453c752f85113a253e87285694fa">  546</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="com__manager_8c.html#a6d8d453c752f85113a253e87285694fa">comManagerGetDataInstance</a>(<a class="code" href="com__manager_8h.html#aa4c7b70d216e3ec5adc54f13afc5ffde">CMHANDLE</a> cmInstance, <span class="keywordtype">int</span> pHandle, uint32_t dataId, <span class="keywordtype">int</span> offset, <span class="keywordtype">int</span> size, <span class="keywordtype">int</span> periodMultiple)</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;{</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <a class="code" href="structp__data__get__t.html">p_data_get_t</a> request;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <a class="code" href="structbuf_ptr__t.html">bufPtr_t</a> data;</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <span class="comment">// Create and Send request packet</span></div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    request.<a class="code" href="structp__data__get__t.html#ab12d63b4fd0d9d6f5a27e8b0856af7a8">id</a> = dataId;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    request.<a class="code" href="structp__data__get__t.html#a0123a3db2bf728e0d199bcb606123ec8">offset</a> = offset;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    request.<a class="code" href="structp__data__get__t.html#a11afc3ecb51275d65121ed378d24267a">size</a> = size;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    request.<a class="code" href="structp__data__get__t.html#ac96de892e311a7a68676a99d8e9c6f98">bc_period_multiple</a> = periodMultiple;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    data.<a class="code" href="structbuf_ptr__t.html#ad4295aa9699eea57f6219a92475a327c">ptr</a> = (uint8_t*)&amp;request;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    data.<a class="code" href="structbuf_ptr__t.html#a89121516bb8e4f198c13eaf8e1d23457">size</a> = <span class="keyword">sizeof</span>(request);</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <a class="code" href="com__manager_8c.html#ab8cf768e6342dbe0abf16db10f2c7ede">comManagerSendInstance</a>(cmInstance, pHandle, <a class="code" href="_i_s_comm_8h.html#a27634099d972a0c65e8a3de17ea9d094">PID_GET_DATA</a>, 0, &amp;data, 0);</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    <span class="comment">// comManagerSendEnsured(pHandle, PID_GET_DATA, (unsigned char*)&amp;request, sizeof(request));</span></div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;}</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;</div><div class="line"><a name="l00564"></a><span class="lineno"><a class="line" href="com__manager_8h.html#aae55430658079aefb707533cd58c5f5a">  564</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="com__manager_8c.html#aae55430658079aefb707533cd58c5f5a">comManagerGetDataRmc</a>(<span class="keywordtype">int</span> pHandle, uint64_t rmcBits, uint32_t rmcOptions)</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;{</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    <a class="code" href="com__manager_8c.html#a613a5a7fafd2403866d7e0aa5625272d">comManagerGetDataRmcInstance</a>(&amp;g_cm, pHandle, rmcBits, rmcOptions);</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;}</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;</div><div class="line"><a name="l00569"></a><span class="lineno"><a class="line" href="com__manager_8h.html#a613a5a7fafd2403866d7e0aa5625272d">  569</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="com__manager_8c.html#a613a5a7fafd2403866d7e0aa5625272d">comManagerGetDataRmcInstance</a>(<a class="code" href="com__manager_8h.html#aa4c7b70d216e3ec5adc54f13afc5ffde">CMHANDLE</a> cmInstance, <span class="keywordtype">int</span> pHandle, uint64_t rmcBits, uint32_t rmcOptions)</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;{</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <a class="code" href="struct_p_a_c_k_e_d.html">rmc_t</a> rmc;</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    rmc.<a class="code" href="struct_p_a_c_k_e_d.html#aaccb3eeb711867f9d36d033359eb8917">bits</a> = rmcBits;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    rmc.<a class="code" href="struct_p_a_c_k_e_d.html#a2fc5b85d6ca7828bedab08e5f019c2f6">options</a> = rmcOptions;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <a class="code" href="com__manager_8c.html#a96bbc21cd912ec5d432163a706c93bb5">comManagerSendDataInstance</a>(cmInstance, pHandle, <a class="code" href="data__sets_8h.html#a9b78d38da66e91d33bd5fef049125f51">DID_RMC</a>, &amp;rmc, <span class="keyword">sizeof</span>(<a class="code" href="struct_p_a_c_k_e_d.html">rmc_t</a>), 0);</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;}</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;</div><div class="line"><a name="l00578"></a><span class="lineno"><a class="line" href="com__manager_8h.html#a4f2c449501f06efa1689f82b88a1db64">  578</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="com__manager_8c.html#a4f2c449501f06efa1689f82b88a1db64">comManagerSendData</a>(<span class="keywordtype">int</span> pHandle, uint32_t dataId, <span class="keywordtype">void</span> *dataPtr, <span class="keywordtype">int</span> dataSize, <span class="keywordtype">int</span> dataOffset)</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;{</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="com__manager_8c.html#a96bbc21cd912ec5d432163a706c93bb5">comManagerSendDataInstance</a>(&amp;g_cm, pHandle, dataId, dataPtr, dataSize, dataOffset);</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;}</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;</div><div class="line"><a name="l00583"></a><span class="lineno"><a class="line" href="com__manager_8h.html#a96bbc21cd912ec5d432163a706c93bb5">  583</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="com__manager_8c.html#a96bbc21cd912ec5d432163a706c93bb5">comManagerSendDataInstance</a>(<a class="code" href="com__manager_8h.html#aa4c7b70d216e3ec5adc54f13afc5ffde">CMHANDLE</a> cmInstance, <span class="keywordtype">int</span> pHandle, uint32_t dataId, <span class="keywordtype">void</span>* dataPtr, <span class="keywordtype">int</span> dataSize, <span class="keywordtype">int</span> dataOffset)</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;{</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <a class="code" href="structp__data__hdr__t.html">p_data_hdr_t</a> hdr;</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <a class="code" href="structbuf_ptr__t.html">bufPtr_t</a> bodyHdr, data;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    <span class="comment">// Data Header</span></div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    hdr.<a class="code" href="structp__data__hdr__t.html#a0a70811dba0872fe68a2d58c24cb7894">id</a> = dataId;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    hdr.<a class="code" href="structp__data__hdr__t.html#ae4e77713f907776d843284114634d642">size</a> = dataSize;</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    hdr.<a class="code" href="structp__data__hdr__t.html#a5671779d9843a522942f60cbca2dee18">offset</a> = dataOffset;</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    <span class="comment">// Packet Body</span></div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    bodyHdr.<a class="code" href="structbuf_ptr__t.html#ad4295aa9699eea57f6219a92475a327c">ptr</a> = (uint8_t*)&amp;hdr;</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    bodyHdr.<a class="code" href="structbuf_ptr__t.html#a89121516bb8e4f198c13eaf8e1d23457">size</a> = <span class="keyword">sizeof</span>(hdr);</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    data.<a class="code" href="structbuf_ptr__t.html#ad4295aa9699eea57f6219a92475a327c">ptr</a> = (uint8_t*)dataPtr;</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    data.<a class="code" href="structbuf_ptr__t.html#a89121516bb8e4f198c13eaf8e1d23457">size</a> = dataSize;</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="com__manager_8c.html#ab8cf768e6342dbe0abf16db10f2c7ede">comManagerSendInstance</a>(cmInstance, pHandle, <a class="code" href="_i_s_comm_8h.html#ad8310776b70fca7c3b56b2734a68ad9f">PID_SET_DATA</a>, &amp;bodyHdr, &amp;data, 0);</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;}</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;</div><div class="line"><a name="l00602"></a><span class="lineno"><a class="line" href="com__manager_8h.html#ae13ccb8e9ac757f7fe40e212f9c92616">  602</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="com__manager_8c.html#ae13ccb8e9ac757f7fe40e212f9c92616">comManagerSendDataNoAck</a>(<span class="keywordtype">int</span> pHandle, uint32_t dataId, <span class="keywordtype">void</span> *dataPtr, <span class="keywordtype">int</span> dataSize, <span class="keywordtype">int</span> dataOffset)</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;{</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="com__manager_8c.html#a6adce0b5b228eff4bd756011b3c2c6c8">comManagerSendDataNoAckInstance</a>(&amp;g_cm, pHandle, dataId, dataPtr, dataSize, dataOffset);</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;}</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;</div><div class="line"><a name="l00607"></a><span class="lineno"><a class="line" href="com__manager_8h.html#a6adce0b5b228eff4bd756011b3c2c6c8">  607</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="com__manager_8c.html#a6adce0b5b228eff4bd756011b3c2c6c8">comManagerSendDataNoAckInstance</a>(<a class="code" href="com__manager_8h.html#aa4c7b70d216e3ec5adc54f13afc5ffde">CMHANDLE</a> cmInstance, <span class="keywordtype">int</span> pHandle, uint32_t dataId, <span class="keywordtype">void</span>* dataPtr, <span class="keywordtype">int</span> dataSize, <span class="keywordtype">int</span> dataOffset)</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;{</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    <a class="code" href="structp__data__hdr__t.html">p_data_hdr_t</a> hdr;</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    <a class="code" href="structbuf_ptr__t.html">bufPtr_t</a> bodyHdr, data;</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    <span class="comment">// Data Header</span></div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    hdr.<a class="code" href="structp__data__hdr__t.html#a0a70811dba0872fe68a2d58c24cb7894">id</a> = dataId;</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    hdr.<a class="code" href="structp__data__hdr__t.html#ae4e77713f907776d843284114634d642">size</a> = dataSize;</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    hdr.<a class="code" href="structp__data__hdr__t.html#a5671779d9843a522942f60cbca2dee18">offset</a> = dataOffset;</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <span class="comment">// Packet Body</span></div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    bodyHdr.<a class="code" href="structbuf_ptr__t.html#ad4295aa9699eea57f6219a92475a327c">ptr</a> = (uint8_t*)&amp;hdr;</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    bodyHdr.<a class="code" href="structbuf_ptr__t.html#a89121516bb8e4f198c13eaf8e1d23457">size</a> = <span class="keyword">sizeof</span>(hdr);</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    data.<a class="code" href="structbuf_ptr__t.html#ad4295aa9699eea57f6219a92475a327c">ptr</a> = (uint8_t*)dataPtr;</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    data.<a class="code" href="structbuf_ptr__t.html#a89121516bb8e4f198c13eaf8e1d23457">size</a> = dataSize;</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="com__manager_8c.html#ab8cf768e6342dbe0abf16db10f2c7ede">comManagerSendInstance</a>((<a class="code" href="structcom__manager__t.html">com_manager_t</a>*)cmInstance, pHandle, <a class="code" href="_i_s_comm_8h.html#aeafbbae0d562134d2aa48c43dfa849b8">PID_DATA</a>, &amp;bodyHdr, &amp;data, 0);</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;}</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;</div><div class="line"><a name="l00626"></a><span class="lineno"><a class="line" href="com__manager_8h.html#a750c925ebe5c23deeecd6c3dc47df2c9">  626</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="com__manager_8c.html#a750c925ebe5c23deeecd6c3dc47df2c9">comManagerSendRawData</a>(<span class="keywordtype">int</span> pHandle, uint32_t dataId, <span class="keywordtype">void</span> *dataPtr, <span class="keywordtype">int</span> dataSize, <span class="keywordtype">int</span> dataOffset)</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;{</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="com__manager_8c.html#a9bfdf04b15fa460f0bedcf268e596f42">comManagerSendRawDataInstance</a>(&amp;g_cm, pHandle, dataId, dataPtr, dataSize, dataOffset);</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;}</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;</div><div class="line"><a name="l00631"></a><span class="lineno"><a class="line" href="com__manager_8h.html#a9bfdf04b15fa460f0bedcf268e596f42">  631</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="com__manager_8c.html#a9bfdf04b15fa460f0bedcf268e596f42">comManagerSendRawDataInstance</a>(<a class="code" href="com__manager_8h.html#aa4c7b70d216e3ec5adc54f13afc5ffde">CMHANDLE</a> cmInstance, <span class="keywordtype">int</span> pHandle, uint32_t dataId, <span class="keywordtype">void</span>* dataPtr, <span class="keywordtype">int</span> dataSize, <span class="keywordtype">int</span> dataOffset)</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;{</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <a class="code" href="structp__data__hdr__t.html">p_data_hdr_t</a> hdr;</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    <a class="code" href="structbuf_ptr__t.html">bufPtr_t</a> bodyHdr, data;</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    <span class="comment">// Data Header</span></div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    hdr.<a class="code" href="structp__data__hdr__t.html#a0a70811dba0872fe68a2d58c24cb7894">id</a> = dataId;</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    hdr.<a class="code" href="structp__data__hdr__t.html#ae4e77713f907776d843284114634d642">size</a> = dataSize;</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    hdr.<a class="code" href="structp__data__hdr__t.html#a5671779d9843a522942f60cbca2dee18">offset</a> = dataOffset;</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    <span class="comment">// Packet Body</span></div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    bodyHdr.<a class="code" href="structbuf_ptr__t.html#ad4295aa9699eea57f6219a92475a327c">ptr</a> = (uint8_t*)&amp;hdr;</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    bodyHdr.<a class="code" href="structbuf_ptr__t.html#a89121516bb8e4f198c13eaf8e1d23457">size</a> = <span class="keyword">sizeof</span>(hdr);</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    data.<a class="code" href="structbuf_ptr__t.html#ad4295aa9699eea57f6219a92475a327c">ptr</a> = (uint8_t*)dataPtr;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    data.<a class="code" href="structbuf_ptr__t.html#a89121516bb8e4f198c13eaf8e1d23457">size</a> = dataSize;</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="com__manager_8c.html#ab8cf768e6342dbe0abf16db10f2c7ede">comManagerSendInstance</a>((<a class="code" href="structcom__manager__t.html">com_manager_t</a>*)cmInstance, pHandle, <a class="code" href="_i_s_comm_8h.html#ad8310776b70fca7c3b56b2734a68ad9f">PID_SET_DATA</a>, &amp;bodyHdr, &amp;data, <a class="code" href="_i_s_comm_8h.html#ab0476659eb782bc338d77d1e1142abc3af50f893f1117ff75e69c84617c928775">CM_PKT_FLAGS_RAW_DATA_NO_SWAP</a>);</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;}</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;</div><div class="line"><a name="l00650"></a><span class="lineno"><a class="line" href="com__manager_8h.html#a8e579189eb6108310736f30327a0cd0b">  650</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="com__manager_8c.html#a8e579189eb6108310736f30327a0cd0b">comManagerDisableData</a>(<span class="keywordtype">int</span> pHandle, uint32_t dataId)</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;{</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="com__manager_8c.html#af012b68382286a50eeef956a4e68f124">comManagerDisableDataInstance</a>(&amp;g_cm, pHandle, dataId);</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;}</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;</div><div class="line"><a name="l00655"></a><span class="lineno"><a class="line" href="com__manager_8h.html#af012b68382286a50eeef956a4e68f124">  655</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="com__manager_8c.html#af012b68382286a50eeef956a4e68f124">comManagerDisableDataInstance</a>(<a class="code" href="com__manager_8h.html#aa4c7b70d216e3ec5adc54f13afc5ffde">CMHANDLE</a> cmInstance, <span class="keywordtype">int</span> pHandle, uint32_t dataId)</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;{</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    <a class="code" href="structbuf_ptr__t.html">bufPtr_t</a> data;</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    data.<a class="code" href="structbuf_ptr__t.html#ad4295aa9699eea57f6219a92475a327c">ptr</a>  = (uint8_t*)&amp;dataId;</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    data.<a class="code" href="structbuf_ptr__t.html#a89121516bb8e4f198c13eaf8e1d23457">size</a> = 4;</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="com__manager_8c.html#ab8cf768e6342dbe0abf16db10f2c7ede">comManagerSendInstance</a>(cmInstance, pHandle, <a class="code" href="_i_s_comm_8h.html#a37da6e9c18d89f76c39fa9a27394275a">PID_STOP_DID_BROADCAST</a>, 0, &amp;data, 0);</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;}</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;</div><div class="line"><a name="l00664"></a><span class="lineno"><a class="line" href="com__manager_8h.html#a56ddced36e9afc75cb9e94f67a8cf3f5">  664</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="com__manager_8c.html#a9ffb3e89b6bb53a26e590903ac97b8e9">comManagerSend</a>(<span class="keywordtype">int</span> pHandle, uint8_t pktInfo, <a class="code" href="structbuf_ptr__t.html">bufPtr_t</a> *bodyHdr, <a class="code" href="structbuf_ptr__t.html">bufPtr_t</a> *txData, uint8_t pFlags)</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;{</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="com__manager_8c.html#ab8cf768e6342dbe0abf16db10f2c7ede">comManagerSendInstance</a>(&amp;g_cm, pHandle, pktInfo, bodyHdr, txData, pFlags);</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;}</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;</div><div class="line"><a name="l00669"></a><span class="lineno"><a class="line" href="com__manager_8h.html#ab8cf768e6342dbe0abf16db10f2c7ede">  669</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="com__manager_8c.html#ab8cf768e6342dbe0abf16db10f2c7ede">comManagerSendInstance</a>(<a class="code" href="com__manager_8h.html#aa4c7b70d216e3ec5adc54f13afc5ffde">CMHANDLE</a> cmInstance, <span class="keywordtype">int</span> pHandle, uint8_t pktInfo, <a class="code" href="structbuf_ptr__t.html">bufPtr_t</a>* bodyHdr, <a class="code" href="structbuf_ptr__t.html">bufPtr_t</a>* txData, uint8_t pktFlags)</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;{</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <a class="code" href="structpkt__info__t.html">pkt_info_t</a> pkt;</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    memset(&amp;pkt, 0, <span class="keyword">sizeof</span>(<a class="code" href="structpkt__info__t.html">pkt_info_t</a>));</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    <span class="comment">// Create Packet String (start to end byte)</span></div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    pkt.<a class="code" href="structpkt__info__t.html#afe0ed5c632ebcc87099c77ff967433d5">hdr</a>.<a class="code" href="structpacket__hdr__t.html#aae0969a547bd5ea711e2fe7e2d9a5f4e">startByte</a> = <a class="code" href="_i_s_comm_8h.html#a739834da5d5205125ac7115741c30c63ab65949193083fea6f789b9b447df716f">PSC_START_BYTE</a>;</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    pkt.<a class="code" href="structpkt__info__t.html#afe0ed5c632ebcc87099c77ff967433d5">hdr</a>.<a class="code" href="structpacket__hdr__t.html#a915f088eeed50b151584165a97598709">pid</a> = pktInfo;</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    pkt.<a class="code" href="structpkt__info__t.html#afe0ed5c632ebcc87099c77ff967433d5">hdr</a>.<a class="code" href="structpacket__hdr__t.html#a2f70c5610514823dd705571fd68df9d7">flags</a> = pktFlags;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <span class="keywordflow">if</span> (bodyHdr)</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    {</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;        pkt.<a class="code" href="structpkt__info__t.html#a4c09f07154b356ff1c99b71e63dd089c">bodyHdr</a> = *bodyHdr;</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    }</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    <span class="keywordflow">if</span> (txData)</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    {</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;        pkt.<a class="code" href="structpkt__info__t.html#a65161add71ddf48083cb3a2f5e10f65f">txData</a> = *txData;</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    }</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="com__manager_8c.html#adefe5ab74a1adf2b17626a35b7b5d8e8">sendDataPacket</a>(cmInstance, pHandle, &amp;pkt);</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;}</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;</div><div class="line"><a name="l00691"></a><span class="lineno"><a class="line" href="com__manager_8h.html#a3b21e0e3ea5a2fb71bac0c3e36c31622">  691</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="com__manager_8c.html#a3b21e0e3ea5a2fb71bac0c3e36c31622">comManagerSendEnsured</a>(<span class="keywordtype">int</span> pHandle, uint8_t pktInfo, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* data, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> dataSize)</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;{</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="com__manager_8c.html#af2d03a088e68708a42a99cae3dac4924">comManagerSendEnsuredInstance</a>(&amp;g_cm, pHandle, pktInfo, data, dataSize);</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;}</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;</div><div class="line"><a name="l00696"></a><span class="lineno"><a class="line" href="com__manager_8h.html#af2d03a088e68708a42a99cae3dac4924">  696</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="com__manager_8c.html#af2d03a088e68708a42a99cae3dac4924">comManagerSendEnsuredInstance</a>(<a class="code" href="com__manager_8h.html#aa4c7b70d216e3ec5adc54f13afc5ffde">CMHANDLE</a> cmInstance, <span class="keywordtype">int</span> pHandle, uint8_t pktInfo, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *data, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> dataSize)</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;{</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    <a class="code" href="structpacket__t.html">packet_t</a> *pkt;</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    <span class="comment">// Change retry &quot;Ensured&quot; packets to so that we encode packets first (including pkt counter)</span></div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    <span class="comment">// and then ensure they are delivered.  Include packet checksum in ACK/NACK to validate delivery.</span></div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <span class="comment">// Then, if all the ensured slots are occupied because of bad comm, either allow</span></div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <span class="comment">// to clear ensured packets or just block until they are delivered.  We must</span></div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    <span class="comment">// ensure NACKs are used to clear blocking ensured packets.</span></div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    <span class="comment">// Create Packet String (start to end byte)</span></div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    <span class="keywordflow">if</span> ((pkt = <a class="code" href="com__manager_8c.html#a1872147ebc2cceda89f51b04edcc82e8">registerPacketRetry</a>((<a class="code" href="structcom__manager__t.html">com_manager_t</a>*)cmInstance, pHandle, pktInfo, data, dataSize)) == 0)</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    {</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;        <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    }</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="com__manager_8c.html#a631d359bd470ffd894fbc248a3e0a5d4">sendPacket</a>((<a class="code" href="structcom__manager__t.html">com_manager_t</a>*)cmInstance, pHandle, pkt, 0);</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;}</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;</div><div class="line"><a name="l00715"></a><span class="lineno"><a class="line" href="com__manager_8c.html#ac3c471d6faca973221ce4e43e34fc817">  715</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="com__manager_8c.html#ac3c471d6faca973221ce4e43e34fc817">findAsciiMessage</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> * a, <span class="keyword">const</span> <span class="keywordtype">void</span> * b)</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;{</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* a1 = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)a;</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <a class="code" href="structascii_message_map__t.html">asciiMessageMap_t</a>* a2 = (<a class="code" href="structascii_message_map__t.html">asciiMessageMap_t</a>*)b;</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    <span class="keywordflow">return</span> memcmp(a1, a2-&gt;<a class="code" href="structascii_message_map__t.html#a321bf44d43b7484a7b206741225a0a1a">messageId</a>, 4);</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;}</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;</div><div class="line"><a name="l00724"></a><span class="lineno"><a class="line" href="com__manager_8c.html#aa9b75e21fa2d1c9fb04166a1b80d2d9e">  724</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="com__manager_8c.html#aa9b75e21fa2d1c9fb04166a1b80d2d9e">validateAsciiChecksum</a>(<a class="code" href="structcom__manager__t.html">com_manager_t</a>* cmInstance, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* buf, <span class="keywordtype">int</span> count)</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;{</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    <span class="keywordtype">int</span> checkSum = 0;</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> c;</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* end = buf + count;</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    <span class="comment">// Suppress compiler warnings</span></div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    (void)cmInstance;</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <span class="comment">// calculate and validate the checksum, skipping the initial $ char</span></div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    <span class="keywordflow">while</span> (buf != end)</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    {</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;        c = *(++buf);</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;        <span class="keywordflow">if</span> (c == <span class="charliteral">&#39;*&#39;</span>)</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;        {</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;            <span class="comment">// there must be at least four more chars - the checksum and \r\n to proceed</span></div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;            <span class="keywordflow">if</span> (buf + 4 &gt;= end)</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;            {</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;                <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;            }</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;            <span class="keywordtype">char</span> tmp[3];</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;            tmp[0] = *(++buf);</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;            tmp[1] = *(++buf);</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;            tmp[2] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;            <span class="keywordtype">int</span> actualCheckSum = strtol(tmp, 0, 16);</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;            <span class="keywordflow">return</span> (checkSum == actualCheckSum);</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;        }</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;        checkSum ^= c;</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    }</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;}</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;</div><div class="line"><a name="l00757"></a><span class="lineno"><a class="line" href="com__manager_8c.html#aaa0cccdf3490b0effcce07fed8460953">  757</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="com__manager_8c.html#aaa0cccdf3490b0effcce07fed8460953">parseAsciiPacket</a>(<a class="code" href="structcom__manager__t.html">com_manager_t</a>* cmInstance, <span class="keywordtype">int</span> pHandle, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* buf, <span class="keywordtype">int</span> count)</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;{</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> c;</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* messageId;</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* messageData = 0;</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* end = buf + count;</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* ptr = buf;</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    <span class="keywordtype">int</span> fieldIndex = 0;</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    <span class="keywordtype">int</span> length;</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    <a class="code" href="structascii_message_map__t.html">asciiMessageMap_t</a>* foundMap = 0;</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ae1c22dddc776abe38f50a78ff1f76893">status</a>[pHandle].<a class="code" href="structcom__manager__status__t.html#a8212909888b506491643d391cd7da2c3">flags</a> |= <a class="code" href="_i_s_comm_8h.html#ab0476659eb782bc338d77d1e1142abc3ad74e332e6cd1df17a285332390c72323">CM_PKT_FLAGS_RX_VALID_DATA</a>; <span class="comment">// communication received</span></div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ae1c22dddc776abe38f50a78ff1f76893">status</a>[pHandle].<a class="code" href="structcom__manager__status__t.html#ac612f97d0b588330e0ce0293170a60f0">readCounter</a> = 0;</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    <span class="comment">// Packet read success</span></div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ae1c22dddc776abe38f50a78ff1f76893">status</a>[pHandle].<a class="code" href="structcom__manager__status__t.html#a9b358bcb95013a3606a763c35a66538d">rxPktCount</a>++;</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    <span class="comment">// message id is right after the $ char</span></div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    messageId = ++ptr;</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    <span class="comment">// in order to parse the fields from the ascii message there must be:</span></div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    <span class="comment">//  Global handler didn&#39;t parse any data AND</span></div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    <span class="comment">//  have at least one ascii message defined AND</span></div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    <span class="comment">//  have a map for this message id</span></div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    <span class="keywordflow">if</span> </div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    (</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;        (cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a160ec6a0aed3e2c8ef5aefab78b4f085">asciiMessageHandler</a> == 0 || cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a160ec6a0aed3e2c8ef5aefab78b4f085">asciiMessageHandler</a>(cmInstance, pHandle, messageId, buf, count) == 0) &amp;&amp;</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;        (cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a7b82b19bdc580ff201c26478dccf4bcf">asciiMessages</a> != 0 &amp;&amp; cmInstance-&gt;<a class="code" href="structcom__manager__t.html#acdd39e362d1688f6af6f80ca5399cb1f">asciiMessagesCount</a> &gt; 0) &amp;&amp;</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;        ((foundMap = bsearch(messageId, cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a7b82b19bdc580ff201c26478dccf4bcf">asciiMessages</a>, cmInstance-&gt;<a class="code" href="structcom__manager__t.html#acdd39e362d1688f6af6f80ca5399cb1f">asciiMessagesCount</a>, <span class="keyword">sizeof</span>(cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a7b82b19bdc580ff201c26478dccf4bcf">asciiMessages</a>[0]), <a class="code" href="com__manager_8c.html#ac3c471d6faca973221ce4e43e34fc817">findAsciiMessage</a>)) != 0)</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    )</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    {</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;        <span class="keywordflow">while</span> (ptr &lt; end)</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;        {</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;            c = *ptr;</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;            <span class="keywordflow">if</span> (c == <span class="charliteral">&#39;,&#39;</span> || c == <span class="charliteral">&#39;*&#39;</span>)</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;            {</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;                <span class="comment">// check if we have the first piece of data yet and have not run out of fields</span></div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;                <span class="keywordflow">if</span> (fieldIndex &lt; foundMap-&gt;fieldCount &amp;&amp; messageData != 0)</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;                {</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;                    <span class="comment">// if we have a non-empty message, parse it out</span></div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;                    <span class="keywordflow">if</span> ((length = (<span class="keywordtype">int</span>)(ptr - messageData)) &gt; 0)</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;                    {</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;                        *ptr = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;                        uint16_t fieldAndOffset = foundMap-&gt;<a class="code" href="structascii_message_map__t.html#aff37daca4dfc68b724b2837748dc4cd9">fieldsAndOffsets</a>[fieldIndex];</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;                        <a class="code" href="_i_s_comm_8h.html#ae8a53e32ddcd42ac1df8e6bdf6a36eef">asciiDataType</a> type = (fieldAndOffset &amp; 0x00FF);</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;                        uint8_t offset = (fieldAndOffset &amp; 0xFF00) &gt;&gt; 8;</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;                        <span class="keywordflow">switch</span> (type)</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;                        {</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;                            <span class="keywordflow">case</span> <a class="code" href="_i_s_comm_8h.html#ae8a53e32ddcd42ac1df8e6bdf6a36eefa32398ad4aa75d3c969114a9963804957">asciiTypeInt</a>:</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;                            {</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;                                <span class="keyword">const</span> <span class="keywordtype">int</span> dataValue = strtol((<span class="keywordtype">char</span>*)messageData, 0, 10);</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;                                memcpy(foundMap-&gt;<a class="code" href="structascii_message_map__t.html#a33d8b7845ee9c8d532fa5e22fadb9b37">ptr</a> + offset, &amp;dataValue, <span class="keyword">sizeof</span>(dataValue));</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;                            } <span class="keywordflow">break</span>;</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;                            <span class="keywordflow">case</span> <a class="code" href="_i_s_comm_8h.html#ae8a53e32ddcd42ac1df8e6bdf6a36eefa12285fb40a75c9bb8ad72ebfe86a89ac">asciiTypeUInt</a>:</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;                            {</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;                                <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> dataValue = strtoul((<span class="keywordtype">char</span>*)messageData, 0, 10);</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;                                memcpy(foundMap-&gt;<a class="code" href="structascii_message_map__t.html#a33d8b7845ee9c8d532fa5e22fadb9b37">ptr</a> + offset, &amp;dataValue, <span class="keyword">sizeof</span>(dataValue));</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;                            } <span class="keywordflow">break</span>;</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;                            <span class="keywordflow">case</span> <a class="code" href="_i_s_comm_8h.html#ae8a53e32ddcd42ac1df8e6bdf6a36eefa291a1df9c29abd881756c46ba4beec5d">asciiTypeFloat</a>:</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;                            {</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;                                <span class="keyword">const</span> <span class="keywordtype">float</span> dataValue = <a class="code" href="com__manager_8c.html#a686bc9b96dac380b2a986cf808056d15">PARSE_FLOAT</a>((<span class="keywordtype">char</span>*)messageData);</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;                                memcpy(foundMap-&gt;<a class="code" href="structascii_message_map__t.html#a33d8b7845ee9c8d532fa5e22fadb9b37">ptr</a> + offset, &amp;dataValue, <span class="keyword">sizeof</span>(dataValue));</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;                            } <span class="keywordflow">break</span>;</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;                            <span class="keywordflow">case</span> <a class="code" href="_i_s_comm_8h.html#ae8a53e32ddcd42ac1df8e6bdf6a36eefaf14bc75c3dcf40d15b4851c4990cb2df">asciiTypeDouble</a>:</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;                            {</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;                                <span class="keyword">const</span> <span class="keywordtype">double</span> dataValue = <a class="code" href="com__manager_8c.html#aae1426c5c3c8c473a70adcbd634eb8fc">PARSE_DOUBLE</a>((<span class="keywordtype">char</span>*)messageData);</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;                                memcpy(foundMap-&gt;<a class="code" href="structascii_message_map__t.html#a33d8b7845ee9c8d532fa5e22fadb9b37">ptr</a> + offset, &amp;dataValue, <span class="keyword">sizeof</span>(dataValue));</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;                            } <span class="keywordflow">break</span>;</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;                        }</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;                        *ptr = c;</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;                    }</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;                    fieldIndex++;</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;                }</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;                <span class="comment">// message data is at next char</span></div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;                messageData = ++ptr;</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;            }</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;            {</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;                ptr++;</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;            }</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;        }</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    }</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;                </div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    <span class="comment">// send post ascii parse message if set</span></div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    <span class="keywordflow">if</span> (cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ad62909fc9a34160f2b2707506b8c12f4">asciiMessageHandlerPost</a> != 0)</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    {</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;        cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ad62909fc9a34160f2b2707506b8c12f4">asciiMessageHandlerPost</a>(cmInstance, pHandle, messageId, buf, count);</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    }</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;}</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;<span class="comment">// Return value: 0 = success, -1 = error.</span></div><div class="line"><a name="l00849"></a><span class="lineno"><a class="line" href="com__manager_8c.html#a0e2d283526ff7000a71192b8f63b7777">  849</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="com__manager_8c.html#a0e2d283526ff7000a71192b8f63b7777">processAsciiRxPacket</a>(<a class="code" href="structcom__manager__t.html">com_manager_t</a>* cmInstance, <span class="keywordtype">int</span> pHandle, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* buf, <span class="keywordtype">int</span> count)</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;{</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    <span class="keywordflow">if</span> (count &lt; 10 || count &gt; 512 || <a class="code" href="com__manager_8c.html#aa9b75e21fa2d1c9fb04166a1b80d2d9e">validateAsciiChecksum</a>(cmInstance, buf, count) == 0)</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    {</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;        <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    }</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a7b82b19bdc580ff201c26478dccf4bcf">asciiMessages</a> != 0 &amp;&amp; cmInstance-&gt;<a class="code" href="structcom__manager__t.html#acdd39e362d1688f6af6f80ca5399cb1f">asciiMessagesCount</a> != 0) || (cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a160ec6a0aed3e2c8ef5aefab78b4f085">asciiMessageHandler</a> != 0))</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    {</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;        <span class="comment">// parse the packet if we have any registered handlers</span></div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;        <a class="code" href="com__manager_8c.html#aaa0cccdf3490b0effcce07fed8460953">parseAsciiPacket</a>(cmInstance, pHandle, buf, count);</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    }</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;}</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;</div><div class="line"><a name="l00868"></a><span class="lineno"><a class="line" href="com__manager_8c.html#acc32b1a0dbfb593f2bf49d52775bff27">  868</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="com__manager_8c.html#acc32b1a0dbfb593f2bf49d52775bff27">processBinaryRxPacket</a>(<a class="code" href="structcom__manager__t.html">com_manager_t</a>* cmInstance, <span class="keywordtype">int</span> pHandle, <a class="code" href="structpacket__t.html">packet_t</a> *pkt, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> additionalDataAvailable)</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;{</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    <a class="code" href="structp__data__t.html">p_data_t</a>            *data;</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    <a class="code" href="structp__data__hdr__t.html">p_data_hdr_t</a>        *dataHdr;</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;<span class="comment">//  uint8_t             *dataBuf;</span></div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    <a class="code" href="structregistered__data__t.html">registered_data_t</a>   *regd;</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    uint8_t     pid = (uint8_t)(pkt-&gt;<a class="code" href="structpacket__t.html#ac12697f39d3daa260b81fc186a32acf8">hdr</a>.<a class="code" href="structpacket__hdr__t.html#a915f088eeed50b151584165a97598709">pid</a>);</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ae1c22dddc776abe38f50a78ff1f76893">status</a>[pHandle].<a class="code" href="structcom__manager__status__t.html#a8212909888b506491643d391cd7da2c3">flags</a> |= <a class="code" href="_i_s_comm_8h.html#ab0476659eb782bc338d77d1e1142abc3ad74e332e6cd1df17a285332390c72323">CM_PKT_FLAGS_RX_VALID_DATA</a>; <span class="comment">// communication received</span></div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ae1c22dddc776abe38f50a78ff1f76893">status</a>[pHandle].<a class="code" href="structcom__manager__status__t.html#ac612f97d0b588330e0ce0293170a60f0">readCounter</a> = 0;</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    <span class="comment">// Packet read success</span></div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ae1c22dddc776abe38f50a78ff1f76893">status</a>[pHandle].<a class="code" href="structcom__manager__status__t.html#a9b358bcb95013a3606a763c35a66538d">rxPktCount</a>++;</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    <span class="keywordflow">switch</span> (pid)</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;    {</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    <span class="keywordflow">default</span>:    <span class="comment">// Data ID Unknown</span></div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;        <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="_i_s_comm_8h.html#ad8310776b70fca7c3b56b2734a68ad9f">PID_SET_DATA</a>:</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="_i_s_comm_8h.html#aeafbbae0d562134d2aa48c43dfa849b8">PID_DATA</a>:</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;        data = (<a class="code" href="structp__data__t.html">p_data_t</a>*)(pkt-&gt;<a class="code" href="structpacket__t.html#a4955d2c7f0cacef9987e6e33a7dfc885">body</a>.<a class="code" href="structbuf_ptr__t.html#ad4295aa9699eea57f6219a92475a327c">ptr</a>);</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;        dataHdr = &amp;(data-&gt;<a class="code" href="structp__data__t.html#ad581435f6761781c248158d69ca502f9">hdr</a>);</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;<span class="comment">//      dataBuf = data-&gt;buf;</span></div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;        <span class="comment">// Validate Data</span></div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;        <span class="keywordflow">if</span> (dataHdr-&gt;<a class="code" href="structp__data__hdr__t.html#a0a70811dba0872fe68a2d58c24cb7894">id</a> &gt;= <a class="code" href="data__sets_8h.html#a777819ed9aeeb6f96e9a74764d75064a">DID_COUNT</a>)</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;        {</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;            <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;        }</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;        regd = &amp;(cmInstance-&gt;<a class="code" href="structcom__manager__t.html#aea2db79a0cfa6806c350f03a1ed11734">regData</a>[dataHdr-&gt;<a class="code" href="structp__data__hdr__t.html#a0a70811dba0872fe68a2d58c24cb7894">id</a>]);</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;        <span class="comment">// Validate and constrain Rx data size to fit within local data struct</span></div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;        <span class="keywordflow">if</span> (regd-&gt;<a class="code" href="structregistered__data__t.html#a89967b25487646d30f3d94c72cbe0430">dataSet</a>.<a class="code" href="structbuf_tx_rx_ptr__t.html#aa35ef37b9fa29843a3f96140484c3dce">size</a> &amp;&amp; (dataHdr-&gt;<a class="code" href="structp__data__hdr__t.html#a5671779d9843a522942f60cbca2dee18">offset</a> + dataHdr-&gt;<a class="code" href="structp__data__hdr__t.html#ae4e77713f907776d843284114634d642">size</a>) &gt; regd-&gt;<a class="code" href="structregistered__data__t.html#a89967b25487646d30f3d94c72cbe0430">dataSet</a>.<a class="code" href="structbuf_tx_rx_ptr__t.html#aa35ef37b9fa29843a3f96140484c3dce">size</a>)</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;        {</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;            <span class="comment">// trim the size down so it fits</span></div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;            <span class="keywordtype">int</span> size = (int)(regd-&gt;<a class="code" href="structregistered__data__t.html#a89967b25487646d30f3d94c72cbe0430">dataSet</a>.<a class="code" href="structbuf_tx_rx_ptr__t.html#aa35ef37b9fa29843a3f96140484c3dce">size</a> - dataHdr-&gt;<a class="code" href="structp__data__hdr__t.html#a5671779d9843a522942f60cbca2dee18">offset</a>);</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;            <span class="keywordflow">if</span> (size &lt; 4)</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;            {</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;                <span class="comment">// we are completely out of bounds, we cannot process this message at all</span></div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;                <span class="comment">// the minimum data struct size is 4 bytes</span></div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;                <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;            }</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;            <span class="comment">// Update Rx data size</span></div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;            dataHdr-&gt;<a class="code" href="structp__data__hdr__t.html#ae4e77713f907776d843284114634d642">size</a> = <a class="code" href="_i_s_constants_8h.html#a89279935d2e2d0bcdc26cdf9e2ba5b1e">_MIN</a>(dataHdr-&gt;<a class="code" href="structp__data__hdr__t.html#ae4e77713f907776d843284114634d642">size</a>, (uint8_t)size);</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;        }</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;<span class="preprocessor">#if ENABLE_PACKET_CONTINUATION</span></div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;        <span class="comment">// Consolidate datasets that were broken-up across multiple packets</span></div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;        <a class="code" href="structp__data__t.html">p_data_t</a>* con = &amp;cmInstance-&gt;con[pHandle];</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;        <span class="keywordflow">if</span> (additionalDataAvailable || (con-&gt;<a class="code" href="structp__data__t.html#ad581435f6761781c248158d69ca502f9">hdr</a>.<a class="code" href="structp__data__hdr__t.html#ae4e77713f907776d843284114634d642">size</a> != 0 &amp;&amp; con-&gt;<a class="code" href="structp__data__t.html#ad581435f6761781c248158d69ca502f9">hdr</a>.<a class="code" href="structp__data__hdr__t.html#a0a70811dba0872fe68a2d58c24cb7894">id</a> == dataHdr-&gt;<a class="code" href="structp__data__hdr__t.html#a0a70811dba0872fe68a2d58c24cb7894">id</a>))</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;        {</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;            <span class="comment">// New dataset</span></div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;            <span class="keywordflow">if</span> (con-&gt;<a class="code" href="structp__data__t.html#ad581435f6761781c248158d69ca502f9">hdr</a>.<a class="code" href="structp__data__hdr__t.html#a0a70811dba0872fe68a2d58c24cb7894">id</a> == 0 || con-&gt;<a class="code" href="structp__data__t.html#ad581435f6761781c248158d69ca502f9">hdr</a>.<a class="code" href="structp__data__hdr__t.html#ae4e77713f907776d843284114634d642">size</a> == 0 || con-&gt;<a class="code" href="structp__data__t.html#ad581435f6761781c248158d69ca502f9">hdr</a>.<a class="code" href="structp__data__hdr__t.html#a0a70811dba0872fe68a2d58c24cb7894">id</a> != dataHdr-&gt;<a class="code" href="structp__data__hdr__t.html#a0a70811dba0872fe68a2d58c24cb7894">id</a> || con-&gt;<a class="code" href="structp__data__t.html#ad581435f6761781c248158d69ca502f9">hdr</a>.<a class="code" href="structp__data__hdr__t.html#ae4e77713f907776d843284114634d642">size</a> &gt; dataHdr-&gt;<a class="code" href="structp__data__hdr__t.html#a5671779d9843a522942f60cbca2dee18">offset</a>)</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;            {</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;                <span class="comment">// Reset data consolidation</span></div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;                con-&gt;<a class="code" href="structp__data__t.html#ad581435f6761781c248158d69ca502f9">hdr</a>.<a class="code" href="structp__data__hdr__t.html#a0a70811dba0872fe68a2d58c24cb7894">id</a> = dataHdr-&gt;<a class="code" href="structp__data__hdr__t.html#a0a70811dba0872fe68a2d58c24cb7894">id</a>;</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;                con-&gt;<a class="code" href="structp__data__t.html#ad581435f6761781c248158d69ca502f9">hdr</a>.<a class="code" href="structp__data__hdr__t.html#a5671779d9843a522942f60cbca2dee18">offset</a> = dataHdr-&gt;<a class="code" href="structp__data__hdr__t.html#a5671779d9843a522942f60cbca2dee18">offset</a>;</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;                con-&gt;<a class="code" href="structp__data__t.html#ad581435f6761781c248158d69ca502f9">hdr</a>.<a class="code" href="structp__data__hdr__t.html#ae4e77713f907776d843284114634d642">size</a> = 0;</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;            }</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;            <span class="comment">// Ensure data will fit in buffer</span></div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;            <span class="keywordflow">if</span> ((con-&gt;<a class="code" href="structp__data__t.html#ad581435f6761781c248158d69ca502f9">hdr</a>.<a class="code" href="structp__data__hdr__t.html#ae4e77713f907776d843284114634d642">size</a> + dataHdr-&gt;<a class="code" href="structp__data__hdr__t.html#ae4e77713f907776d843284114634d642">size</a>) &lt; <span class="keyword">sizeof</span>(con-&gt;<a class="code" href="structp__data__t.html#a006c80696cc8ad6e3699d853da9c9c07">buf</a>))</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;            {</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;                <span class="comment">// Add data to buffer</span></div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;                memcpy(con-&gt;<a class="code" href="structp__data__t.html#a006c80696cc8ad6e3699d853da9c9c07">buf</a> + con-&gt;<a class="code" href="structp__data__t.html#ad581435f6761781c248158d69ca502f9">hdr</a>.<a class="code" href="structp__data__hdr__t.html#ae4e77713f907776d843284114634d642">size</a>, data-&gt;<a class="code" href="structp__data__t.html#a006c80696cc8ad6e3699d853da9c9c07">buf</a>, dataHdr-&gt;<a class="code" href="structp__data__hdr__t.html#ae4e77713f907776d843284114634d642">size</a>);</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;                con-&gt;<a class="code" href="structp__data__t.html#ad581435f6761781c248158d69ca502f9">hdr</a>.<a class="code" href="structp__data__hdr__t.html#ae4e77713f907776d843284114634d642">size</a> += dataHdr-&gt;<a class="code" href="structp__data__hdr__t.html#ae4e77713f907776d843284114634d642">size</a>;</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;            }</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;            {</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;                <span class="comment">// buffer overflow</span></div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;            }</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;            <span class="comment">// Wait for end of data</span></div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;            <span class="keywordflow">if</span> (additionalDataAvailable)</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;            {</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;                <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;            }</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;            <span class="comment">// Use consolidated data</span></div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;            data = con;</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;        }</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;        </div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;        </div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;        (void)additionalDataAvailable;</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;        <span class="comment">// Write to data structure if it was registered</span></div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;        <span class="keywordflow">if</span> (regd-&gt;<a class="code" href="structregistered__data__t.html#a89967b25487646d30f3d94c72cbe0430">dataSet</a>.<a class="code" href="structbuf_tx_rx_ptr__t.html#a3c8e53783acdd89e12c360315fbaac0e">rxPtr</a>)</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;        {</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;            <a class="code" href="_i_s_comm_8c.html#a404354ab6f34767f2e7b90f2a3590051">copyDataPToStructP</a>(regd-&gt;<a class="code" href="structregistered__data__t.html#a89967b25487646d30f3d94c72cbe0430">dataSet</a>.<a class="code" href="structbuf_tx_rx_ptr__t.html#a3c8e53783acdd89e12c360315fbaac0e">rxPtr</a>, data, regd-&gt;<a class="code" href="structregistered__data__t.html#a89967b25487646d30f3d94c72cbe0430">dataSet</a>.<a class="code" href="structbuf_tx_rx_ptr__t.html#aa35ef37b9fa29843a3f96140484c3dce">size</a>);</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;        }</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;        <span class="comment">// Call data specific callback after data has been written to</span></div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;        <span class="keywordflow">if</span> (regd-&gt;<a class="code" href="structregistered__data__t.html#a004d79bbd9213f90e3409565f1ef48cc">pstRxFnc</a>)</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;        {</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;            regd-&gt;<a class="code" href="structregistered__data__t.html#a004d79bbd9213f90e3409565f1ef48cc">pstRxFnc</a>(cmInstance, pHandle, data);</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;        }</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;        <span class="comment">// Call general/global callback</span></div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;        <span class="keywordflow">if</span> (cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a03cb7e17301933e8c57c17ca36d51c34">pstRxFnc</a>)</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;        {</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;            cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a03cb7e17301933e8c57c17ca36d51c34">pstRxFnc</a>(cmInstance, pHandle, data);</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;        }</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;        <span class="comment">// Remove retry from linked list if necessary</span></div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;        <a class="code" href="com__manager_8c.html#a8752fd18e0f3378d4feab9f8398fa172">updatePacketRetryData</a>(cmInstance, pkt);</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;<span class="preprocessor">#if ENABLE_PACKET_CONTINUATION</span></div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;        <span class="comment">// Clear dataset consolidation</span></div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;        con-&gt;<a class="code" href="structp__data__t.html#ad581435f6761781c248158d69ca502f9">hdr</a>.<a class="code" href="structp__data__hdr__t.html#a0a70811dba0872fe68a2d58c24cb7894">id</a> = con-&gt;<a class="code" href="structp__data__t.html#ad581435f6761781c248158d69ca502f9">hdr</a>.<a class="code" href="structp__data__hdr__t.html#ae4e77713f907776d843284114634d642">size</a> = con-&gt;<a class="code" href="structp__data__t.html#ad581435f6761781c248158d69ca502f9">hdr</a>.<a class="code" href="structp__data__hdr__t.html#a5671779d9843a522942f60cbca2dee18">offset</a> = 0;</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;        <span class="comment">// Replay w/ ACK for PID_SET_DATA</span></div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;        <span class="keywordflow">if</span> (pid == <a class="code" href="_i_s_comm_8h.html#ad8310776b70fca7c3b56b2734a68ad9f">PID_SET_DATA</a>)</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;        {</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;            <a class="code" href="com__manager_8c.html#a0f161b11e9a91492c7515c9d59ce8016">sendAck</a>(cmInstance, pHandle, pkt, <a class="code" href="_i_s_comm_8h.html#aa6a3b4bc4d7eefb123d1e6e954b7978b">PID_ACK</a>);</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;        }</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="_i_s_comm_8h.html#a27634099d972a0c65e8a3de17ea9d094">PID_GET_DATA</a>:</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="com__manager_8c.html#a175d42f276eb55ab164e3bc2c2025f66">comManagerGetDataRequestInstance</a>(cmInstance, pHandle, (<a class="code" href="structp__data__get__t.html">p_data_get_t</a> *)(pkt-&gt;<a class="code" href="structpacket__t.html#a4955d2c7f0cacef9987e6e33a7dfc885">body</a>.<a class="code" href="structbuf_ptr__t.html#ad4295aa9699eea57f6219a92475a327c">ptr</a>)))</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;        {</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;            <a class="code" href="com__manager_8c.html#a0f161b11e9a91492c7515c9d59ce8016">sendAck</a>(cmInstance, pHandle, pkt, <a class="code" href="_i_s_comm_8h.html#ab1df21b0e8f59b5c8c30a48166a01482">PID_NACK</a>);</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;        }</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="_i_s_comm_8h.html#ac6e603670e69c96b8f8d3ad9ef9d7920">PID_STOP_BROADCASTS_ALL_PORTS</a>:</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;        <a class="code" href="com__manager_8c.html#a03fb5352fdf7d5a5bba7e9b36e74bb03">comManagerDisableBroadcastsInstance</a>(cmInstance, -1);</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;        <span class="comment">// Call disable broadcasts callback if exists</span></div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;        <span class="keywordflow">if</span> (cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a8ec022c21b008d2c9c3c706470e47e26">disableBcastFnc</a>)</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;        {</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;            cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a8ec022c21b008d2c9c3c706470e47e26">disableBcastFnc</a>(cmInstance, -1);</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;        }</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;        <a class="code" href="com__manager_8c.html#a0f161b11e9a91492c7515c9d59ce8016">sendAck</a>(cmInstance, pHandle, pkt, <a class="code" href="_i_s_comm_8h.html#aa6a3b4bc4d7eefb123d1e6e954b7978b">PID_ACK</a>);</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="_i_s_comm_8h.html#a20242d8c94321ec78956a2eee64f94f3">PID_STOP_BROADCASTS_CURRENT_PORT</a>:</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;        <a class="code" href="com__manager_8c.html#a03fb5352fdf7d5a5bba7e9b36e74bb03">comManagerDisableBroadcastsInstance</a>(cmInstance, pHandle);</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;        <span class="comment">// Call disable broadcasts callback if exists</span></div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;        <span class="keywordflow">if</span> (cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a8ec022c21b008d2c9c3c706470e47e26">disableBcastFnc</a>)</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;        {</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;            cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a8ec022c21b008d2c9c3c706470e47e26">disableBcastFnc</a>(cmInstance, pHandle);</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;        }</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;        <a class="code" href="com__manager_8c.html#a0f161b11e9a91492c7515c9d59ce8016">sendAck</a>(cmInstance, pHandle, pkt, <a class="code" href="_i_s_comm_8h.html#aa6a3b4bc4d7eefb123d1e6e954b7978b">PID_ACK</a>);</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="_i_s_comm_8h.html#a37da6e9c18d89f76c39fa9a27394275a">PID_STOP_DID_BROADCAST</a>:</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;        <a class="code" href="com__manager_8c.html#ae1ab50b97d65b1cc6e1bd806ff0187dc">disableDidBroadcast</a>(cmInstance, pHandle, (<a class="code" href="structp__data__disable__t.html">p_data_disable_t</a> *)(pkt-&gt;<a class="code" href="structpacket__t.html#a4955d2c7f0cacef9987e6e33a7dfc885">body</a>.<a class="code" href="structbuf_ptr__t.html#ad4295aa9699eea57f6219a92475a327c">ptr</a>));</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="_i_s_comm_8h.html#ab1df21b0e8f59b5c8c30a48166a01482">PID_NACK</a>:</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="_i_s_comm_8h.html#aa6a3b4bc4d7eefb123d1e6e954b7978b">PID_ACK</a>:</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;        <span class="comment">// Remove retry from linked list if necessary</span></div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;        <a class="code" href="com__manager_8c.html#a993761774598a78d7bcb807aa493ed4a">updatePacketRetryAck</a>(cmInstance, pkt);</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;        <span class="comment">// Call general ack callback</span></div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;        <span class="keywordflow">if</span> (cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a17e30577ccee8dfd9f641af9d5e49940">pstAckFnc</a>)</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;        {</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;            cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a17e30577ccee8dfd9f641af9d5e49940">pstAckFnc</a>(cmInstance, pHandle, (<a class="code" href="structp__ack__t.html">p_ack_t</a>*)(pkt-&gt;<a class="code" href="structpacket__t.html#a4955d2c7f0cacef9987e6e33a7dfc885">body</a>.<a class="code" href="structbuf_ptr__t.html#ad4295aa9699eea57f6219a92475a327c">ptr</a>), pid);</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;        }</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;    }</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;}</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;</div><div class="line"><a name="l01044"></a><span class="lineno"><a class="line" href="com__manager_8h.html#a75d553e17d45e09a81b90f5bbbeb1166"> 1044</a></span>&#160;<a class="code" href="structbuf_tx_rx_ptr__t.html">bufTxRxPtr_t</a>* <a class="code" href="com__manager_8c.html#a75d553e17d45e09a81b90f5bbbeb1166">comManagerGetRegisteredDataInfo</a>(uint32_t dataId)</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;{</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="com__manager_8c.html#a4cfcb8456dff98bf91e00415845fafc3">comManagerGetRegisteredDataInfoInstance</a>(&amp;g_cm, dataId);</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;}</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;</div><div class="line"><a name="l01049"></a><span class="lineno"><a class="line" href="com__manager_8h.html#a6783b10d3b874631bae00c51c7f835ed"> 1049</a></span>&#160;<a class="code" href="structbuf_tx_rx_ptr__t.html">bufTxRxPtr_t</a>* <a class="code" href="com__manager_8c.html#a4cfcb8456dff98bf91e00415845fafc3">comManagerGetRegisteredDataInfoInstance</a>(<a class="code" href="com__manager_8h.html#aa4c7b70d216e3ec5adc54f13afc5ffde">CMHANDLE</a> _cmInstance, uint32_t dataId)</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;{</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    <span class="keywordflow">if</span> (dataId &gt;= <a class="code" href="data__sets_8h.html#a777819ed9aeeb6f96e9a74764d75064a">DID_COUNT</a>)</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;    {</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    }</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    <a class="code" href="structcom__manager__t.html">com_manager_t</a>* cmInstance = (<a class="code" href="structcom__manager__t.html">com_manager_t</a>*)_cmInstance;</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    <span class="keywordflow">return</span> &amp;cmInstance-&gt;<a class="code" href="structcom__manager__t.html#aea2db79a0cfa6806c350f03a1ed11734">regData</a>[dataId].<a class="code" href="structregistered__data__t.html#a89967b25487646d30f3d94c72cbe0430">dataSet</a>;</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;}</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;<span class="comment">// 0 on success. -1 on failure.</span></div><div class="line"><a name="l01061"></a><span class="lineno"><a class="line" href="com__manager_8h.html#a69751e08cb2002d64b380e2ae90d160e"> 1061</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="com__manager_8c.html#a69751e08cb2002d64b380e2ae90d160e">comManagerGetDataRequest</a>(<span class="keywordtype">int</span> pHandle, <a class="code" href="structp__data__get__t.html">p_data_get_t</a>* req)</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;{</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="com__manager_8c.html#a175d42f276eb55ab164e3bc2c2025f66">comManagerGetDataRequestInstance</a>(&amp;g_cm, pHandle, req);</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;}</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;</div><div class="line"><a name="l01066"></a><span class="lineno"><a class="line" href="com__manager_8h.html#af0f34f05ead3087428251de6db6bd48d"> 1066</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="com__manager_8c.html#a175d42f276eb55ab164e3bc2c2025f66">comManagerGetDataRequestInstance</a>(<a class="code" href="com__manager_8h.html#aa4c7b70d216e3ec5adc54f13afc5ffde">CMHANDLE</a> _cmInstance, <span class="keywordtype">int</span> pHandle, <a class="code" href="structp__data__get__t.html">p_data_get_t</a>* req)</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;{</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    <a class="code" href="structcom__manager__t.html">com_manager_t</a>* cmInstance = (<a class="code" href="structcom__manager__t.html">com_manager_t</a>*)_cmInstance;</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;    <a class="code" href="structbroadcast__msg__t.html">broadcast_msg_t</a>* msg = 0;</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;    <span class="comment">// Validate the request</span></div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    <span class="keywordflow">if</span> (req-&gt;<a class="code" href="structp__data__get__t.html#ab12d63b4fd0d9d6f5a27e8b0856af7a8">id</a> &gt;= <a class="code" href="data__sets_8h.html#a777819ed9aeeb6f96e9a74764d75064a">DID_COUNT</a>)</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;    {</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;        <span class="comment">// invalid data id</span></div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;        <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;    }</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    <span class="comment">// Call RealtimeMessageController (RMC) handler</span></div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cmInstance-&gt;<a class="code" href="structcom__manager__t.html#aca2b8672eb68926dc59f47d615492c2d">rmcHandler</a> &amp;&amp; (cmInstance-&gt;<a class="code" href="structcom__manager__t.html#aca2b8672eb68926dc59f47d615492c2d">rmcHandler</a>(cmInstance, pHandle, req) == 0))</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    {</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;        <span class="comment">// Don&#39;t allow comManager broadcasts for messages handled by RealtimeMessageController. </span></div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    }</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    <span class="comment">// if size is 0 and offset is 0, set size to full data struct size</span></div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (req-&gt;<a class="code" href="structp__data__get__t.html#a11afc3ecb51275d65121ed378d24267a">size</a> == 0 &amp;&amp; req-&gt;<a class="code" href="structp__data__get__t.html#a0123a3db2bf728e0d199bcb606123ec8">offset</a> == 0 &amp;&amp; req-&gt;<a class="code" href="structp__data__get__t.html#ab12d63b4fd0d9d6f5a27e8b0856af7a8">id</a> &lt; <a class="code" href="_i_s_constants_8h.html#ae165d3d36e78851434995cd9e9fc8d78">_ARRAY_ELEMENT_COUNT</a>(cmInstance-&gt;<a class="code" href="structcom__manager__t.html#aea2db79a0cfa6806c350f03a1ed11734">regData</a>))</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;    {</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;        req-&gt;<a class="code" href="structp__data__get__t.html#a11afc3ecb51275d65121ed378d24267a">size</a> = cmInstance-&gt;<a class="code" href="structcom__manager__t.html#aea2db79a0cfa6806c350f03a1ed11734">regData</a>[req-&gt;<a class="code" href="structp__data__get__t.html#ab12d63b4fd0d9d6f5a27e8b0856af7a8">id</a>].<a class="code" href="structregistered__data__t.html#a89967b25487646d30f3d94c72cbe0430">dataSet</a>.<a class="code" href="structbuf_tx_rx_ptr__t.html#aa35ef37b9fa29843a3f96140484c3dce">size</a>;</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;    }</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;    </div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;    <span class="comment">// Copy reference to source data</span></div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    <a class="code" href="structbuf_tx_rx_ptr__t.html">bufTxRxPtr_t</a>* dataSetPtr = &amp;cmInstance-&gt;<a class="code" href="structcom__manager__t.html#aea2db79a0cfa6806c350f03a1ed11734">regData</a>[req-&gt;<a class="code" href="structp__data__get__t.html#ab12d63b4fd0d9d6f5a27e8b0856af7a8">id</a>].<a class="code" href="structregistered__data__t.html#a89967b25487646d30f3d94c72cbe0430">dataSet</a>;</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;    <span class="comment">// Abort if no data pointer is registered or offset + size is out of bounds</span></div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    <span class="keywordflow">if</span> (dataSetPtr-&gt;<a class="code" href="structbuf_tx_rx_ptr__t.html#adb7fdcf7f9e8c13377db7643b67199b2">txPtr</a> == 0 || dataSetPtr-&gt;<a class="code" href="structbuf_tx_rx_ptr__t.html#aa35ef37b9fa29843a3f96140484c3dce">size</a> == 0)</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;    {</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;        <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;    }</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (req-&gt;<a class="code" href="structp__data__get__t.html#a0123a3db2bf728e0d199bcb606123ec8">offset</a> + req-&gt;<a class="code" href="structp__data__get__t.html#a11afc3ecb51275d65121ed378d24267a">size</a> &gt; dataSetPtr-&gt;<a class="code" href="structbuf_tx_rx_ptr__t.html#aa35ef37b9fa29843a3f96140484c3dce">size</a>)</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;    {</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;        req-&gt;<a class="code" href="structp__data__get__t.html#a0123a3db2bf728e0d199bcb606123ec8">offset</a> = 0;</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;        req-&gt;<a class="code" href="structp__data__get__t.html#a11afc3ecb51275d65121ed378d24267a">size</a> = dataSetPtr-&gt;<a class="code" href="structbuf_tx_rx_ptr__t.html#aa35ef37b9fa29843a3f96140484c3dce">size</a>;</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;    }</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    <span class="comment">// Search for matching message (i.e. matches pHandle, id, size, and offset)...</span></div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="structbroadcast__msg__t.html">broadcast_msg_t</a>* bcPtr = cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a01a38214bdf57c48d70a7b6c7dbdf32c">broadcastMessages</a>, *ptrEnd = (cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a01a38214bdf57c48d70a7b6c7dbdf32c">broadcastMessages</a> + <a class="code" href="com__manager_8h.html#a08d1326bfd508f5c35f3a8853488ad04">MAX_NUM_BCAST_MSGS</a>); bcPtr &lt; ptrEnd; bcPtr++)</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;    {</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;        <span class="keywordflow">if</span> (bcPtr-&gt;pHandle == pHandle &amp;&amp; bcPtr-&gt;dataHdr.id == req-&gt;<a class="code" href="structp__data__get__t.html#ab12d63b4fd0d9d6f5a27e8b0856af7a8">id</a> &amp;&amp; bcPtr-&gt;dataHdr.size == req-&gt;<a class="code" href="structp__data__get__t.html#a11afc3ecb51275d65121ed378d24267a">size</a> &amp;&amp; bcPtr-&gt;dataHdr.offset == req-&gt;<a class="code" href="structp__data__get__t.html#a0123a3db2bf728e0d199bcb606123ec8">offset</a>)</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;        {</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;            msg = bcPtr;</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;        }</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;    }</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    <span class="comment">// otherwise use the first available (period=0) message.</span></div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    <span class="keywordflow">if</span> (msg == 0)</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;    {</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="structbroadcast__msg__t.html">broadcast_msg_t</a>* bcPtr = cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a01a38214bdf57c48d70a7b6c7dbdf32c">broadcastMessages</a>, *ptrEnd = (cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a01a38214bdf57c48d70a7b6c7dbdf32c">broadcastMessages</a> + <a class="code" href="com__manager_8h.html#a08d1326bfd508f5c35f3a8853488ad04">MAX_NUM_BCAST_MSGS</a>); bcPtr &lt; ptrEnd; bcPtr++)</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;        {</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;            <span class="keywordflow">if</span> (bcPtr-&gt;period &lt;= <a class="code" href="com__manager_8c.html#a530fd5a94ed593dd66ec7cdeee00b411">MSG_PERIOD_DISABLED</a>)</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;            {</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;                msg = bcPtr;</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;            }</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;        }</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;        <span class="keywordflow">if</span> (msg == 0)</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;        {</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;            <span class="comment">// use last slot, force overwrite</span></div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;            msg = cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a01a38214bdf57c48d70a7b6c7dbdf32c">broadcastMessages</a> + <a class="code" href="com__manager_8h.html#a08d1326bfd508f5c35f3a8853488ad04">MAX_NUM_BCAST_MSGS</a> - 1;</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;        }</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;    }</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;    <span class="comment">// Port handle</span></div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;    msg-&gt;<a class="code" href="structbroadcast__msg__t.html#a01d6b19c01ac83232c132f8beaeb3368">pHandle</a> = pHandle;</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;    <span class="comment">// Packet parameters</span></div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    msg-&gt;<a class="code" href="structbroadcast__msg__t.html#aa9773244e47b9bc526725b359947d842">pkt</a>.<a class="code" href="structpkt__info__t.html#afe0ed5c632ebcc87099c77ff967433d5">hdr</a>.<a class="code" href="structpacket__hdr__t.html#aae0969a547bd5ea711e2fe7e2d9a5f4e">startByte</a> = <a class="code" href="_i_s_comm_8h.html#a739834da5d5205125ac7115741c30c63ab65949193083fea6f789b9b447df716f">PSC_START_BYTE</a>;</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    msg-&gt;<a class="code" href="structbroadcast__msg__t.html#aa9773244e47b9bc526725b359947d842">pkt</a>.<a class="code" href="structpkt__info__t.html#afe0ed5c632ebcc87099c77ff967433d5">hdr</a>.<a class="code" href="structpacket__hdr__t.html#a915f088eeed50b151584165a97598709">pid</a> = <a class="code" href="_i_s_comm_8h.html#aeafbbae0d562134d2aa48c43dfa849b8">PID_DATA</a>;</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;    <span class="comment">// Data Header</span></div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;    msg-&gt;<a class="code" href="structbroadcast__msg__t.html#aa892836a942a0dc14a32e498880013dd">dataHdr</a>.<a class="code" href="structp__data__hdr__t.html#a0a70811dba0872fe68a2d58c24cb7894">id</a> = req-&gt;<a class="code" href="structp__data__get__t.html#ab12d63b4fd0d9d6f5a27e8b0856af7a8">id</a>;</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;    msg-&gt;<a class="code" href="structbroadcast__msg__t.html#aa892836a942a0dc14a32e498880013dd">dataHdr</a>.<a class="code" href="structp__data__hdr__t.html#ae4e77713f907776d843284114634d642">size</a> = req-&gt;<a class="code" href="structp__data__get__t.html#a11afc3ecb51275d65121ed378d24267a">size</a>;</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;    msg-&gt;<a class="code" href="structbroadcast__msg__t.html#aa892836a942a0dc14a32e498880013dd">dataHdr</a>.<a class="code" href="structp__data__hdr__t.html#a5671779d9843a522942f60cbca2dee18">offset</a> = req-&gt;<a class="code" href="structp__data__get__t.html#a0123a3db2bf728e0d199bcb606123ec8">offset</a>;</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;    msg-&gt;<a class="code" href="structbroadcast__msg__t.html#aa9773244e47b9bc526725b359947d842">pkt</a>.<a class="code" href="structpkt__info__t.html#afe0ed5c632ebcc87099c77ff967433d5">hdr</a>.<a class="code" href="structpacket__hdr__t.html#a2f70c5610514823dd705571fd68df9d7">flags</a> = cmInstance-&gt;<a class="code" href="structcom__manager__t.html#aea2db79a0cfa6806c350f03a1ed11734">regData</a>[msg-&gt;<a class="code" href="structbroadcast__msg__t.html#aa892836a942a0dc14a32e498880013dd">dataHdr</a>.<a class="code" href="structp__data__hdr__t.html#a0a70811dba0872fe68a2d58c24cb7894">id</a>].<a class="code" href="structregistered__data__t.html#ad7c741990c4b4bf9af22356127dc2f08">pktFlags</a>;</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;    msg-&gt;<a class="code" href="structbroadcast__msg__t.html#aa9773244e47b9bc526725b359947d842">pkt</a>.<a class="code" href="structpkt__info__t.html#a4c09f07154b356ff1c99b71e63dd089c">bodyHdr</a>.<a class="code" href="structbuf_ptr__t.html#ad4295aa9699eea57f6219a92475a327c">ptr</a> = (uint8_t *)&amp;msg-&gt;<a class="code" href="structbroadcast__msg__t.html#aa892836a942a0dc14a32e498880013dd">dataHdr</a>;</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    msg-&gt;<a class="code" href="structbroadcast__msg__t.html#aa9773244e47b9bc526725b359947d842">pkt</a>.<a class="code" href="structpkt__info__t.html#a4c09f07154b356ff1c99b71e63dd089c">bodyHdr</a>.<a class="code" href="structbuf_ptr__t.html#a89121516bb8e4f198c13eaf8e1d23457">size</a> = <span class="keyword">sizeof</span>(msg-&gt;<a class="code" href="structbroadcast__msg__t.html#aa892836a942a0dc14a32e498880013dd">dataHdr</a>);</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;    msg-&gt;<a class="code" href="structbroadcast__msg__t.html#aa9773244e47b9bc526725b359947d842">pkt</a>.<a class="code" href="structpkt__info__t.html#a65161add71ddf48083cb3a2f5e10f65f">txData</a>.<a class="code" href="structbuf_ptr__t.html#a89121516bb8e4f198c13eaf8e1d23457">size</a> = req-&gt;<a class="code" href="structp__data__get__t.html#a11afc3ecb51275d65121ed378d24267a">size</a>;</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;    msg-&gt;<a class="code" href="structbroadcast__msg__t.html#aa9773244e47b9bc526725b359947d842">pkt</a>.<a class="code" href="structpkt__info__t.html#a65161add71ddf48083cb3a2f5e10f65f">txData</a>.<a class="code" href="structbuf_ptr__t.html#ad4295aa9699eea57f6219a92475a327c">ptr</a> = cmInstance-&gt;<a class="code" href="structcom__manager__t.html#aea2db79a0cfa6806c350f03a1ed11734">regData</a>[req-&gt;<a class="code" href="structp__data__get__t.html#ab12d63b4fd0d9d6f5a27e8b0856af7a8">id</a>].<a class="code" href="structregistered__data__t.html#a89967b25487646d30f3d94c72cbe0430">dataSet</a>.<a class="code" href="structbuf_tx_rx_ptr__t.html#adb7fdcf7f9e8c13377db7643b67199b2">txPtr</a> + req-&gt;<a class="code" href="structp__data__get__t.html#a0123a3db2bf728e0d199bcb606123ec8">offset</a>;</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;    <span class="comment">// Prep data if callback exists</span></div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;    <span class="keywordflow">if</span> (cmInstance-&gt;<a class="code" href="structcom__manager__t.html#aea2db79a0cfa6806c350f03a1ed11734">regData</a>[msg-&gt;<a class="code" href="structbroadcast__msg__t.html#aa892836a942a0dc14a32e498880013dd">dataHdr</a>.<a class="code" href="structp__data__hdr__t.html#a0a70811dba0872fe68a2d58c24cb7894">id</a>].<a class="code" href="structregistered__data__t.html#afd7c6955e72c835d5042524079925376">preTxFnc</a>)</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;    {</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;        cmInstance-&gt;<a class="code" href="structcom__manager__t.html#aea2db79a0cfa6806c350f03a1ed11734">regData</a>[msg-&gt;<a class="code" href="structbroadcast__msg__t.html#aa892836a942a0dc14a32e498880013dd">dataHdr</a>.<a class="code" href="structp__data__hdr__t.html#a0a70811dba0872fe68a2d58c24cb7894">id</a>].<a class="code" href="structregistered__data__t.html#afd7c6955e72c835d5042524079925376">preTxFnc</a>(cmInstance, pHandle);</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;    }</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;    </div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;    <span class="comment">// Constrain request broadcast period if necessary</span></div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;    <span class="keywordflow">if</span> (req-&gt;<a class="code" href="structp__data__get__t.html#ac96de892e311a7a68676a99d8e9c6f98">bc_period_multiple</a> != 0)</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;    {</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;        <a class="code" href="_i_s_constants_8h.html#a9bd7d3f2ca104eaaecbd97846039bbdc">_LIMIT2</a>(req-&gt;<a class="code" href="structp__data__get__t.html#ac96de892e311a7a68676a99d8e9c6f98">bc_period_multiple</a>, <a class="code" href="com__manager_8c.html#ae68296caef3ece6bdd0faeae69b6e4e1">MIN_REQUEST_PERIOD_MS</a>, <a class="code" href="com__manager_8c.html#a295549e9a60f31107cf055cdc3c13b28">MAX_REQUEST_PERIOD_MS</a>);</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;    }</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;    <span class="comment">// Send data</span></div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;    <span class="keywordflow">if</span> (req-&gt;<a class="code" href="structp__data__get__t.html#ac96de892e311a7a68676a99d8e9c6f98">bc_period_multiple</a> &gt; 0)</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;    {</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;        <span class="comment">// ***  Request Broadcast  ***</span></div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;        <span class="comment">// Send data immediately if possible</span></div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;        <span class="keywordflow">if</span> (cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ac70b1bd3d8e2c27fe81aab2b9221d294">txFreeCallback</a> == 0 || msg-&gt;<a class="code" href="structbroadcast__msg__t.html#aa9773244e47b9bc526725b359947d842">pkt</a>.<a class="code" href="structpkt__info__t.html#a65161add71ddf48083cb3a2f5e10f65f">txData</a>.<a class="code" href="structbuf_ptr__t.html#a89121516bb8e4f198c13eaf8e1d23457">size</a> &lt;= (uint32_t)cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ac70b1bd3d8e2c27fe81aab2b9221d294">txFreeCallback</a>(cmInstance, pHandle))</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;        {</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;            <a class="code" href="com__manager_8c.html#adefe5ab74a1adf2b17626a35b7b5d8e8">sendDataPacket</a>(cmInstance, pHandle, &amp;(msg-&gt;<a class="code" href="structbroadcast__msg__t.html#aa9773244e47b9bc526725b359947d842">pkt</a>));</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;        }</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;        <span class="comment">// Enable broadcast message</span></div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;        <a class="code" href="com__manager_8c.html#a0a04aba97ca175f8e08018d2965ac0af">enableBroadcastMsg</a>(cmInstance, msg, req-&gt;<a class="code" href="structp__data__get__t.html#ac96de892e311a7a68676a99d8e9c6f98">bc_period_multiple</a>);</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;    }</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;    {</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;        <span class="comment">// ***  Request Single  ***</span></div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;        <span class="comment">// Send data immediately if possible</span></div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;        <span class="keywordflow">if</span> (cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ac70b1bd3d8e2c27fe81aab2b9221d294">txFreeCallback</a> == 0 || msg-&gt;<a class="code" href="structbroadcast__msg__t.html#aa9773244e47b9bc526725b359947d842">pkt</a>.<a class="code" href="structpkt__info__t.html#a65161add71ddf48083cb3a2f5e10f65f">txData</a>.<a class="code" href="structbuf_ptr__t.html#a89121516bb8e4f198c13eaf8e1d23457">size</a> &lt;= (uint32_t)cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ac70b1bd3d8e2c27fe81aab2b9221d294">txFreeCallback</a>(cmInstance, pHandle))</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;        {</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;            <a class="code" href="com__manager_8c.html#adefe5ab74a1adf2b17626a35b7b5d8e8">sendDataPacket</a>(cmInstance, pHandle, &amp;(msg-&gt;<a class="code" href="structbroadcast__msg__t.html#aa9773244e47b9bc526725b359947d842">pkt</a>));</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;            <a class="code" href="com__manager_8c.html#a305a8082a720fd5b3bc521012df55202">disableBroadcastMsg</a>(cmInstance, msg);</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;        }</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;        {</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;            <span class="comment">// Won&#39;t fit in queue, so send it later</span></div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;            <a class="code" href="com__manager_8c.html#a0a04aba97ca175f8e08018d2965ac0af">enableBroadcastMsg</a>(cmInstance, msg, req-&gt;<a class="code" href="structp__data__get__t.html#ac96de892e311a7a68676a99d8e9c6f98">bc_period_multiple</a>);</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;        }</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;    }</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;}</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;</div><div class="line"><a name="l01193"></a><span class="lineno"><a class="line" href="com__manager_8c.html#a0a04aba97ca175f8e08018d2965ac0af"> 1193</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="com__manager_8c.html#a0a04aba97ca175f8e08018d2965ac0af">enableBroadcastMsg</a>(<a class="code" href="structcom__manager__t.html">com_manager_t</a>* cmInstance, <a class="code" href="structbroadcast__msg__t.html">broadcast_msg_t</a>* msg, <span class="keywordtype">int</span> periodMultiple)</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;{</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;    <span class="comment">// Update broadcast period</span></div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;    <span class="keywordflow">if</span> (periodMultiple &gt; 0)</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;    {</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;        msg-&gt;<a class="code" href="structbroadcast__msg__t.html#a3db0429a66a52239f3df4e4741d35409">period</a> = periodMultiple / cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ad698cf1f00ae25965d355ec7f6e86c94">stepPeriodMilliseconds</a>;</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;    }</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;    {</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;        msg-&gt;<a class="code" href="structbroadcast__msg__t.html#a3db0429a66a52239f3df4e4741d35409">period</a> = <a class="code" href="com__manager_8c.html#a055a98068f64092742e6e50a5167c4a4">MSG_PERIOD_SEND_ONCE</a>;</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;    }</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;    msg-&gt;<a class="code" href="structbroadcast__msg__t.html#a3e537b906a9b04fc9c667a65d5cbd9d5">counter</a> = -1;   <span class="comment">// Keeps broadcast from sending for at least one period</span></div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;}</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;</div><div class="line"><a name="l01207"></a><span class="lineno"><a class="line" href="com__manager_8c.html#a305a8082a720fd5b3bc521012df55202"> 1207</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="com__manager_8c.html#a305a8082a720fd5b3bc521012df55202">disableBroadcastMsg</a>(<a class="code" href="structcom__manager__t.html">com_manager_t</a>* cmInstance, <a class="code" href="structbroadcast__msg__t.html">broadcast_msg_t</a> *msg)</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;{</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;    (void)cmInstance;</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    <span class="comment">// Remove item from linked list</span></div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;    msg-&gt;<a class="code" href="structbroadcast__msg__t.html#a3db0429a66a52239f3df4e4741d35409">period</a> = <a class="code" href="com__manager_8c.html#a530fd5a94ed593dd66ec7cdeee00b411">MSG_PERIOD_DISABLED</a>;</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;}</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;</div><div class="line"><a name="l01215"></a><span class="lineno"><a class="line" href="com__manager_8h.html#ae1b28b8ce3e6b22fd7640202d5c47a19"> 1215</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="com__manager_8c.html#ae1b28b8ce3e6b22fd7640202d5c47a19">comManagerDisableBroadcasts</a>(<span class="keywordtype">int</span> pHandle)</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;{</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;    <a class="code" href="com__manager_8c.html#a03fb5352fdf7d5a5bba7e9b36e74bb03">comManagerDisableBroadcastsInstance</a>(&amp;g_cm, pHandle);</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;}</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;</div><div class="line"><a name="l01220"></a><span class="lineno"><a class="line" href="com__manager_8h.html#a0a8c6cdaa5af10630b0e7cdae1234d0d"> 1220</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="com__manager_8c.html#a03fb5352fdf7d5a5bba7e9b36e74bb03">comManagerDisableBroadcastsInstance</a>(<a class="code" href="com__manager_8h.html#aa4c7b70d216e3ec5adc54f13afc5ffde">CMHANDLE</a> cmInstance_, <span class="keywordtype">int</span> pHandle)</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;{</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    <a class="code" href="structcom__manager__t.html">com_manager_t</a>* cmInstance = (<a class="code" href="structcom__manager__t.html">com_manager_t</a>*)cmInstance_;</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="structbroadcast__msg__t.html">broadcast_msg_t</a>* bcPtr = cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a01a38214bdf57c48d70a7b6c7dbdf32c">broadcastMessages</a>, *ptrEnd = (cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a01a38214bdf57c48d70a7b6c7dbdf32c">broadcastMessages</a> + <a class="code" href="com__manager_8h.html#a08d1326bfd508f5c35f3a8853488ad04">MAX_NUM_BCAST_MSGS</a>); bcPtr &lt; ptrEnd; bcPtr++)</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    {</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;        <span class="keywordflow">if</span> (pHandle &lt; 0 || bcPtr-&gt;pHandle == pHandle)</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;        {</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;            bcPtr-&gt;period = <a class="code" href="com__manager_8c.html#a530fd5a94ed593dd66ec7cdeee00b411">MSG_PERIOD_DISABLED</a>;</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;        }</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;    }</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;}</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;</div><div class="line"><a name="l01232"></a><span class="lineno"><a class="line" href="com__manager_8c.html#ae1ab50b97d65b1cc6e1bd806ff0187dc"> 1232</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="com__manager_8c.html#ae1ab50b97d65b1cc6e1bd806ff0187dc">disableDidBroadcast</a>(<a class="code" href="structcom__manager__t.html">com_manager_t</a>* cmInstance, <span class="keywordtype">int</span> pHandle, <a class="code" href="structp__data__disable__t.html">p_data_disable_t</a>* disable)</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;{</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="structbroadcast__msg__t.html">broadcast_msg_t</a>* bcPtr = cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a01a38214bdf57c48d70a7b6c7dbdf32c">broadcastMessages</a>, *ptrEnd = (cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a01a38214bdf57c48d70a7b6c7dbdf32c">broadcastMessages</a> + <a class="code" href="com__manager_8h.html#a08d1326bfd508f5c35f3a8853488ad04">MAX_NUM_BCAST_MSGS</a>); bcPtr &lt; ptrEnd; bcPtr++)</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;    {</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;        <span class="keywordflow">if</span> ((pHandle &lt; 0 || pHandle == bcPtr-&gt;pHandle) &amp;&amp; bcPtr-&gt;dataHdr.id == disable-&gt;<a class="code" href="structp__data__disable__t.html#aca2ef5d5ec699f32fe117e470f6c1986">id</a>)</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;        {</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;            bcPtr-&gt;period = <a class="code" href="com__manager_8c.html#a530fd5a94ed593dd66ec7cdeee00b411">MSG_PERIOD_DISABLED</a>;</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;        }</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;    }</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;    </div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;    <span class="comment">// Call global broadcast handler to disable message control</span></div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;    <span class="keywordflow">if</span> (cmInstance-&gt;<a class="code" href="structcom__manager__t.html#aca2b8672eb68926dc59f47d615492c2d">rmcHandler</a>)</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;    {</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;        <a class="code" href="structp__data__get__t.html">p_data_get_t</a> req;</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;        req.<a class="code" href="structp__data__get__t.html#ab12d63b4fd0d9d6f5a27e8b0856af7a8">id</a> = disable-&gt;<a class="code" href="structp__data__disable__t.html#aca2ef5d5ec699f32fe117e470f6c1986">id</a>;</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;        req.<a class="code" href="structp__data__get__t.html#a11afc3ecb51275d65121ed378d24267a">size</a> = 0;</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;        req.<a class="code" href="structp__data__get__t.html#a0123a3db2bf728e0d199bcb606123ec8">offset</a> = 0;</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;        req.<a class="code" href="structp__data__get__t.html#ac96de892e311a7a68676a99d8e9c6f98">bc_period_multiple</a> = 0;</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;        cmInstance-&gt;<a class="code" href="structcom__manager__t.html#aca2b8672eb68926dc59f47d615492c2d">rmcHandler</a>(cmInstance, pHandle, &amp;req);</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;    }</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;}</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;</div><div class="line"><a name="l01261"></a><span class="lineno"><a class="line" href="com__manager_8c.html#a631d359bd470ffd894fbc248a3e0a5d4"> 1261</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="com__manager_8c.html#a631d359bd470ffd894fbc248a3e0a5d4">sendPacket</a>(<a class="code" href="structcom__manager__t.html">com_manager_t</a>* cmInstance, <span class="keywordtype">int</span> pHandle, <a class="code" href="structpacket__t.html">packet_t</a> *dPkt, uint8_t additionalPktFlags)</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;{</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;    <a class="code" href="structbuffer__t.html">buffer_t</a> buffer;</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="com__manager_8c.html#a2350b0785db4c4bf35d46901128475e6">encodeBinaryPacket</a>(cmInstance, pHandle, &amp;buffer, dPkt, additionalPktFlags))</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;    {</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;        <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    }</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;    <span class="comment">// Send Packet</span></div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a49b2fded8a1c7c3142bc1a90f34603ea">sendPacketCallback</a>)</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;    {</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;        cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a49b2fded8a1c7c3142bc1a90f34603ea">sendPacketCallback</a>(cmInstance, pHandle, &amp;buffer);</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;    }</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;    cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ae1c22dddc776abe38f50a78ff1f76893">status</a>[pHandle].<a class="code" href="structcom__manager__status__t.html#a0ad6d483eb2fbd825a90a518dad9e0ce">txPktCount</a>++;</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;}</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;<span class="comment">// Consolidate this with sendPacket() so that we break up packets into multiples that fit our buffer size.</span></div><div class="line"><a name="l01281"></a><span class="lineno"><a class="line" href="com__manager_8c.html#adefe5ab74a1adf2b17626a35b7b5d8e8"> 1281</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="com__manager_8c.html#adefe5ab74a1adf2b17626a35b7b5d8e8">sendDataPacket</a>(<a class="code" href="structcom__manager__t.html">com_manager_t</a>* cmInstance, <span class="keywordtype">int</span> pHandle, <a class="code" href="structpkt__info__t.html">pkt_info_t</a>* msg)</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;{</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;    <a class="code" href="com__manager_8h.html#a4ae6f964df346995494b68893bb4dec4">pfnComManagerSend</a> sendCallback = cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a49b2fded8a1c7c3142bc1a90f34603ea">sendPacketCallback</a>;</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;    <span class="keywordflow">if</span> (sendCallback == 0)</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;    {</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;        <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;    }</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;    <a class="code" href="structbuffer__t.html">buffer_t</a> bufToSend;</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;    <a class="code" href="structpacket__t.html">packet_t</a> pkt;</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;    pkt.<a class="code" href="structpacket__t.html#ac12697f39d3daa260b81fc186a32acf8">hdr</a> = msg-&gt;<a class="code" href="structpkt__info__t.html#afe0ed5c632ebcc87099c77ff967433d5">hdr</a>;</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;    <span class="keywordflow">switch</span> (pkt.<a class="code" href="structpacket__t.html#ac12697f39d3daa260b81fc186a32acf8">hdr</a>.<a class="code" href="structpacket__hdr__t.html#a915f088eeed50b151584165a97598709">pid</a>)</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;    {</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;        <span class="comment">// Large data support - breaks data up into separate packets for Tx</span></div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="_i_s_comm_8h.html#aeafbbae0d562134d2aa48c43dfa849b8">PID_DATA</a>:</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="_i_s_comm_8h.html#ad8310776b70fca7c3b56b2734a68ad9f">PID_SET_DATA</a>:</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;        {</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;            <span class="comment">// Setup packet and encoding state</span></div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;            <a class="code" href="structbuffer__t.html">buffer_t</a> bufToEncode;</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;            <a class="code" href="structp__data__hdr__t.html">p_data_hdr_t</a> hdr = *(<a class="code" href="structp__data__hdr__t.html">p_data_hdr_t</a>*)msg-&gt;<a class="code" href="structpkt__info__t.html#a4c09f07154b356ff1c99b71e63dd089c">bodyHdr</a>.<a class="code" href="structbuf_ptr__t.html#ad4295aa9699eea57f6219a92475a327c">ptr</a>;</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;            <a class="code" href="structp__data__hdr__t.html">p_data_hdr_t</a>* hdrToSend = (<a class="code" href="structp__data__hdr__t.html">p_data_hdr_t</a>*)bufToEncode.<a class="code" href="structbuffer__t.html#ac75c7fd252491f31cc9fa3458aafad8d">buf</a>;</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;            uint32_t size = hdr.<a class="code" href="structp__data__hdr__t.html#ae4e77713f907776d843284114634d642">size</a>;</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;            uint32_t offset = 0;</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;            uint32_t <span class="keywordtype">id</span> = hdr.<a class="code" href="structp__data__hdr__t.html#a0a70811dba0872fe68a2d58c24cb7894">id</a>;</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;            pkt.<a class="code" href="structpacket__t.html#a4955d2c7f0cacef9987e6e33a7dfc885">body</a>.<a class="code" href="structbuf_ptr__t.html#ad4295aa9699eea57f6219a92475a327c">ptr</a> = bufToEncode.<a class="code" href="structbuffer__t.html#ac75c7fd252491f31cc9fa3458aafad8d">buf</a>;</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;<span class="preprocessor">#if ENABLE_PACKET_CONTINUATION</span></div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;            <span class="keywordflow">while</span> (size &gt; 0)</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;            {</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;                </div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;                </div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;                <span class="comment">// Assign data header values</span></div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;                hdrToSend-&gt;size = <a class="code" href="_i_s_constants_8h.html#a89279935d2e2d0bcdc26cdf9e2ba5b1e">_MIN</a>(size, <a class="code" href="_i_s_comm_8h.html#aac4daff0ea7dba01675954db4842343f">MAX_P_DATA_BODY_SIZE</a>);</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;                hdrToSend-&gt;offset = hdr.<a class="code" href="structp__data__hdr__t.html#a5671779d9843a522942f60cbca2dee18">offset</a> + offset;</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;                hdrToSend-&gt;id = id;</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;                <span class="comment">// copy the data to send to bufToEncode, skipping the data header - since we had to create that data header, we now have to append the actual data</span></div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;                memcpy(bufToEncode.<a class="code" href="structbuffer__t.html#ac75c7fd252491f31cc9fa3458aafad8d">buf</a> + <span class="keyword">sizeof</span>(<a class="code" href="structp__data__hdr__t.html">p_data_hdr_t</a>), msg-&gt;<a class="code" href="structpkt__info__t.html#a65161add71ddf48083cb3a2f5e10f65f">txData</a>.<a class="code" href="structbuf_ptr__t.html#ad4295aa9699eea57f6219a92475a327c">ptr</a> + offset, hdrToSend-&gt;size);</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;                </div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;                <span class="comment">// reduce size by the amount sent - if packet continuation is off, this must become 0 otherwise we fail</span></div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;                size -= hdrToSend-&gt;size;</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;                </div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;<span class="preprocessor">#if ENABLE_PACKET_CONTINUATION</span></div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;                <span class="comment">// increment offset for the next packet</span></div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;                offset += hdrToSend-&gt;size;</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;                </div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;                <span class="keywordflow">if</span> (size &gt; 0)</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;                {</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;                    <span class="comment">// data was too large to fit in one packet, fail</span></div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;                    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;                }</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;                </div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;                <span class="comment">// Set data body size</span></div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;                pkt.<a class="code" href="structpacket__t.html#a4955d2c7f0cacef9987e6e33a7dfc885">body</a>.<a class="code" href="structbuf_ptr__t.html#a89121516bb8e4f198c13eaf8e1d23457">size</a> = <span class="keyword">sizeof</span>(<a class="code" href="structp__data__hdr__t.html">p_data_hdr_t</a>) + hdrToSend-&gt;size;</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;                <span class="comment">// Encode the packet, handling special characters, etc.</span></div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;                if (<a class="code" href="com__manager_8c.html#a2350b0785db4c4bf35d46901128475e6">encodeBinaryPacket</a>(cmInstance, pHandle, &amp;bufToSend, &amp;pkt, <a class="code" href="_i_s_comm_8h.html#ab0476659eb782bc338d77d1e1142abc3a48ce7c163309a8193e5cfbf5512071a8">CM_PKT_FLAGS_MORE_DATA_AVAILABLE</a> * (size != 0)))</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;                {</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;                    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;                }</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;                <span class="comment">// Send the packet using the specified callback</span></div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;                sendCallback(cmInstance, pHandle, &amp;bufToSend);</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;                cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ae1c22dddc776abe38f50a78ff1f76893">status</a>[pHandle].<a class="code" href="structcom__manager__status__t.html#a0ad6d483eb2fbd825a90a518dad9e0ce">txPktCount</a>++;</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;                </div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;<span class="preprocessor">#if ENABLE_PACKET_CONTINUATION</span></div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;            }</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;            </div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;        } <span class="keywordflow">break</span>;</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;        <span class="comment">// Single packet commands/data sets. No data header, just body.</span></div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;        <span class="keywordflow">default</span>:</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;        {</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;            <span class="comment">// Assign packet pointer and encode data as is</span></div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;            pkt.<a class="code" href="structpacket__t.html#a4955d2c7f0cacef9987e6e33a7dfc885">body</a> = msg-&gt;<a class="code" href="structpkt__info__t.html#a65161add71ddf48083cb3a2f5e10f65f">txData</a>;</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="com__manager_8c.html#a2350b0785db4c4bf35d46901128475e6">encodeBinaryPacket</a>(cmInstance, pHandle, &amp;bufToSend, &amp;pkt, 0))</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;            {</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;                <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;            }</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;            <span class="comment">// Send the packet using the specified callback</span></div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;            sendCallback(cmInstance, pHandle, &amp;bufToSend);</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;            cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ae1c22dddc776abe38f50a78ff1f76893">status</a>[pHandle].<a class="code" href="structcom__manager__status__t.html#a0ad6d483eb2fbd825a90a518dad9e0ce">txPktCount</a>++;</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;        } <span class="keywordflow">break</span>;</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;    }</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;}</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;</div><div class="line"><a name="l01381"></a><span class="lineno"><a class="line" href="com__manager_8c.html#a0f161b11e9a91492c7515c9d59ce8016"> 1381</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="com__manager_8c.html#a0f161b11e9a91492c7515c9d59ce8016">sendAck</a>(<a class="code" href="structcom__manager__t.html">com_manager_t</a>* cmInstance, <span class="keywordtype">int</span> pHandle, <a class="code" href="structpacket__t.html">packet_t</a> *pkt, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> pid_ack)</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;{</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;    <span class="keywordtype">int</span> ackSize;</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;    <a class="code" href="structbuf_ptr__t.html">bufPtr_t</a> data;</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;    <span class="comment">// Create and Send request packet</span></div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;    <a class="code" href="structp__ack__t.html">p_ack_t</a> ack;</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;    ack.<a class="code" href="structp__ack__t.html#abf05e90920db88b6ca818740dde82dc6">hdr</a>.<a class="code" href="structp__ack__hdr__t.html#a9c409a6deaf6d6bb1c8e1d2b73b3bf34">pktInfo</a> = pkt-&gt;<a class="code" href="structpacket__t.html#ac12697f39d3daa260b81fc186a32acf8">hdr</a>.<a class="code" href="structpacket__hdr__t.html#a915f088eeed50b151584165a97598709">pid</a>;</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;    ack.<a class="code" href="structp__ack__t.html#abf05e90920db88b6ca818740dde82dc6">hdr</a>.<a class="code" href="structp__ack__hdr__t.html#a6e047dce01db1c893021485be63cbb6f">pktCounter</a> = pkt-&gt;<a class="code" href="structpacket__t.html#ac12697f39d3daa260b81fc186a32acf8">hdr</a>.<a class="code" href="structpacket__hdr__t.html#a5e22ca5884ff79547cdaf5577cad9f41">counter</a>;</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;    ackSize = <span class="keyword">sizeof</span>(<a class="code" href="structp__ack__hdr__t.html">p_ack_hdr_t</a>);</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;    <span class="comment">// Set ack body</span></div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;    <span class="keywordflow">switch</span> (pkt-&gt;<a class="code" href="structpacket__t.html#ac12697f39d3daa260b81fc186a32acf8">hdr</a>.<a class="code" href="structpacket__hdr__t.html#a915f088eeed50b151584165a97598709">pid</a>)</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;    {</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="_i_s_comm_8h.html#ad8310776b70fca7c3b56b2734a68ad9f">PID_SET_DATA</a>:</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;        memcpy(&amp;(ack.<a class="code" href="structp__ack__t.html#a2c304755ebea9c13682813a6edd44a1a">buf</a>), (<a class="code" href="structp__data__hdr__t.html">p_data_hdr_t</a>*)(pkt-&gt;<a class="code" href="structpacket__t.html#a4955d2c7f0cacef9987e6e33a7dfc885">body</a>.<a class="code" href="structbuf_ptr__t.html#ad4295aa9699eea57f6219a92475a327c">ptr</a>), <span class="keyword">sizeof</span>(<a class="code" href="structp__data__hdr__t.html">p_data_hdr_t</a>));</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;        ackSize += <span class="keyword">sizeof</span>(<a class="code" href="structp__data__hdr__t.html">p_data_hdr_t</a>);</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;    }</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;    data.<a class="code" href="structbuf_ptr__t.html#ad4295aa9699eea57f6219a92475a327c">ptr</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)&amp;ack;</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;    data.<a class="code" href="structbuf_ptr__t.html#a89121516bb8e4f198c13eaf8e1d23457">size</a> = ackSize;</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;    <a class="code" href="com__manager_8c.html#ab8cf768e6342dbe0abf16db10f2c7ede">comManagerSendInstance</a>(cmInstance, pHandle, (uint8_t)pid_ack, 0, &amp;data, 0);</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;}</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;<span class="comment">//  Packet Composition</span></div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01430"></a><span class="lineno"><a class="line" href="com__manager_8c.html#a2350b0785db4c4bf35d46901128475e6"> 1430</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="com__manager_8c.html#a2350b0785db4c4bf35d46901128475e6">encodeBinaryPacket</a>(<a class="code" href="structcom__manager__t.html">com_manager_t</a>* cmInstance, <span class="keywordtype">int</span> pHandle, <a class="code" href="structbuffer__t.html">buffer_t</a> *pkt, <a class="code" href="structpacket__t.html">packet_t</a> *dPkt, uint8_t additionalPktFlags)</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;{</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;    <span class="keywordtype">void</span>* srcBuffer = dPkt-&gt;<a class="code" href="structpacket__t.html#a4955d2c7f0cacef9987e6e33a7dfc885">body</a>.<a class="code" href="structbuf_ptr__t.html#ad4295aa9699eea57f6219a92475a327c">ptr</a>;</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;    <span class="keywordtype">int</span> srcBufferLength = dPkt-&gt;<a class="code" href="structpacket__t.html#a4955d2c7f0cacef9987e6e33a7dfc885">body</a>.<a class="code" href="structbuf_ptr__t.html#a89121516bb8e4f198c13eaf8e1d23457">size</a>;</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;    <span class="keywordtype">void</span>* encodedPacket = pkt-&gt;<a class="code" href="structbuffer__t.html#ac75c7fd252491f31cc9fa3458aafad8d">buf</a>;</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;    <span class="keywordtype">int</span> encodedPacketLength = <a class="code" href="_i_s_comm_8h.html#adcb8d04d0e267c9a6e5b6f47717e8629">PKT_BUF_SIZE</a> - 1;</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;    <a class="code" href="structpacket__hdr__t.html">packet_hdr_t</a>* hdr = &amp;dPkt-&gt;<a class="code" href="structpacket__t.html#ac12697f39d3daa260b81fc186a32acf8">hdr</a>;</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;    hdr-&gt;<a class="code" href="structpacket__hdr__t.html#a5e22ca5884ff79547cdaf5577cad9f41">counter</a> = cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a59a276b78b028a84985cd68d53132639">pktCounter</a>++;</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;    pkt-&gt;<a class="code" href="structbuffer__t.html#ab1ce0deb7a33566b5c9e2705ae822007">size</a> = <a class="code" href="_i_s_comm_8c.html#a5b68834d97874ca7fe0b54ad4943a733">is_encode_binary_packet</a>(srcBuffer, srcBufferLength, hdr, additionalPktFlags | cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ae1c22dddc776abe38f50a78ff1f76893">status</a>[pHandle].<a class="code" href="structcom__manager__status__t.html#a8212909888b506491643d391cd7da2c3">flags</a>, encodedPacket, encodedPacketLength);</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;    <span class="keywordflow">return</span> (-1 * ((<span class="keywordtype">int</span>)pkt-&gt;<a class="code" href="structbuffer__t.html#ab1ce0deb7a33566b5c9e2705ae822007">size</a> &lt; 8));</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;}</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;</div><div class="line"><a name="l01442"></a><span class="lineno"><a class="line" href="com__manager_8c.html#a3e131ffd2b0658b9fa9b90271bb5b638"> 1442</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="com__manager_8c.html#a3e131ffd2b0658b9fa9b90271bb5b638">processAsciiPacket</a>(<a class="code" href="structcom__manager__t.html">com_manager_t</a>* cmInstance, <span class="keywordtype">int</span> pHandle, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* data, <span class="keywordtype">int</span> dataLength)</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;{</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="com__manager_8c.html#a0e2d283526ff7000a71192b8f63b7777">processAsciiRxPacket</a>(cmInstance, pHandle, data, dataLength))</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;    {</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;        <span class="comment">// Error parsing packet</span></div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;        cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ae1c22dddc776abe38f50a78ff1f76893">status</a>[pHandle].<a class="code" href="structcom__manager__status__t.html#ac612f97d0b588330e0ce0293170a60f0">readCounter</a> += 32;</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;        cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ae1c22dddc776abe38f50a78ff1f76893">status</a>[pHandle].<a class="code" href="structcom__manager__status__t.html#a277a4268d8d1eb8e152c65f016d64f68">rxError</a> = (uint32_t)-1;</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;        cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ae1c22dddc776abe38f50a78ff1f76893">status</a>[pHandle].<a class="code" href="structcom__manager__status__t.html#a8542bc5e9db157565ea3418ed158e070">communicationErrorCount</a>++;</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;        <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;    }</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;}</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;</div><div class="line"><a name="l01455"></a><span class="lineno"><a class="line" href="com__manager_8c.html#aec43bd8335ac3a31fe2e668c7611b209"> 1455</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="com__manager_8c.html#aec43bd8335ac3a31fe2e668c7611b209">processBinaryPacket</a>(<a class="code" href="structcom__manager__t.html">com_manager_t</a>* cmInstance, <span class="keywordtype">int</span> pHandle, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* dataStart, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* data, <span class="keywordtype">int</span> dataLength, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* additionalDataAvailable)</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;{</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;    <a class="code" href="structpacket__t.html">packet_t</a> pkt;</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;    pkt.<a class="code" href="structpacket__t.html#a4955d2c7f0cacef9987e6e33a7dfc885">body</a>.<a class="code" href="structbuf_ptr__t.html#ad4295aa9699eea57f6219a92475a327c">ptr</a> = dataStart;</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;    <span class="comment">// Found Packet -&gt; Now process packet</span></div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="_i_s_comm_8c.html#ac31f64bb01078edee96ed0326fae3fe4">is_decode_binary_packet</a>(&amp;pkt, data, dataLength))</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;    {</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;        <span class="comment">// bit index 2 is whether another packet is available that is related to this packet</span></div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;        *additionalDataAvailable = pkt.<a class="code" href="structpacket__t.html#ac12697f39d3daa260b81fc186a32acf8">hdr</a>.<a class="code" href="structpacket__hdr__t.html#a2f70c5610514823dd705571fd68df9d7">flags</a> &amp; <a class="code" href="_i_s_comm_8h.html#ab0476659eb782bc338d77d1e1142abc3a48ce7c163309a8193e5cfbf5512071a8">CM_PKT_FLAGS_MORE_DATA_AVAILABLE</a>;</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="com__manager_8c.html#acc32b1a0dbfb593f2bf49d52775bff27">processBinaryRxPacket</a>(cmInstance, pHandle, &amp;pkt, *additionalDataAvailable))</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;        {</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;            <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;        }</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;    }</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;    <span class="comment">// Error parsing packet</span></div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;    cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ae1c22dddc776abe38f50a78ff1f76893">status</a>[pHandle].<a class="code" href="structcom__manager__status__t.html#ac612f97d0b588330e0ce0293170a60f0">readCounter</a> += 32;</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;    cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ae1c22dddc776abe38f50a78ff1f76893">status</a>[pHandle].<a class="code" href="structcom__manager__status__t.html#a277a4268d8d1eb8e152c65f016d64f68">rxError</a> = (uint32_t)-1;</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;    cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ae1c22dddc776abe38f50a78ff1f76893">status</a>[pHandle].<a class="code" href="structcom__manager__status__t.html#a8542bc5e9db157565ea3418ed158e070">communicationErrorCount</a>++;</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;    cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ae1c22dddc776abe38f50a78ff1f76893">status</a>[pHandle].<a class="code" href="structcom__manager__status__t.html#a799659757d78ea8a857bc35994b9cb8a">startByte</a> = 0;</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;    <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;}</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;</div><div class="line"><a name="l01481"></a><span class="lineno"><a class="line" href="com__manager_8c.html#aeeee35f3d2f1cf8f56a7b95d1ccc8ab4"> 1481</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="com__manager_8c.html#aeeee35f3d2f1cf8f56a7b95d1ccc8ab4">processPassThroughBytes</a>(<a class="code" href="structcom__manager__t.html">com_manager_t</a>* cmInstance, <span class="keywordtype">int</span> pHandle, <a class="code" href="structring__buffer__t.html">ring_buffer_t</a>* ringBuffer)</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;{</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;    (void)pHandle;</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;    uint8_t startByte = cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ae1c22dddc776abe38f50a78ff1f76893">status</a>[pHandle].<a class="code" href="structcom__manager__status__t.html#a799659757d78ea8a857bc35994b9cb8a">startByte</a>;</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;    uint32_t passThroughIndex = ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#a2923f0836c88d3d7055f20b25edc2fd8">startIndex</a>;</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;    uint32_t byteCount = <a class="code" href="_i_s_constants_8h.html#a89279935d2e2d0bcdc26cdf9e2ba5b1e">_MIN</a>(cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ae1c22dddc776abe38f50a78ff1f76893">status</a>[pHandle].<a class="code" href="structcom__manager__status__t.html#ae21797145c303bff1e0df2126550232d">passThroughBytes</a>, ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#a5bfd66636fb127b97f58ddd9eecb960d">endIndex</a> - ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#a2923f0836c88d3d7055f20b25edc2fd8">startIndex</a>);</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;    cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ae1c22dddc776abe38f50a78ff1f76893">status</a>[pHandle].<a class="code" href="structcom__manager__status__t.html#ae21797145c303bff1e0df2126550232d">passThroughBytes</a> -= byteCount;</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;    ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#a2923f0836c88d3d7055f20b25edc2fd8">startIndex</a> += byteCount;</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;    ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#ac100861fe6491df179556a3c0cb7384b">scanIndex</a> = ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#a2923f0836c88d3d7055f20b25edc2fd8">startIndex</a>;</div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;    <span class="comment">// clear the start byte once all pass through bytes are sent</span></div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;    <span class="keywordflow">if</span> (cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ae1c22dddc776abe38f50a78ff1f76893">status</a>[pHandle].<a class="code" href="structcom__manager__status__t.html#ae21797145c303bff1e0df2126550232d">passThroughBytes</a> &lt;= 0)</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;    {</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;        cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ae1c22dddc776abe38f50a78ff1f76893">status</a>[pHandle].<a class="code" href="structcom__manager__status__t.html#a799659757d78ea8a857bc35994b9cb8a">startByte</a> = 0;</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;    }</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;    <span class="keywordflow">switch</span> (startByte)</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;    {</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="_i_s_comm_8h.html#a739834da5d5205125ac7115741c30c63a3c40c8ab20b400ce92d105b470e09891">UBLOX_START_BYTE1</a>:</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="_i_s_comm_8h.html#a739834da5d5205125ac7115741c30c63ae2342a40d92a37d68326fb13d2f7d40e">RTCM3_START_BYTE</a>:</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;        {</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;            <span class="keywordflow">if</span> (cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ab416d1e7f6dd0ab395d0867d0083d5a9">passThroughHandler</a> != 0)</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;            {</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;                cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ab416d1e7f6dd0ab395d0867d0083d5a9">passThroughHandler</a>(cmInstance, (<a class="code" href="com__manager_8h.html#a15acaf47bda1a0cd59aeb1d0072df930">com_manager_pass_through_t</a>)startByte, pHandle, ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#a35b6546f057e9b211c1f51f8537388dc">buf</a> + passThroughIndex, byteCount);</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;            }</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;            <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;        } <span class="keywordflow">break</span>;</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;    }</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;    <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;}</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;</div><div class="line"><a name="l01514"></a><span class="lineno"><a class="line" href="com__manager_8c.html#a9f308bd49e5afa45f8deb7f01302241f"> 1514</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="com__manager_8c.html#a9f308bd49e5afa45f8deb7f01302241f">beginUbloxPacket</a>(<a class="code" href="structcom__manager__t.html">com_manager_t</a>* cmInstance, <span class="keywordtype">int</span> pHandle, <a class="code" href="structring__buffer__t.html">ring_buffer_t</a>* ringBuffer)</div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;{</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;    uint32_t count = ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#a5bfd66636fb127b97f58ddd9eecb960d">endIndex</a> - (--ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#ac100861fe6491df179556a3c0cb7384b">scanIndex</a>);</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;    <span class="keywordflow">if</span> (count &lt; <a class="code" href="_i_s_comm_8h.html#a77fd73f7c23687368fac3da6984d04cb">UBLOX_HEADER_SIZE</a>)</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;    {</div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;        <span class="comment">// not enough data to read a ublox packet header, wait for more data to arrive</span></div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;        <span class="keywordflow">return</span> 1; <span class="comment">// 1 means more data needed</span></div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;    }</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;    <span class="comment">// get the header starting at the ublox start byte</span></div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* header = (ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#a35b6546f057e9b211c1f51f8537388dc">buf</a> + ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#ac100861fe6491df179556a3c0cb7384b">scanIndex</a>);</div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;    <span class="keywordtype">int</span> headerLength = ((int)header[4] | (<span class="keywordtype">int</span>)header[5] &lt;&lt; 8);</div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;    <span class="comment">// if the second preamble byte is wrong or the length is greater than 2048, probably not a ublox packet</span></div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;    <span class="keywordflow">if</span> (header[1] != <a class="code" href="_i_s_comm_8h.html#a739834da5d5205125ac7115741c30c63ae9ca61a4078c839bc88b4b49baaebd57">UBLOX_START_BYTE2</a> || headerLength &gt; 2048)</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;    {</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;        <span class="comment">// skip past the ublox start byte to avoid an infinite loop</span></div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;        ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#ac100861fe6491df179556a3c0cb7384b">scanIndex</a>++;</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;        cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ae1c22dddc776abe38f50a78ff1f76893">status</a>[pHandle].<a class="code" href="structcom__manager__status__t.html#a799659757d78ea8a857bc35994b9cb8a">startByte</a> = 0;</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;        <span class="keywordflow">return</span> 0; <span class="comment">// 0 means keep reading as normal</span></div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;    }</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;    <span class="comment">// probably a valid ublox packet</span></div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;    cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ae1c22dddc776abe38f50a78ff1f76893">status</a>[pHandle].<a class="code" href="structcom__manager__status__t.html#a799659757d78ea8a857bc35994b9cb8a">startByte</a> = <a class="code" href="_i_s_comm_8h.html#a739834da5d5205125ac7115741c30c63a3c40c8ab20b400ce92d105b470e09891">UBLOX_START_BYTE1</a>;</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;    ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#a2923f0836c88d3d7055f20b25edc2fd8">startIndex</a> = ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#ac100861fe6491df179556a3c0cb7384b">scanIndex</a>;</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;    cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ae1c22dddc776abe38f50a78ff1f76893">status</a>[pHandle].<a class="code" href="structcom__manager__status__t.html#ae21797145c303bff1e0df2126550232d">passThroughBytes</a> = <a class="code" href="_i_s_comm_8h.html#a77fd73f7c23687368fac3da6984d04cb">UBLOX_HEADER_SIZE</a> + headerLength + 2; <span class="comment">// + 2 for checksum</span></div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;    <span class="keywordflow">return</span> 0; <span class="comment">// 0 means keep reading as normal</span></div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;}</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;</div><div class="line"><a name="l01543"></a><span class="lineno"><a class="line" href="com__manager_8c.html#acbf78e85e9b31849a67e1dca09688f9f"> 1543</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="com__manager_8c.html#acbf78e85e9b31849a67e1dca09688f9f">beginRtcm3Packet</a>(<a class="code" href="structcom__manager__t.html">com_manager_t</a>* cmInstance, <span class="keywordtype">int</span> pHandle, <a class="code" href="structring__buffer__t.html">ring_buffer_t</a>* ringBuffer)</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;{</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;    uint32_t count = ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#a5bfd66636fb127b97f58ddd9eecb960d">endIndex</a> - (--ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#ac100861fe6491df179556a3c0cb7384b">scanIndex</a>);</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;    <span class="keywordflow">if</span> (count &lt; <a class="code" href="_i_s_comm_8h.html#a4f5c35a4a8d7bc7011d154f678a44107">RTCM3_HEADER_SIZE</a>)</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;    {</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;        <span class="comment">// not enough data to read a rtcm3 packet header, wait for more data to arrive</span></div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;        <span class="keywordflow">return</span> 1; <span class="comment">// 1 means more data needed</span></div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;    }</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;    <span class="comment">// if message length valid, probably an rtcm3 packet, message length starts at bit 14 and goes for 10 bits</span></div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;    uint32_t msgLength = 0;</div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;    <span class="keywordflow">for</span> (uint32_t i = 14; i &lt; 14 + 10; i++)</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;    {</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;        msgLength = (msgLength &lt;&lt; 1) + ((ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#a35b6546f057e9b211c1f51f8537388dc">buf</a>[ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#ac100861fe6491df179556a3c0cb7384b">scanIndex</a> + (i / 8)] &gt;&gt; (7 - i % 8)) &amp; 1u);</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;    }</div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;    <span class="keywordflow">if</span> (msgLength &gt; 1023)</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;    {</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;        ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#ac100861fe6491df179556a3c0cb7384b">scanIndex</a>++;</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;        cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ae1c22dddc776abe38f50a78ff1f76893">status</a>[pHandle].<a class="code" href="structcom__manager__status__t.html#a799659757d78ea8a857bc35994b9cb8a">startByte</a> = 0;</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;    }</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;    <span class="comment">// probably a valid rtcm3 packet</span></div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;    cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ae1c22dddc776abe38f50a78ff1f76893">status</a>[pHandle].<a class="code" href="structcom__manager__status__t.html#a799659757d78ea8a857bc35994b9cb8a">startByte</a> = <a class="code" href="_i_s_comm_8h.html#a739834da5d5205125ac7115741c30c63ae2342a40d92a37d68326fb13d2f7d40e">RTCM3_START_BYTE</a>;</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;    ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#a2923f0836c88d3d7055f20b25edc2fd8">startIndex</a> = ringBuffer-&gt;<a class="code" href="structring__buffer__t.html#ac100861fe6491df179556a3c0cb7384b">scanIndex</a>;</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;    cmInstance-&gt;<a class="code" href="structcom__manager__t.html#ae1c22dddc776abe38f50a78ff1f76893">status</a>[pHandle].<a class="code" href="structcom__manager__status__t.html#ae21797145c303bff1e0df2126550232d">passThroughBytes</a> = <a class="code" href="_i_s_comm_8h.html#a4f5c35a4a8d7bc7011d154f678a44107">RTCM3_HEADER_SIZE</a> + msgLength + 3; <span class="comment">// + 3 for crc24</span></div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;    <span class="keywordflow">return</span> 0; <span class="comment">// 0 means keep reading as normal</span></div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;}</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;<span class="comment">//  Packet Retry</span></div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01580"></a><span class="lineno"><a class="line" href="com__manager_8c.html#ae62f18ac3c8c1dcde204cb554fba53e3"> 1580</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="com__manager_8c.html#ae62f18ac3c8c1dcde204cb554fba53e3">stepPacketRetry</a>(<a class="code" href="structcom__manager__t.html">com_manager_t</a>* cmInstance)</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;{</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;    int32_t i;</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;    <a class="code" href="structensured__pkt__t.html">ensured_pkt_t</a>* ePkt;</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; cmInstance-&gt;<a class="code" href="structcom__manager__t.html#af1204df7157bed57959a9daa3f83884c">maxEnsuredPackets</a>; i++)</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;    {</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;        ePkt = &amp;(cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a7fc3af964301b311635445291553551a">ensuredPackets</a>[i]);</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;        <span class="comment">// No more retries in list</span></div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;        <span class="keywordflow">if</span> (ePkt-&gt;<a class="code" href="structensured__pkt__t.html#a0e33c78ab018ea5e2c608fea068f746d">counter</a> == -2)</div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;        {</div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;        }</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;        <span class="comment">// Check that retry is enabled</span></div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;        <span class="keywordflow">if</span> (ePkt-&gt;<a class="code" href="structensured__pkt__t.html#a0e33c78ab018ea5e2c608fea068f746d">counter</a> &gt;= 0)</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;        {</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;            <span class="comment">// Check if counter has expired</span></div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;            <span class="keywordflow">if</span> (--(ePkt-&gt;<a class="code" href="structensured__pkt__t.html#a0e33c78ab018ea5e2c608fea068f746d">counter</a>) == 0)</div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;            {</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;                <span class="comment">// Reset counter</span></div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;                ePkt-&gt;<a class="code" href="structensured__pkt__t.html#a0e33c78ab018ea5e2c608fea068f746d">counter</a> = cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a2a4da8b8846be0d82a1d83af2adb7698">ensureRetryCount</a>;</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;                <span class="comment">// Reset packet</span></div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;                <a class="code" href="com__manager_8c.html#a631d359bd470ffd894fbc248a3e0a5d4">sendPacket</a>(cmInstance, ePkt-&gt;<a class="code" href="structensured__pkt__t.html#a87e055f58870fc9f8bf6074f55e66301">pHandle</a>, &amp;(ePkt-&gt;<a class="code" href="structensured__pkt__t.html#ac5b00d01fa5171945076634d25685345">pkt</a>), 0);</div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;            }</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;        }</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;    }</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;}</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;</div><div class="line"><a name="l01622"></a><span class="lineno"><a class="line" href="com__manager_8c.html#a1872147ebc2cceda89f51b04edcc82e8"> 1622</a></span>&#160;<a class="code" href="structpacket__t.html">packet_t</a>* <a class="code" href="com__manager_8c.html#a1872147ebc2cceda89f51b04edcc82e8">registerPacketRetry</a>(<a class="code" href="structcom__manager__t.html">com_manager_t</a>* cmInstance, <span class="keywordtype">int</span> pHandle, uint8_t pid, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> data[], <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> dataSize)</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;{</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;    int32_t i;</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;    <a class="code" href="structensured__pkt__t.html">ensured_pkt_t</a> *ePkt = 0;</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> searching = 1;</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;<span class="preprocessor">    #if ENABLE_FILTER_DUPLICATE_PACKETS</span></div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;<span class="preprocessor">    #if ENABLE_FILTER_DUPLICATE_PACKETS_MATCH_ALL_CHARACTERS</span></div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;    int32_t j;</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;<span class="preprocessor">    #endif</span></div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;    <span class="comment">// Filter out redundant retries (replace same type packets and pHandle with latest)</span></div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;    <a class="code" href="structp__data__get__t.html">p_data_get_t</a> *getData1, *getData2;</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;    <span class="comment">// Validate Data Size</span></div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;    <span class="keywordflow">if</span> (dataSize &gt; <a class="code" href="_i_s_comm_8h.html#aac4daff0ea7dba01675954db4842343f">MAX_P_DATA_BODY_SIZE</a>)</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;    {</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;    }</div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;    <span class="comment">// Check for existing retry</span></div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;    <span class="keywordflow">for</span> (i = 0; searching &amp;&amp; i &lt; cmInstance-&gt;<a class="code" href="structcom__manager__t.html#af1204df7157bed57959a9daa3f83884c">maxEnsuredPackets</a>; i++)</div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;    {</div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;        ePkt = &amp;(cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a7fc3af964301b311635445291553551a">ensuredPackets</a>[i]);</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;        <span class="comment">// No more retries to search over.  Abort and look for first disabled slot.</span></div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;        <span class="keywordflow">if</span> (ePkt-&gt;<a class="code" href="structensured__pkt__t.html#a0e33c78ab018ea5e2c608fea068f746d">counter</a> == -2)</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;        {</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;        }</div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;</div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;        <span class="comment">// Found enabled retry w/ matching packet ID and data size</span></div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;        <span class="keywordflow">if</span> (ePkt-&gt;<a class="code" href="structensured__pkt__t.html#a0e33c78ab018ea5e2c608fea068f746d">counter</a> &gt;= 0 &amp;&amp;</div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;        ePkt-&gt;<a class="code" href="structensured__pkt__t.html#ac5b00d01fa5171945076634d25685345">pkt</a>.<a class="code" href="structpacket__t.html#ac12697f39d3daa260b81fc186a32acf8">hdr</a>.<a class="code" href="structpacket__hdr__t.html#a915f088eeed50b151584165a97598709">pid</a> == pid        &amp;&amp;</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;        ePkt-&gt;<a class="code" href="structensured__pkt__t.html#ac5b00d01fa5171945076634d25685345">pkt</a>.<a class="code" href="structpacket__t.html#a4955d2c7f0cacef9987e6e33a7dfc885">body</a>.<a class="code" href="structbuf_ptr__t.html#a89121516bb8e4f198c13eaf8e1d23457">size</a> == dataSize &amp;&amp;</div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;        ePkt-&gt;<a class="code" href="structensured__pkt__t.html#a87e055f58870fc9f8bf6074f55e66301">pHandle</a> == pHandle)</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;        {</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;            <span class="keywordflow">switch</span> (pid)</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;            {</div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="_i_s_comm_8h.html#a27634099d972a0c65e8a3de17ea9d094">PID_GET_DATA</a>:</div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;                getData1 = (<a class="code" href="structp__data__get__t.html">p_data_get_t</a>*)data;</div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;                getData2 = (<a class="code" href="structp__data__get__t.html">p_data_get_t</a>*)ePkt-&gt;<a class="code" href="structensured__pkt__t.html#aeb7cc782edb497b401824b9a7cc458f9">pktBody</a>;</div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;</div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;                <span class="comment">// Match: all Get Data parameters</span></div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;                if (getData1-&gt;<a class="code" href="structp__data__get__t.html#ab12d63b4fd0d9d6f5a27e8b0856af7a8">id</a> == getData2-&gt;<a class="code" href="structp__data__get__t.html#ab12d63b4fd0d9d6f5a27e8b0856af7a8">id</a>     &amp;&amp;</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;                getData1-&gt;<a class="code" href="structp__data__get__t.html#a11afc3ecb51275d65121ed378d24267a">size</a> == getData2-&gt;<a class="code" href="structp__data__get__t.html#a11afc3ecb51275d65121ed378d24267a">size</a>   &amp;&amp;</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;                getData1-&gt;<a class="code" href="structp__data__get__t.html#a0123a3db2bf728e0d199bcb606123ec8">offset</a> == getData2-&gt;<a class="code" href="structp__data__get__t.html#a0123a3db2bf728e0d199bcb606123ec8">offset</a>)</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;                searching = 0;</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="_i_s_comm_8h.html#ac6e603670e69c96b8f8d3ad9ef9d7920">PID_STOP_BROADCASTS_ALL_PORTS</a>:</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;                searching = 0;</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;            <span class="keywordflow">default</span>:</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;</div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;<span class="preprocessor">#if !ENABLE_FILTER_DUPLICATE_PACKETS_MATCH_ALL_CHARACTERS</span></div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;</div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;                <span class="comment">// Match: first character</span></div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;                <span class="keywordflow">if</span> (ePkt-&gt;<a class="code" href="structensured__pkt__t.html#ac5b00d01fa5171945076634d25685345">pkt</a>.<a class="code" href="structpacket__t.html#a4955d2c7f0cacef9987e6e33a7dfc885">body</a>.<a class="code" href="structbuf_ptr__t.html#ad4295aa9699eea57f6219a92475a327c">ptr</a>[0] == data[0])</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;                {</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;                    searching = 0;</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;                }</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;</div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;                <span class="comment">// Match: All character</span></div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;                <span class="keywordflow">for</span> (j = 0; j &lt; dataSize; j++)</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;                {</div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;                    <span class="keywordflow">if</span> (ePkt-&gt;<a class="code" href="structensured__pkt__t.html#ac5b00d01fa5171945076634d25685345">pkt</a>.<a class="code" href="structpacket__t.html#a4955d2c7f0cacef9987e6e33a7dfc885">body</a>.<a class="code" href="structbuf_ptr__t.html#ad4295aa9699eea57f6219a92475a327c">ptr</a>[j] == data[j])</div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;                    {</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;                        searching = 0;</div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;                    }</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;                }</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;</div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;            }</div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;        }</div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;    }</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;<span class="preprocessor">    #endif</span></div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;</div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;    <span class="comment">// Find Empty Slot - either first available or tail if all used.</span></div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;    <span class="keywordflow">for</span> (i = 0; searching &amp;&amp; i &lt; cmInstance-&gt;<a class="code" href="structcom__manager__t.html#af1204df7157bed57959a9daa3f83884c">maxEnsuredPackets</a>; i++)</div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;    {</div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;        ePkt = &amp;(cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a7fc3af964301b311635445291553551a">ensuredPackets</a>[i]);</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;        <span class="comment">// Found empty slot</span></div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;        <span class="keywordflow">if</span> (ePkt-&gt;<a class="code" href="structensured__pkt__t.html#a0e33c78ab018ea5e2c608fea068f746d">counter</a> &lt; 0)</div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;        {</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;            searching = 0;</div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;        }</div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;    }</div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;</div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;    <span class="comment">// All slots enabled, so take the oldest (one after last used)</span></div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;    <span class="keywordflow">if</span> (searching &amp;&amp; cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a7fc3af964301b311635445291553551a">ensuredPackets</a> != 0)</div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;    {</div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;        <span class="keywordflow">if</span> (++cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a4e76816e96ec28569e523fcf38150775">lastEnsuredPacketIndex</a> &gt;= cmInstance-&gt;<a class="code" href="structcom__manager__t.html#af1204df7157bed57959a9daa3f83884c">maxEnsuredPackets</a>)</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;        {</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;            cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a4e76816e96ec28569e523fcf38150775">lastEnsuredPacketIndex</a> = 0;</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;        }</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;        ePkt = &amp;(cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a7fc3af964301b311635445291553551a">ensuredPackets</a>[cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a4e76816e96ec28569e523fcf38150775">lastEnsuredPacketIndex</a>]);</div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;    }</div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;    {</div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;        cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a4e76816e96ec28569e523fcf38150775">lastEnsuredPacketIndex</a> = i;</div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;    }</div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;    <span class="keywordflow">if</span> (ePkt == 0)</div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;    {</div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;    }</div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;    <span class="comment">// Backup packet contents for retry if not already registered</span></div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;    ePkt-&gt;<a class="code" href="structensured__pkt__t.html#a0e33c78ab018ea5e2c608fea068f746d">counter</a> = cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a2a4da8b8846be0d82a1d83af2adb7698">ensureRetryCount</a>;</div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;    memcpy(ePkt-&gt;<a class="code" href="structensured__pkt__t.html#aeb7cc782edb497b401824b9a7cc458f9">pktBody</a>, data, dataSize);</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;</div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;    <span class="comment">// Update ePkt pkt header and body info</span></div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;    ePkt-&gt;<a class="code" href="structensured__pkt__t.html#ac5b00d01fa5171945076634d25685345">pkt</a>.<a class="code" href="structpacket__t.html#ac12697f39d3daa260b81fc186a32acf8">hdr</a>.<a class="code" href="structpacket__hdr__t.html#aae0969a547bd5ea711e2fe7e2d9a5f4e">startByte</a> = <a class="code" href="_i_s_comm_8h.html#a739834da5d5205125ac7115741c30c63ab65949193083fea6f789b9b447df716f">PSC_START_BYTE</a>;</div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;    ePkt-&gt;<a class="code" href="structensured__pkt__t.html#ac5b00d01fa5171945076634d25685345">pkt</a>.<a class="code" href="structpacket__t.html#ac12697f39d3daa260b81fc186a32acf8">hdr</a>.<a class="code" href="structpacket__hdr__t.html#a915f088eeed50b151584165a97598709">pid</a> = pid;</div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;    ePkt-&gt;<a class="code" href="structensured__pkt__t.html#ac5b00d01fa5171945076634d25685345">pkt</a>.<a class="code" href="structpacket__t.html#a4955d2c7f0cacef9987e6e33a7dfc885">body</a>.<a class="code" href="structbuf_ptr__t.html#ad4295aa9699eea57f6219a92475a327c">ptr</a> = ePkt-&gt;<a class="code" href="structensured__pkt__t.html#aeb7cc782edb497b401824b9a7cc458f9">pktBody</a>; <span class="comment">// point to ePkt buffer &quot;pktBody&quot;</span></div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;    ePkt-&gt;<a class="code" href="structensured__pkt__t.html#ac5b00d01fa5171945076634d25685345">pkt</a>.<a class="code" href="structpacket__t.html#a4955d2c7f0cacef9987e6e33a7dfc885">body</a>.<a class="code" href="structbuf_ptr__t.html#a89121516bb8e4f198c13eaf8e1d23457">size</a> = dataSize;</div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;    ePkt-&gt;<a class="code" href="structensured__pkt__t.html#a87e055f58870fc9f8bf6074f55e66301">pHandle</a> = pHandle;</div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;</div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;    <span class="keywordflow">return</span> &amp;(ePkt-&gt;<a class="code" href="structensured__pkt__t.html#ac5b00d01fa5171945076634d25685345">pkt</a>);</div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;}</div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;</div><div class="line"><a name="l01762"></a><span class="lineno"><a class="line" href="com__manager_8c.html#a8752fd18e0f3378d4feab9f8398fa172"> 1762</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="com__manager_8c.html#a8752fd18e0f3378d4feab9f8398fa172">updatePacketRetryData</a>(<a class="code" href="structcom__manager__t.html">com_manager_t</a>* cmInstance, <a class="code" href="structpacket__t.html">packet_t</a> *pkt)</div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;{</div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;    int32_t i;</div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;    <a class="code" href="structensured__pkt__t.html">ensured_pkt_t</a> *ePkt;</div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;</div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;    <span class="comment">// Search for retries that match packet received.  If found, removed it from the retry list.</span></div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; cmInstance-&gt;<a class="code" href="structcom__manager__t.html#af1204df7157bed57959a9daa3f83884c">maxEnsuredPackets</a>; i++)</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;    {</div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;        ePkt = &amp;(cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a7fc3af964301b311635445291553551a">ensuredPackets</a>[i]);</div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;        <span class="keywordflow">if</span> (ePkt-&gt;<a class="code" href="structensured__pkt__t.html#a0e33c78ab018ea5e2c608fea068f746d">counter</a> == -2)</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;        {</div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;            <span class="comment">// No more retries to search for</span></div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;        }</div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;</div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;        <span class="keywordflow">if</span> (ePkt-&gt;<a class="code" href="structensured__pkt__t.html#a0e33c78ab018ea5e2c608fea068f746d">counter</a> &lt; 0)</div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;        {</div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;            <span class="comment">// This retry is disabled.  Skip it.</span></div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;        }</div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;</div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;        <span class="comment">// Found packet response expected.  Remove from retry list.</span></div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;        <span class="keywordflow">if</span> (ePkt-&gt;<a class="code" href="structensured__pkt__t.html#aeb7cc782edb497b401824b9a7cc458f9">pktBody</a>[0] == pkt-&gt;<a class="code" href="structpacket__t.html#a4955d2c7f0cacef9987e6e33a7dfc885">body</a>.<a class="code" href="structbuf_ptr__t.html#ad4295aa9699eea57f6219a92475a327c">ptr</a>[0])</div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;        {</div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;            <span class="comment">// Indicate disabled retry</span></div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;            ePkt-&gt;<a class="code" href="structensured__pkt__t.html#a0e33c78ab018ea5e2c608fea068f746d">counter</a> = -1;</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;        }</div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;    }</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;</div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;    <span class="comment">// Update last retry indicator</span></div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;    <span class="keywordflow">for</span> (i = cmInstance-&gt;<a class="code" href="structcom__manager__t.html#af1204df7157bed57959a9daa3f83884c">maxEnsuredPackets</a> - 1; i &gt;= 0; i--)</div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;    {</div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;        <span class="comment">// Current is enabled so stop</span></div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;        <span class="keywordflow">if</span> (cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a7fc3af964301b311635445291553551a">ensuredPackets</a>[i].<a class="code" href="structensured__pkt__t.html#a0e33c78ab018ea5e2c608fea068f746d">counter</a> &gt;= 0)</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;        {</div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;        }</div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;</div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;        <span class="comment">// Indicate no more retries in list</span></div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;        cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a7fc3af964301b311635445291553551a">ensuredPackets</a>[i].<a class="code" href="structensured__pkt__t.html#a0e33c78ab018ea5e2c608fea068f746d">counter</a> = -2;</div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;    }</div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;}</div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;</div><div class="line"><a name="l01806"></a><span class="lineno"><a class="line" href="com__manager_8c.html#a993761774598a78d7bcb807aa493ed4a"> 1806</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="com__manager_8c.html#a993761774598a78d7bcb807aa493ed4a">updatePacketRetryAck</a>(<a class="code" href="structcom__manager__t.html">com_manager_t</a>* cmInstance, <a class="code" href="structpacket__t.html">packet_t</a> *pkt)</div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;{</div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;    int32_t i;</div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;    <a class="code" href="structensured__pkt__t.html">ensured_pkt_t</a> *ePkt;</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;    <a class="code" href="structp__ack__t.html">p_ack_t</a> *ack;</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;    uint8_t ackInfo;</div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;</div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;    ack = (<a class="code" href="structp__ack__t.html">p_ack_t</a>*)(pkt-&gt;<a class="code" href="structpacket__t.html#a4955d2c7f0cacef9987e6e33a7dfc885">body</a>.<a class="code" href="structbuf_ptr__t.html#ad4295aa9699eea57f6219a92475a327c">ptr</a>);</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;    ackInfo = (uint8_t)(ack-&gt;<a class="code" href="structp__ack__t.html#abf05e90920db88b6ca818740dde82dc6">hdr</a>.<a class="code" href="structp__ack__hdr__t.html#a9c409a6deaf6d6bb1c8e1d2b73b3bf34">pktInfo</a>);</div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;</div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;    <span class="comment">// Search for retries that match packet received.  If found, removed it from the retry list.</span></div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; cmInstance-&gt;<a class="code" href="structcom__manager__t.html#af1204df7157bed57959a9daa3f83884c">maxEnsuredPackets</a>; i++)</div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;    {</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;        ePkt = &amp;(cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a7fc3af964301b311635445291553551a">ensuredPackets</a>[i]);</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;</div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;        <span class="keywordflow">if</span> (ePkt-&gt;<a class="code" href="structensured__pkt__t.html#a0e33c78ab018ea5e2c608fea068f746d">counter</a> == -2)</div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;        {</div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;            <span class="comment">// No more retries to search for</span></div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;        }</div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;        <span class="keywordflow">if</span> (ePkt-&gt;<a class="code" href="structensured__pkt__t.html#a0e33c78ab018ea5e2c608fea068f746d">counter</a> == -1)</div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;        {</div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;            <span class="comment">// This retry is disabled.  Skip it.</span></div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;        }</div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;</div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;        <span class="comment">// Check packet info matches</span></div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;        <span class="keywordflow">if</span> (ack-&gt;<a class="code" href="structp__ack__t.html#abf05e90920db88b6ca818740dde82dc6">hdr</a>.<a class="code" href="structp__ack__hdr__t.html#a9c409a6deaf6d6bb1c8e1d2b73b3bf34">pktInfo</a> == ePkt-&gt;<a class="code" href="structensured__pkt__t.html#ac5b00d01fa5171945076634d25685345">pkt</a>.<a class="code" href="structpacket__t.html#ac12697f39d3daa260b81fc186a32acf8">hdr</a>.<a class="code" href="structpacket__hdr__t.html#a915f088eeed50b151584165a97598709">pid</a>)</div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;        {</div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;            <a class="code" href="structp__data__hdr__t.html">p_data_hdr_t</a> *dHdr, *eHdr;</div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;</div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;            <span class="keywordflow">switch</span> (ackInfo)</div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;            {</div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;                <span class="keywordflow">default</span>:</div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;                <span class="comment">// Custom/Specific Packets</span></div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="_i_s_comm_8h.html#ac6e603670e69c96b8f8d3ad9ef9d7920">PID_STOP_BROADCASTS_ALL_PORTS</a>: <span class="comment">// No body ID available</span></div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;                ePkt-&gt;<a class="code" href="structensured__pkt__t.html#a0e33c78ab018ea5e2c608fea068f746d">counter</a> = -1;                 <span class="comment">// indicate disabled retry</span></div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;</div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="_i_s_comm_8h.html#ad8310776b70fca7c3b56b2734a68ad9f">PID_SET_DATA</a>:</div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;                dHdr = (<a class="code" href="structp__data__hdr__t.html">p_data_hdr_t</a>*)ack-&gt;<a class="code" href="structp__ack__t.html#a2c304755ebea9c13682813a6edd44a1a">buf</a>;</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;                eHdr = (<a class="code" href="structp__data__hdr__t.html">p_data_hdr_t</a>*)(ePkt-&gt;<a class="code" href="structensured__pkt__t.html#aeb7cc782edb497b401824b9a7cc458f9">pktBody</a>);</div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;</div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;                <span class="keywordflow">if</span> (dHdr-&gt;<a class="code" href="structp__data__hdr__t.html#a0a70811dba0872fe68a2d58c24cb7894">id</a> == eHdr-&gt;<a class="code" href="structp__data__hdr__t.html#a0a70811dba0872fe68a2d58c24cb7894">id</a> &amp;&amp;</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;                dHdr-&gt;<a class="code" href="structp__data__hdr__t.html#ae4e77713f907776d843284114634d642">size</a> == eHdr-&gt;<a class="code" href="structp__data__hdr__t.html#ae4e77713f907776d843284114634d642">size</a> &amp;&amp;</div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;                dHdr-&gt;<a class="code" href="structp__data__hdr__t.html#a5671779d9843a522942f60cbca2dee18">offset</a> == eHdr-&gt;<a class="code" href="structp__data__hdr__t.html#a5671779d9843a522942f60cbca2dee18">offset</a>)</div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;                {</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;                    ePkt-&gt;<a class="code" href="structensured__pkt__t.html#a0e33c78ab018ea5e2c608fea068f746d">counter</a> = -1;             <span class="comment">// indicate disabled retry</span></div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;                }</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;            }</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;        }</div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;    }</div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;    <span class="comment">// Update last retry indicator</span></div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;    <span class="keywordflow">for</span> (i = cmInstance-&gt;<a class="code" href="structcom__manager__t.html#af1204df7157bed57959a9daa3f83884c">maxEnsuredPackets</a> - 1; i &gt;= 0; i--)</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;    {</div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;        <span class="comment">// Current is enabled so stop</span></div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;        <span class="keywordflow">if</span> (cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a7fc3af964301b311635445291553551a">ensuredPackets</a>[i].<a class="code" href="structensured__pkt__t.html#a0e33c78ab018ea5e2c608fea068f746d">counter</a> &gt;= 0)</div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;        {</div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;        }</div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;        cmInstance-&gt;<a class="code" href="structcom__manager__t.html#a7fc3af964301b311635445291553551a">ensuredPackets</a>[i].<a class="code" href="structensured__pkt__t.html#a0e33c78ab018ea5e2c608fea068f746d">counter</a> = -2;         <span class="comment">// Indicate no more retries in list</span></div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;    }</div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;}</div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;</div><div class="line"><a name="l01873"></a><span class="lineno"><a class="line" href="com__manager_8h.html#a202229d24b4a3d1a7ec9880ec5e309b8"> 1873</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="com__manager_8c.html#a202229d24b4a3d1a7ec9880ec5e309b8">comManagerValidateBaudRate</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> baudRate)</div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;{</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;    <span class="comment">// Valid baudrates for InertialSense hardware</span></div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; <a class="code" href="_i_s_constants_8h.html#ae165d3d36e78851434995cd9e9fc8d78">_ARRAY_ELEMENT_COUNT</a>(<a class="code" href="_i_s_comm_8c.html#a5844b6fb9de7d000eb3f72ab4dc55f4e">g_validBaudRates</a>); i++)</div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;    {</div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="_i_s_comm_8c.html#a5844b6fb9de7d000eb3f72ab4dc55f4e">g_validBaudRates</a>[i] == baudRate)</div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;        {</div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;            <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;        }</div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;    }</div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;}</div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;</div><div class="ttc" id="com__manager_8c_html_a8e579189eb6108310736f30327a0cd0b"><div class="ttname"><a href="com__manager_8c.html#a8e579189eb6108310736f30327a0cd0b">comManagerDisableData</a></div><div class="ttdeci">int comManagerDisableData(int pHandle, uint32_t dataId)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l00650">com_manager.c:650</a></div></div>
<div class="ttc" id="structcom__manager__status__t_html_a9b358bcb95013a3606a763c35a66538d"><div class="ttname"><a href="structcom__manager__status__t.html#a9b358bcb95013a3606a763c35a66538d">com_manager_status_t::rxPktCount</a></div><div class="ttdeci">uint32_t rxPktCount</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00098">com_manager.h:98</a></div></div>
<div class="ttc" id="structcom__manager__t_html_aea2db79a0cfa6806c350f03a1ed11734"><div class="ttname"><a href="structcom__manager__t.html#aea2db79a0cfa6806c350f03a1ed11734">com_manager_t::regData</a></div><div class="ttdeci">registered_data_t regData[DID_COUNT]</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00224">com_manager.h:224</a></div></div>
<div class="ttc" id="com__manager_8c_html_ae13ccb8e9ac757f7fe40e212f9c92616"><div class="ttname"><a href="com__manager_8c.html#ae13ccb8e9ac757f7fe40e212f9c92616">comManagerSendDataNoAck</a></div><div class="ttdeci">int comManagerSendDataNoAck(int pHandle, uint32_t dataId, void *dataPtr, int dataSize, int dataOffset)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l00602">com_manager.c:602</a></div></div>
<div class="ttc" id="structpacket__t_html_a4955d2c7f0cacef9987e6e33a7dfc885"><div class="ttname"><a href="structpacket__t.html#a4955d2c7f0cacef9987e6e33a7dfc885">packet_t::body</a></div><div class="ttdeci">bufPtr_t body</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00468">ISComm.h:468</a></div></div>
<div class="ttc" id="structensured__pkt__t_html_ac5b00d01fa5171945076634d25685345"><div class="ttname"><a href="structensured__pkt__t.html#ac5b00d01fa5171945076634d25685345">ensured_pkt_t::pkt</a></div><div class="ttdeci">packet_t pkt</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00076">com_manager.h:76</a></div></div>
<div class="ttc" id="structcom__manager__t_html_a7fc3af964301b311635445291553551a"><div class="ttname"><a href="structcom__manager__t.html#a7fc3af964301b311635445291553551a">com_manager_t::ensuredPackets</a></div><div class="ttdeci">ensured_pkt_t * ensuredPackets</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00230">com_manager.h:230</a></div></div>
<div class="ttc" id="com__manager_8c_html_a96bbc21cd912ec5d432163a706c93bb5"><div class="ttname"><a href="com__manager_8c.html#a96bbc21cd912ec5d432163a706c93bb5">comManagerSendDataInstance</a></div><div class="ttdeci">int comManagerSendDataInstance(CMHANDLE cmInstance, int pHandle, uint32_t dataId, void *dataPtr, int dataSize, int dataOffset)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l00583">com_manager.c:583</a></div></div>
<div class="ttc" id="com__manager_8h_html_a0d626c2c2ae7b974b2daa2fc3080029d"><div class="ttname"><a href="com__manager_8h.html#a0d626c2c2ae7b974b2daa2fc3080029d">pfnComManagerSendBufferAvailableBytes</a></div><div class="ttdeci">int(* pfnComManagerSendBufferAvailableBytes)(CMHANDLE cmHandle, int pHandle)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00161">com_manager.h:161</a></div></div>
<div class="ttc" id="structcom__manager__buffers__t_html_a2679dfcb91d2fdd6b27dc803e02e1328"><div class="ttname"><a href="structcom__manager__buffers__t.html#a2679dfcb91d2fdd6b27dc803e02e1328">com_manager_buffers_t::ensuredPackets</a></div><div class="ttdeci">ensured_pkt_t * ensuredPackets</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00131">com_manager.h:131</a></div></div>
<div class="ttc" id="structcom__manager__buffers__t_html_afa906788fb790e91801c0e2d3fc4fbf2"><div class="ttname"><a href="structcom__manager__buffers__t.html#afa906788fb790e91801c0e2d3fc4fbf2">com_manager_buffers_t::broadcastMsgSize</a></div><div class="ttdeci">uint32_t broadcastMsgSize</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00129">com_manager.h:129</a></div></div>
<div class="ttc" id="structcom__manager__t_html_a160ec6a0aed3e2c8ef5aefab78b4f085"><div class="ttname"><a href="structcom__manager__t.html#a160ec6a0aed3e2c8ef5aefab78b4f085">com_manager_t::asciiMessageHandler</a></div><div class="ttdeci">pfnComManagerAsciiMessageHandler asciiMessageHandler</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00233">com_manager.h:233</a></div></div>
<div class="ttc" id="structcom__manager__t_html_aca2b8672eb68926dc59f47d615492c2d"><div class="ttname"><a href="structcom__manager__t.html#aca2b8672eb68926dc59f47d615492c2d">com_manager_t::rmcHandler</a></div><div class="ttdeci">pfnComManagerAsapMsg rmcHandler</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00264">com_manager.h:264</a></div></div>
<div class="ttc" id="com__manager_8c_html_a750c925ebe5c23deeecd6c3dc47df2c9"><div class="ttname"><a href="com__manager_8c.html#a750c925ebe5c23deeecd6c3dc47df2c9">comManagerSendRawData</a></div><div class="ttdeci">int comManagerSendRawData(int pHandle, uint32_t dataId, void *dataPtr, int dataSize, int dataOffset)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l00626">com_manager.c:626</a></div></div>
<div class="ttc" id="com__manager_8c_html_a77e8440a1bacfa6c2427174f8ffe2a6b"><div class="ttname"><a href="com__manager_8c.html#a77e8440a1bacfa6c2427174f8ffe2a6b">comManagerRegisterASCII</a></div><div class="ttdeci">void comManagerRegisterASCII(asciiMessageMap_t *asciiMessages, int asciiMessagesCount, pfnComManagerAsciiMessageHandler msgFnc, pfnComManagerAsciiMessageHandler msgFncPost)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l00250">com_manager.c:250</a></div></div>
<div class="ttc" id="structpkt__info__t_html_afe0ed5c632ebcc87099c77ff967433d5"><div class="ttname"><a href="structpkt__info__t.html#afe0ed5c632ebcc87099c77ff967433d5">pkt_info_t::hdr</a></div><div class="ttdeci">packet_hdr_t hdr</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00474">ISComm.h:474</a></div></div>
<div class="ttc" id="structpacket__hdr__t_html_aae0969a547bd5ea711e2fe7e2d9a5f4e"><div class="ttname"><a href="structpacket__hdr__t.html#aae0969a547bd5ea711e2fe7e2d9a5f4e">packet_hdr_t::startByte</a></div><div class="ttdeci">uint8_t startByte</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00427">ISComm.h:427</a></div></div>
<div class="ttc" id="com__manager_8c_html_a8aa67e959b62f86989c00aa923549304"><div class="ttname"><a href="com__manager_8c.html#a8aa67e959b62f86989c00aa923549304">asciiMessageCompare</a></div><div class="ttdeci">int asciiMessageCompare(const void *elem1, const void *elem2)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l00242">com_manager.c:242</a></div></div>
<div class="ttc" id="structcom__manager__buffers__t_html_af5572549ba5acc41d2f6c95d6fd51a7d"><div class="ttname"><a href="structcom__manager__buffers__t.html#af5572549ba5acc41d2f6c95d6fd51a7d">com_manager_buffers_t::packetContinuationSize</a></div><div class="ttdeci">uint32_t packetContinuationSize</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00135">com_manager.h:135</a></div></div>
<div class="ttc" id="com__manager_8c_html_a96f45191814da82deddfedfa0bdabb78"><div class="ttname"><a href="com__manager_8c.html#a96f45191814da82deddfedfa0bdabb78">comManagerInitInstance</a></div><div class="ttdeci">int comManagerInitInstance(CMHANDLE cmHandle, int numHandles, int maxEnsuredPackets, int stepPeriodMilliseconds, int retryCount, pfnComManagerRead readFnc, pfnComManagerSend sendFnc, pfnComManagerSendBufferAvailableBytes txFreeFnc, pfnComManagerPostRead pstRxFnc, pfnComManagerPostAck pstAckFnc, pfnComManagerDisableBroadcasts disableBcastFnc, com_manager_buffers_t *buffers)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l00112">com_manager.c:112</a></div></div>
<div class="ttc" id="structbuf_tx_rx_ptr__t_html_aa35ef37b9fa29843a3f96140484c3dce"><div class="ttname"><a href="structbuf_tx_rx_ptr__t.html#aa35ef37b9fa29843a3f96140484c3dce">bufTxRxPtr_t::size</a></div><div class="ttdeci">uint32_t size</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00329">ISComm.h:329</a></div></div>
<div class="ttc" id="structcom__manager__t_html_a01a38214bdf57c48d70a7b6c7dbdf32c"><div class="ttname"><a href="structcom__manager__t.html#a01a38214bdf57c48d70a7b6c7dbdf32c">com_manager_t::broadcastMessages</a></div><div class="ttdeci">broadcast_msg_t * broadcastMessages</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00238">com_manager.h:238</a></div></div>
<div class="ttc" id="_i_s_comm_8h_html_ae8a53e32ddcd42ac1df8e6bdf6a36eefaf14bc75c3dcf40d15b4851c4990cb2df"><div class="ttname"><a href="_i_s_comm_8h.html#ae8a53e32ddcd42ac1df8e6bdf6a36eefaf14bc75c3dcf40d15b4851c4990cb2df">asciiTypeDouble</a></div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00345">ISComm.h:345</a></div></div>
<div class="ttc" id="com__manager_8c_html_a2a8e7beee9874f9f2cbc9669186dbba3"><div class="ttname"><a href="com__manager_8c.html#a2a8e7beee9874f9f2cbc9669186dbba3">comManagerGetStatus</a></div><div class="ttdeci">com_manager_status_t * comManagerGetStatus(int pHandle)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l00519">com_manager.c:519</a></div></div>
<div class="ttc" id="com__manager_8c_html_a202229d24b4a3d1a7ec9880ec5e309b8"><div class="ttname"><a href="com__manager_8c.html#a202229d24b4a3d1a7ec9880ec5e309b8">comManagerValidateBaudRate</a></div><div class="ttdeci">int comManagerValidateBaudRate(unsigned int baudRate)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l01873">com_manager.c:1873</a></div></div>
<div class="ttc" id="com__manager_8c_html_aae1426c5c3c8c473a70adcbd634eb8fc"><div class="ttname"><a href="com__manager_8c.html#aae1426c5c3c8c473a70adcbd634eb8fc">PARSE_DOUBLE</a></div><div class="ttdeci">#define PARSE_DOUBLE(str)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l00023">com_manager.c:23</a></div></div>
<div class="ttc" id="structbroadcast__msg__t_html_a3e537b906a9b04fc9c667a65d5cbd9d5"><div class="ttname"><a href="structbroadcast__msg__t.html#a3e537b906a9b04fc9c667a65d5cbd9d5">broadcast_msg_t::counter</a></div><div class="ttdeci">int32_t counter</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00051">com_manager.h:51</a></div></div>
<div class="ttc" id="com__manager_8c_html_a530fd5a94ed593dd66ec7cdeee00b411"><div class="ttname"><a href="com__manager_8c.html#a530fd5a94ed593dd66ec7cdeee00b411">MSG_PERIOD_DISABLED</a></div><div class="ttdeci">#define MSG_PERIOD_DISABLED</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l00029">com_manager.c:29</a></div></div>
<div class="ttc" id="structcom__manager__status__t_html_ae21797145c303bff1e0df2126550232d"><div class="ttname"><a href="structcom__manager__status__t.html#ae21797145c303bff1e0df2126550232d">com_manager_status_t::passThroughBytes</a></div><div class="ttdeci">uint32_t passThroughBytes</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00116">com_manager.h:116</a></div></div>
<div class="ttc" id="_i_s_constants_8h_html_a89279935d2e2d0bcdc26cdf9e2ba5b1e"><div class="ttname"><a href="_i_s_constants_8h.html#a89279935d2e2d0bcdc26cdf9e2ba5b1e">_MIN</a></div><div class="ttdeci">#define _MIN(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_constants_8h_source.html#l00294">ISConstants.h:294</a></div></div>
<div class="ttc" id="com__manager_8c_html_a75d553e17d45e09a81b90f5bbbeb1166"><div class="ttname"><a href="com__manager_8c.html#a75d553e17d45e09a81b90f5bbbeb1166">comManagerGetRegisteredDataInfo</a></div><div class="ttdeci">bufTxRxPtr_t * comManagerGetRegisteredDataInfo(uint32_t dataId)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l01044">com_manager.c:1044</a></div></div>
<div class="ttc" id="com__manager_8h_html_a4d1cf2c64ae86f8dfc4c0976651fba6a"><div class="ttname"><a href="com__manager_8h.html#a4d1cf2c64ae86f8dfc4c0976651fba6a">pfnComManagerPostRead</a></div><div class="ttdeci">void(* pfnComManagerPostRead)(CMHANDLE cmHandle, int pHandle, p_data_t *dataRead)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00164">com_manager.h:164</a></div></div>
<div class="ttc" id="structbuf_tx_rx_ptr__t_html_a3c8e53783acdd89e12c360315fbaac0e"><div class="ttname"><a href="structbuf_tx_rx_ptr__t.html#a3c8e53783acdd89e12c360315fbaac0e">bufTxRxPtr_t::rxPtr</a></div><div class="ttdeci">uint8_t * rxPtr</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00326">ISComm.h:326</a></div></div>
<div class="ttc" id="_i_s_constants_8h_html_a9bd7d3f2ca104eaaecbd97846039bbdc"><div class="ttname"><a href="_i_s_constants_8h.html#a9bd7d3f2ca104eaaecbd97846039bbdc">_LIMIT2</a></div><div class="ttdeci">#define _LIMIT2(x, xmin, xmax)</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_constants_8h_source.html#l00310">ISConstants.h:310</a></div></div>
<div class="ttc" id="_i_s_comm_8h_html_ae8a53e32ddcd42ac1df8e6bdf6a36eefa32398ad4aa75d3c969114a9963804957"><div class="ttname"><a href="_i_s_comm_8h.html#ae8a53e32ddcd42ac1df8e6bdf6a36eefa32398ad4aa75d3c969114a9963804957">asciiTypeInt</a></div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00336">ISComm.h:336</a></div></div>
<div class="ttc" id="_i_s_comm_8h_html_a4f5c35a4a8d7bc7011d154f678a44107"><div class="ttname"><a href="_i_s_comm_8h.html#a4f5c35a4a8d7bc7011d154f678a44107">RTCM3_HEADER_SIZE</a></div><div class="ttdeci">#define RTCM3_HEADER_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00240">ISComm.h:240</a></div></div>
<div class="ttc" id="_i_s_comm_8c_html_ac31f64bb01078edee96ed0326fae3fe4"><div class="ttname"><a href="_i_s_comm_8c.html#ac31f64bb01078edee96ed0326fae3fe4">is_decode_binary_packet</a></div><div class="ttdeci">int is_decode_binary_packet(packet_t *pkt, unsigned char *pbuf, int pbufSize)</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8c_source.html#l00804">ISComm.c:804</a></div></div>
<div class="ttc" id="com__manager_8c_html_a686bc9b96dac380b2a986cf808056d15"><div class="ttname"><a href="com__manager_8c.html#a686bc9b96dac380b2a986cf808056d15">PARSE_FLOAT</a></div><div class="ttdeci">#define PARSE_FLOAT(str)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l00024">com_manager.c:24</a></div></div>
<div class="ttc" id="structcom__manager__t_html_a03cb7e17301933e8c57c17ca36d51c34"><div class="ttname"><a href="structcom__manager__t.html#a03cb7e17301933e8c57c17ca36d51c34">com_manager_t::pstRxFnc</a></div><div class="ttdeci">pfnComManagerPostRead pstRxFnc</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00215">com_manager.h:215</a></div></div>
<div class="ttc" id="structcom__manager__status__t_html_a8212909888b506491643d391cd7da2c3"><div class="ttname"><a href="structcom__manager__status__t.html#a8212909888b506491643d391cd7da2c3">com_manager_status_t::flags</a></div><div class="ttdeci">uint8_t flags</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00110">com_manager.h:110</a></div></div>
<div class="ttc" id="structcom__manager__t_html_ac70b1bd3d8e2c27fe81aab2b9221d294"><div class="ttname"><a href="structcom__manager__t.html#ac70b1bd3d8e2c27fe81aab2b9221d294">com_manager_t::txFreeCallback</a></div><div class="ttdeci">pfnComManagerSendBufferAvailableBytes txFreeCallback</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00212">com_manager.h:212</a></div></div>
<div class="ttc" id="_i_s_constants_8h_html_a089e3be78d482b1bfebf6f9c9b83982b"><div class="ttname"><a href="_i_s_constants_8h.html#a089e3be78d482b1bfebf6f9c9b83982b">_CLAMP</a></div><div class="ttdeci">#define _CLAMP(v, minV, maxV)</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_constants_8h_source.html#l00298">ISConstants.h:298</a></div></div>
<div class="ttc" id="structbuf_ptr__t_html"><div class="ttname"><a href="structbuf_ptr__t.html">bufPtr_t</a></div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00310">ISComm.h:310</a></div></div>
<div class="ttc" id="com__manager_8h_html_a74683b05c0ff3f3c394e2a391e7bb42f"><div class="ttname"><a href="com__manager_8h.html#a74683b05c0ff3f3c394e2a391e7bb42f">pfnComManagerPassThrough</a></div><div class="ttdeci">void(* pfnComManagerPassThrough)(CMHANDLE cmHandle, com_manager_pass_through_t passThroughType, int pHandle, const unsigned char *data, int dataLength)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00179">com_manager.h:179</a></div></div>
<div class="ttc" id="structp__data__hdr__t_html_a0a70811dba0872fe68a2d58c24cb7894"><div class="ttname"><a href="structp__data__hdr__t.html#a0a70811dba0872fe68a2d58c24cb7894">p_data_hdr_t::id</a></div><div class="ttdeci">uint32_t id</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00483">ISComm.h:483</a></div></div>
<div class="ttc" id="com__manager_8c_html_a613a5a7fafd2403866d7e0aa5625272d"><div class="ttname"><a href="com__manager_8c.html#a613a5a7fafd2403866d7e0aa5625272d">comManagerGetDataRmcInstance</a></div><div class="ttdeci">void comManagerGetDataRmcInstance(CMHANDLE cmInstance, int pHandle, uint64_t rmcBits, uint32_t rmcOptions)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l00569">com_manager.c:569</a></div></div>
<div class="ttc" id="structp__data__hdr__t_html_ae4e77713f907776d843284114634d642"><div class="ttname"><a href="structp__data__hdr__t.html#ae4e77713f907776d843284114634d642">p_data_hdr_t::size</a></div><div class="ttdeci">uint32_t size</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00486">ISComm.h:486</a></div></div>
<div class="ttc" id="structbuffer__t_html_ac75c7fd252491f31cc9fa3458aafad8d"><div class="ttname"><a href="structbuffer__t.html#ac75c7fd252491f31cc9fa3458aafad8d">buffer_t::buf</a></div><div class="ttdeci">uint8_t buf[PKT_BUF_SIZE]</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00306">ISComm.h:306</a></div></div>
<div class="ttc" id="com__manager_8c_html_a4cfcb8456dff98bf91e00415845fafc3"><div class="ttname"><a href="com__manager_8c.html#a4cfcb8456dff98bf91e00415845fafc3">comManagerGetRegisteredDataInfoInstance</a></div><div class="ttdeci">bufTxRxPtr_t * comManagerGetRegisteredDataInfoInstance(CMHANDLE _cmInstance, uint32_t dataId)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l01049">com_manager.c:1049</a></div></div>
<div class="ttc" id="structcom__manager__t_html_ad62909fc9a34160f2b2707506b8c12f4"><div class="ttname"><a href="structcom__manager__t.html#ad62909fc9a34160f2b2707506b8c12f4">com_manager_t::asciiMessageHandlerPost</a></div><div class="ttdeci">pfnComManagerAsciiMessageHandler asciiMessageHandlerPost</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00234">com_manager.h:234</a></div></div>
<div class="ttc" id="com__manager_8c_html_ae1b28b8ce3e6b22fd7640202d5c47a19"><div class="ttname"><a href="com__manager_8c.html#ae1b28b8ce3e6b22fd7640202d5c47a19">comManagerDisableBroadcasts</a></div><div class="ttdeci">void comManagerDisableBroadcasts(int pHandle)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l01215">com_manager.c:1215</a></div></div>
<div class="ttc" id="structregistered__data__t_html_a004d79bbd9213f90e3409565f1ef48cc"><div class="ttname"><a href="structregistered__data__t.html#a004d79bbd9213f90e3409565f1ef48cc">registered_data_t::pstRxFnc</a></div><div class="ttdeci">pfnComManagerPostRead pstRxFnc</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00194">com_manager.h:194</a></div></div>
<div class="ttc" id="com__manager_8c_html_a8752fd18e0f3378d4feab9f8398fa172"><div class="ttname"><a href="com__manager_8c.html#a8752fd18e0f3378d4feab9f8398fa172">updatePacketRetryData</a></div><div class="ttdeci">void updatePacketRetryData(com_manager_t *cmInstance, packet_t *pkt)</div><div class="ttdoc">Update packet retry. If the specific data requested or acknowledge is received, the retry list is upd...</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l01762">com_manager.c:1762</a></div></div>
<div class="ttc" id="com__manager_8h_html_aa4d655efaad55f4d6669667462d6d822"><div class="ttname"><a href="com__manager_8h.html#aa4d655efaad55f4d6669667462d6d822">pfnComManagerRead</a></div><div class="ttdeci">int(* pfnComManagerRead)(CMHANDLE cmHandle, int pHandle, unsigned char *readIntoBytes, int numberOfBytes)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00155">com_manager.h:155</a></div></div>
<div class="ttc" id="structensured__pkt__t_html"><div class="ttname"><a href="structensured__pkt__t.html">ensured_pkt_t</a></div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00073">com_manager.h:73</a></div></div>
<div class="ttc" id="structcom__manager__status__t_html_a8542bc5e9db157565ea3418ed158e070"><div class="ttname"><a href="structcom__manager__status__t.html#a8542bc5e9db157565ea3418ed158e070">com_manager_status_t::communicationErrorCount</a></div><div class="ttdeci">uint32_t communicationErrorCount</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00104">com_manager.h:104</a></div></div>
<div class="ttc" id="com__manager_8c_html_ae62f18ac3c8c1dcde204cb554fba53e3"><div class="ttname"><a href="com__manager_8c.html#ae62f18ac3c8c1dcde204cb554fba53e3">stepPacketRetry</a></div><div class="ttdeci">void stepPacketRetry(com_manager_t *cmInstance)</div><div class="ttdoc">stepPacketRetry - Resend the ensured packets after the ENSURE_RETRY_COUNT period if the expected resp...</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l01580">com_manager.c:1580</a></div></div>
<div class="ttc" id="com__manager_8h_html_a70a8b02edd1174af2af3c4a79b465d72"><div class="ttname"><a href="com__manager_8h.html#a70a8b02edd1174af2af3c4a79b465d72">pfnComManagerAsapMsg</a></div><div class="ttdeci">int(* pfnComManagerAsapMsg)(CMHANDLE cmHandle, int pHandle, p_data_get_t *req)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00182">com_manager.h:182</a></div></div>
<div class="ttc" id="com__manager_8h_html_a389c19dc7e581fceacb2828389d54fd2"><div class="ttname"><a href="com__manager_8h.html#a389c19dc7e581fceacb2828389d54fd2">COM_MANAGER_BUF_SIZE_RING_BUFFER</a></div><div class="ttdeci">#define COM_MANAGER_BUF_SIZE_RING_BUFFER(numHandles)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00144">com_manager.h:144</a></div></div>
<div class="ttc" id="com__manager_8h_html_a4ae6f964df346995494b68893bb4dec4"><div class="ttname"><a href="com__manager_8h.html#a4ae6f964df346995494b68893bb4dec4">pfnComManagerSend</a></div><div class="ttdeci">int(* pfnComManagerSend)(CMHANDLE cmHandle, int pHandle, buffer_t *bufferToSend)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00158">com_manager.h:158</a></div></div>
<div class="ttc" id="_i_s_comm_8h_html_ae8a53e32ddcd42ac1df8e6bdf6a36eefa291a1df9c29abd881756c46ba4beec5d"><div class="ttname"><a href="_i_s_comm_8h.html#ae8a53e32ddcd42ac1df8e6bdf6a36eefa291a1df9c29abd881756c46ba4beec5d">asciiTypeFloat</a></div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00342">ISComm.h:342</a></div></div>
<div class="ttc" id="com__manager_8c_html_a055a98068f64092742e6e50a5167c4a4"><div class="ttname"><a href="com__manager_8c.html#a055a98068f64092742e6e50a5167c4a4">MSG_PERIOD_SEND_ONCE</a></div><div class="ttdeci">#define MSG_PERIOD_SEND_ONCE</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l00028">com_manager.c:28</a></div></div>
<div class="ttc" id="com__manager_8c_html_ae1ab50b97d65b1cc6e1bd806ff0187dc"><div class="ttname"><a href="com__manager_8c.html#ae1ab50b97d65b1cc6e1bd806ff0187dc">disableDidBroadcast</a></div><div class="ttdeci">void disableDidBroadcast(com_manager_t *cmInstance, int pHandle, p_data_disable_t *disable)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l01232">com_manager.c:1232</a></div></div>
<div class="ttc" id="com__manager_8h_html_a15acaf47bda1a0cd59aeb1d0072df930"><div class="ttname"><a href="com__manager_8h.html#a15acaf47bda1a0cd59aeb1d0072df930">com_manager_pass_through_t</a></div><div class="ttdeci">com_manager_pass_through_t</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00030">com_manager.h:30</a></div></div>
<div class="ttc" id="structensured__pkt__t_html_a87e055f58870fc9f8bf6074f55e66301"><div class="ttname"><a href="structensured__pkt__t.html#a87e055f58870fc9f8bf6074f55e66301">ensured_pkt_t::pHandle</a></div><div class="ttdeci">int pHandle</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00085">com_manager.h:85</a></div></div>
<div class="ttc" id="com__manager_8c_html_a2d21a50f10c5d29e4b628166c38205a8"><div class="ttname"><a href="com__manager_8c.html#a2d21a50f10c5d29e4b628166c38205a8">comManagerRegisterInstance</a></div><div class="ttdeci">void comManagerRegisterInstance(CMHANDLE cmInstance_, uint32_t dataId, pfnComManagerPreSend txFnc, pfnComManagerPostRead pstRxFnc, const void *txDataPtr, void *rxDataPtr, int dataSize, uint8_t pktFlags)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l00275">com_manager.c:275</a></div></div>
<div class="ttc" id="_i_s_comm_8h_html_a739834da5d5205125ac7115741c30c63ab65949193083fea6f789b9b447df716f"><div class="ttname"><a href="_i_s_comm_8h.html#a739834da5d5205125ac7115741c30c63ab65949193083fea6f789b9b447df716f">PSC_START_BYTE</a></div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00386">ISComm.h:386</a></div></div>
<div class="ttc" id="structbroadcast__msg__t_html_a01d6b19c01ac83232c132f8beaeb3368"><div class="ttname"><a href="structbroadcast__msg__t.html#a01d6b19c01ac83232c132f8beaeb3368">broadcast_msg_t::pHandle</a></div><div class="ttdeci">int32_t pHandle</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00057">com_manager.h:57</a></div></div>
<div class="ttc" id="com__manager_8c_html_ab8cf768e6342dbe0abf16db10f2c7ede"><div class="ttname"><a href="com__manager_8c.html#ab8cf768e6342dbe0abf16db10f2c7ede">comManagerSendInstance</a></div><div class="ttdeci">int comManagerSendInstance(CMHANDLE cmInstance, int pHandle, uint8_t pktInfo, bufPtr_t *bodyHdr, bufPtr_t *txData, uint8_t pktFlags)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l00669">com_manager.c:669</a></div></div>
<div class="ttc" id="com__manager_8c_html_a0f161b11e9a91492c7515c9d59ce8016"><div class="ttname"><a href="com__manager_8c.html#a0f161b11e9a91492c7515c9d59ce8016">sendAck</a></div><div class="ttdeci">void sendAck(com_manager_t *cmInstance, int pHandle, packet_t *pkt, unsigned char pid_ack)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l01381">com_manager.c:1381</a></div></div>
<div class="ttc" id="_i_s_comm_8h_html_aa6a3b4bc4d7eefb123d1e6e954b7978b"><div class="ttname"><a href="_i_s_comm_8h.html#aa6a3b4bc4d7eefb123d1e6e954b7978b">PID_ACK</a></div><div class="ttdeci">#define PID_ACK</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00288">ISComm.h:288</a></div></div>
<div class="ttc" id="data__sets_8h_html_a777819ed9aeeb6f96e9a74764d75064a"><div class="ttname"><a href="data__sets_8h.html#a777819ed9aeeb6f96e9a74764d75064a">DID_COUNT</a></div><div class="ttdeci">#define DID_COUNT</div><div class="ttdef"><b>Definition:</b> <a href="data__sets_8h_source.html#l00135">data_sets.h:135</a></div></div>
<div class="ttc" id="structpacket__t_html_ac12697f39d3daa260b81fc186a32acf8"><div class="ttname"><a href="structpacket__t.html#ac12697f39d3daa260b81fc186a32acf8">packet_t::hdr</a></div><div class="ttdeci">packet_hdr_t hdr</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00465">ISComm.h:465</a></div></div>
<div class="ttc" id="structcom__manager__buffers__t_html_af407f1ad7af8de08124156d829524b0d"><div class="ttname"><a href="structcom__manager__buffers__t.html#af407f1ad7af8de08124156d829524b0d">com_manager_buffers_t::packetContinuation</a></div><div class="ttdeci">void * packetContinuation</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00134">com_manager.h:134</a></div></div>
<div class="ttc" id="structensured__pkt__t_html_aeb7cc782edb497b401824b9a7cc458f9"><div class="ttname"><a href="structensured__pkt__t.html#aeb7cc782edb497b401824b9a7cc458f9">ensured_pkt_t::pktBody</a></div><div class="ttdeci">uint8_t pktBody[PKT_BUF_SIZE]</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00079">com_manager.h:79</a></div></div>
<div class="ttc" id="data__sets_8h_html_a9b78d38da66e91d33bd5fef049125f51"><div class="ttname"><a href="data__sets_8h.html#a9b78d38da66e91d33bd5fef049125f51">DID_RMC</a></div><div class="ttdeci">#define DID_RMC</div><div class="ttdef"><b>Definition:</b> <a href="data__sets_8h_source.html#l00043">data_sets.h:43</a></div></div>
<div class="ttc" id="structbuf_tx_rx_ptr__t_html"><div class="ttname"><a href="structbuf_tx_rx_ptr__t.html">bufTxRxPtr_t</a></div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00320">ISComm.h:320</a></div></div>
<div class="ttc" id="_i_s_comm_8h_html_a77fd73f7c23687368fac3da6984d04cb"><div class="ttname"><a href="_i_s_comm_8h.html#a77fd73f7c23687368fac3da6984d04cb">UBLOX_HEADER_SIZE</a></div><div class="ttdeci">#define UBLOX_HEADER_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00239">ISComm.h:239</a></div></div>
<div class="ttc" id="com__manager_8h_html_aa6f59ccc6e623e7cea518e0924f4e417"><div class="ttname"><a href="com__manager_8h.html#aa6f59ccc6e623e7cea518e0924f4e417">pfnComManagerDisableBroadcasts</a></div><div class="ttdeci">void(* pfnComManagerDisableBroadcasts)(CMHANDLE cmHandle, int pHandle)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00170">com_manager.h:170</a></div></div>
<div class="ttc" id="structcom__manager__t_html_aef5b95591013849e1710861537ed5818"><div class="ttname"><a href="structcom__manager__t.html#aef5b95591013849e1710861537ed5818">com_manager_t::readCallback</a></div><div class="ttdeci">pfnComManagerRead readCallback</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00206">com_manager.h:206</a></div></div>
<div class="ttc" id="com__manager_8c_html_a5653d29c5faff7390f7568db9d6918cd"><div class="ttname"><a href="com__manager_8c.html#a5653d29c5faff7390f7568db9d6918cd">comManagerGetStatusInstance</a></div><div class="ttdeci">com_manager_status_t * comManagerGetStatusInstance(CMHANDLE cmInstance, int pHandle)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l00524">com_manager.c:524</a></div></div>
<div class="ttc" id="com__manager_8c_html_a03fb5352fdf7d5a5bba7e9b36e74bb03"><div class="ttname"><a href="com__manager_8c.html#a03fb5352fdf7d5a5bba7e9b36e74bb03">comManagerDisableBroadcastsInstance</a></div><div class="ttdeci">void comManagerDisableBroadcastsInstance(CMHANDLE cmInstance_, int pHandle)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l01220">com_manager.c:1220</a></div></div>
<div class="ttc" id="com__manager_8c_html_a175d42f276eb55ab164e3bc2c2025f66"><div class="ttname"><a href="com__manager_8c.html#a175d42f276eb55ab164e3bc2c2025f66">comManagerGetDataRequestInstance</a></div><div class="ttdeci">int comManagerGetDataRequestInstance(CMHANDLE _cmInstance, int pHandle, p_data_get_t *req)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l01066">com_manager.c:1066</a></div></div>
<div class="ttc" id="com__manager_8c_html_aec43bd8335ac3a31fe2e668c7611b209"><div class="ttname"><a href="com__manager_8c.html#aec43bd8335ac3a31fe2e668c7611b209">processBinaryPacket</a></div><div class="ttdeci">int processBinaryPacket(com_manager_t *cmInstance, int pHandle, unsigned char *dataStart, unsigned char *data, int dataLength, unsigned char *additionalDataAvailable)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l01455">com_manager.c:1455</a></div></div>
<div class="ttc" id="structascii_message_map__t_html_a321bf44d43b7484a7b206741225a0a1a"><div class="ttname"><a href="structascii_message_map__t.html#a321bf44d43b7484a7b206741225a0a1a">asciiMessageMap_t::messageId</a></div><div class="ttdeci">unsigned char messageId[4]</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00408">ISComm.h:408</a></div></div>
<div class="ttc" id="com__manager_8c_html_ae68296caef3ece6bdd0faeae69b6e4e1"><div class="ttname"><a href="com__manager_8c.html#ae68296caef3ece6bdd0faeae69b6e4e1">MIN_REQUEST_PERIOD_MS</a></div><div class="ttdeci">#define MIN_REQUEST_PERIOD_MS</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l00026">com_manager.c:26</a></div></div>
<div class="ttc" id="structascii_message_map__t_html_aff37daca4dfc68b724b2837748dc4cd9"><div class="ttname"><a href="structascii_message_map__t.html#aff37daca4dfc68b724b2837748dc4cd9">asciiMessageMap_t::fieldsAndOffsets</a></div><div class="ttdeci">uint16_t * fieldsAndOffsets</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00420">ISComm.h:420</a></div></div>
<div class="ttc" id="com__manager_8c_html_a0e2d283526ff7000a71192b8f63b7777"><div class="ttname"><a href="com__manager_8c.html#a0e2d283526ff7000a71192b8f63b7777">processAsciiRxPacket</a></div><div class="ttdeci">int processAsciiRxPacket(com_manager_t *cmInstance, int pHandle, unsigned char *start, int count)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l00849">com_manager.c:849</a></div></div>
<div class="ttc" id="com__manager_8c_html_acc32b1a0dbfb593f2bf49d52775bff27"><div class="ttname"><a href="com__manager_8c.html#acc32b1a0dbfb593f2bf49d52775bff27">processBinaryRxPacket</a></div><div class="ttdeci">int processBinaryRxPacket(com_manager_t *cmInstance, int pHandle, packet_t *pkt, unsigned char additionalDataAvailable)</div><div class="ttdoc">Process binary packet content:</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l00868">com_manager.c:868</a></div></div>
<div class="ttc" id="structbroadcast__msg__t_html_aa892836a942a0dc14a32e498880013dd"><div class="ttname"><a href="structbroadcast__msg__t.html#aa892836a942a0dc14a32e498880013dd">broadcast_msg_t::dataHdr</a></div><div class="ttdeci">p_data_hdr_t dataHdr</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00048">com_manager.h:48</a></div></div>
<div class="ttc" id="com__manager_8c_html_a993761774598a78d7bcb807aa493ed4a"><div class="ttname"><a href="com__manager_8c.html#a993761774598a78d7bcb807aa493ed4a">updatePacketRetryAck</a></div><div class="ttdeci">void updatePacketRetryAck(com_manager_t *cmInstance, packet_t *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l01806">com_manager.c:1806</a></div></div>
<div class="ttc" id="structregistered__data__t_html"><div class="ttname"><a href="structregistered__data__t.html">registered_data_t</a></div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00185">com_manager.h:185</a></div></div>
<div class="ttc" id="structpkt__info__t_html_a4c09f07154b356ff1c99b71e63dd089c"><div class="ttname"><a href="structpkt__info__t.html#a4c09f07154b356ff1c99b71e63dd089c">pkt_info_t::bodyHdr</a></div><div class="ttdeci">bufPtr_t bodyHdr</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00475">ISComm.h:475</a></div></div>
<div class="ttc" id="structp__ack__hdr__t_html_a9c409a6deaf6d6bb1c8e1d2b73b3bf34"><div class="ttname"><a href="structp__ack__hdr__t.html#a9c409a6deaf6d6bb1c8e1d2b73b3bf34">p_ack_hdr_t::pktInfo</a></div><div class="ttdeci">uint32_t pktInfo</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00532">ISComm.h:532</a></div></div>
<div class="ttc" id="com__manager_8c_html_a2812b540bae8534ce94668e0b4c5c617"><div class="ttname"><a href="com__manager_8c.html#a2812b540bae8534ce94668e0b4c5c617">comManagerSetPassThrough</a></div><div class="ttdeci">void comManagerSetPassThrough(pfnComManagerPassThrough handler)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l00483">com_manager.c:483</a></div></div>
<div class="ttc" id="structregistered__data__t_html_afd7c6955e72c835d5042524079925376"><div class="ttname"><a href="structregistered__data__t.html#afd7c6955e72c835d5042524079925376">registered_data_t::preTxFnc</a></div><div class="ttdeci">pfnComManagerPreSend preTxFnc</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00191">com_manager.h:191</a></div></div>
<div class="ttc" id="com__manager_8c_html_a69751e08cb2002d64b380e2ae90d160e"><div class="ttname"><a href="com__manager_8c.html#a69751e08cb2002d64b380e2ae90d160e">comManagerGetDataRequest</a></div><div class="ttdeci">int comManagerGetDataRequest(int pHandle, p_data_get_t *req)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l01061">com_manager.c:1061</a></div></div>
<div class="ttc" id="com__manager_8h_html_a1073351c9cb5c933c1f5ee9e0040a802"><div class="ttname"><a href="com__manager_8h.html#a1073351c9cb5c933c1f5ee9e0040a802">pfnComManagerPreSend</a></div><div class="ttdeci">void(* pfnComManagerPreSend)(CMHANDLE cmHandle, int pHandle)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00173">com_manager.h:173</a></div></div>
<div class="ttc" id="structpkt__info__t_html_a65161add71ddf48083cb3a2f5e10f65f"><div class="ttname"><a href="structpkt__info__t.html#a65161add71ddf48083cb3a2f5e10f65f">pkt_info_t::txData</a></div><div class="ttdeci">bufPtr_t txData</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00476">ISComm.h:476</a></div></div>
<div class="ttc" id="com__manager_8h_html_ae16f35cdf4ed5d9fa40006518b9f3b61"><div class="ttname"><a href="com__manager_8h.html#ae16f35cdf4ed5d9fa40006518b9f3b61">COM_MANAGER_BUF_SIZE_PKT_CONTINUATION</a></div><div class="ttdeci">#define COM_MANAGER_BUF_SIZE_PKT_CONTINUATION(numHandles)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00148">com_manager.h:148</a></div></div>
<div class="ttc" id="_i_s_comm_8h_html_a739834da5d5205125ac7115741c30c63ae9ca61a4078c839bc88b4b49baaebd57"><div class="ttname"><a href="_i_s_comm_8h.html#a739834da5d5205125ac7115741c30c63ae9ca61a4078c839bc88b4b49baaebd57">UBLOX_START_BYTE2</a></div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00398">ISComm.h:398</a></div></div>
<div class="ttc" id="structbroadcast__msg__t_html"><div class="ttname"><a href="structbroadcast__msg__t.html">broadcast_msg_t</a></div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00043">com_manager.h:43</a></div></div>
<div class="ttc" id="structbuffer__t_html"><div class="ttname"><a href="structbuffer__t.html">buffer_t</a></div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00300">ISComm.h:300</a></div></div>
<div class="ttc" id="structcom__manager__status__t_html"><div class="ttname"><a href="structcom__manager__status__t.html">com_manager_status_t</a></div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00089">com_manager.h:89</a></div></div>
<div class="ttc" id="com__manager_8h_html_acc5755cbc1eac0f807fd7a93bac869f0"><div class="ttname"><a href="com__manager_8h.html#acc5755cbc1eac0f807fd7a93bac869f0">COM_MANAGER_BUF_SIZE_STATUS</a></div><div class="ttdeci">#define COM_MANAGER_BUF_SIZE_STATUS(numHandles)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00145">com_manager.h:145</a></div></div>
<div class="ttc" id="com__manager_8c_html_a5153eef615e1ad8cd2025156d1be51d7"><div class="ttname"><a href="com__manager_8c.html#a5153eef615e1ad8cd2025156d1be51d7">comManagerStep</a></div><div class="ttdeci">void comManagerStep(void)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l00304">com_manager.c:304</a></div></div>
<div class="ttc" id="structp__data__get__t_html_a0123a3db2bf728e0d199bcb606123ec8"><div class="ttname"><a href="structp__data__get__t.html#a0123a3db2bf728e0d199bcb606123ec8">p_data_get_t::offset</a></div><div class="ttdeci">uint32_t offset</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00512">ISComm.h:512</a></div></div>
<div class="ttc" id="structp__ack__hdr__t_html_a6e047dce01db1c893021485be63cbb6f"><div class="ttname"><a href="structp__ack__hdr__t.html#a6e047dce01db1c893021485be63cbb6f">p_ack_hdr_t::pktCounter</a></div><div class="ttdeci">uint32_t pktCounter</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00535">ISComm.h:535</a></div></div>
<div class="ttc" id="structp__ack__t_html_abf05e90920db88b6ca818740dde82dc6"><div class="ttname"><a href="structp__ack__t.html#abf05e90920db88b6ca818740dde82dc6">p_ack_t::hdr</a></div><div class="ttdeci">p_ack_hdr_t hdr</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00542">ISComm.h:542</a></div></div>
<div class="ttc" id="structcom__manager__buffers__t_html_a0ee871f443915dd29829988bff07904a"><div class="ttname"><a href="structcom__manager__buffers__t.html#a0ee871f443915dd29829988bff07904a">com_manager_buffers_t::ensuredPacketsSize</a></div><div class="ttdeci">uint32_t ensuredPacketsSize</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00132">com_manager.h:132</a></div></div>
<div class="ttc" id="com__manager_8c_html_aa9b75e21fa2d1c9fb04166a1b80d2d9e"><div class="ttname"><a href="com__manager_8c.html#aa9b75e21fa2d1c9fb04166a1b80d2d9e">validateAsciiChecksum</a></div><div class="ttdeci">int validateAsciiChecksum(com_manager_t *cmInstance, unsigned char *buf, int count)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l00724">com_manager.c:724</a></div></div>
<div class="ttc" id="com__manager_8h_html_a94b57baf71498218c44b4d81e3e3f0a0"><div class="ttname"><a href="com__manager_8h.html#a94b57baf71498218c44b4d81e3e3f0a0">COM_MANAGER_BUF_SIZE_BCAST_MSG</a></div><div class="ttdeci">#define COM_MANAGER_BUF_SIZE_BCAST_MSG(max_num_bcast_msgs)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00146">com_manager.h:146</a></div></div>
<div class="ttc" id="structring__buffer__t_html_a35b6546f057e9b211c1f51f8537388dc"><div class="ttname"><a href="structring__buffer__t.html#a35b6546f057e9b211c1f51f8537388dc">ring_buffer_t::buf</a></div><div class="ttdeci">unsigned char buf[RING_BUFFER_SIZE]</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00066">com_manager.h:66</a></div></div>
<div class="ttc" id="structcom__manager__buffers__t_html_a93c0d4cd565b3d1189cdcfecccc65e6d"><div class="ttname"><a href="structcom__manager__buffers__t.html#a93c0d4cd565b3d1189cdcfecccc65e6d">com_manager_buffers_t::statusSize</a></div><div class="ttdeci">uint32_t statusSize</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00126">com_manager.h:126</a></div></div>
<div class="ttc" id="com__manager_8c_html_a1872147ebc2cceda89f51b04edcc82e8"><div class="ttname"><a href="com__manager_8c.html#a1872147ebc2cceda89f51b04edcc82e8">registerPacketRetry</a></div><div class="ttdeci">packet_t * registerPacketRetry(com_manager_t *cmInstance, int pHandle, uint8_t pid, unsigned char data[], unsigned int dataSize)</div><div class="ttdoc">registerPacketRetry - Saves data and packet header info to a retry list that will be resent if the co...</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l01622">com_manager.c:1622</a></div></div>
<div class="ttc" id="structring__buffer__t_html_a5bfd66636fb127b97f58ddd9eecb960d"><div class="ttname"><a href="structring__buffer__t.html#a5bfd66636fb127b97f58ddd9eecb960d">ring_buffer_t::endIndex</a></div><div class="ttdeci">uint32_t endIndex</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00068">com_manager.h:68</a></div></div>
<div class="ttc" id="structcom__manager__t_html_ab98e59906ef79731a315b0f404f17bc3"><div class="ttname"><a href="structcom__manager__t.html#ab98e59906ef79731a315b0f404f17bc3">com_manager_t::numHandes</a></div><div class="ttdeci">int32_t numHandes</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00243">com_manager.h:243</a></div></div>
<div class="ttc" id="com__manager_8c_html_a631d359bd470ffd894fbc248a3e0a5d4"><div class="ttname"><a href="com__manager_8c.html#a631d359bd470ffd894fbc248a3e0a5d4">sendPacket</a></div><div class="ttdeci">int sendPacket(com_manager_t *cmInstance, int pHandle, packet_t *dPkt, uint8_t additionalPktFlags)</div><div class="ttdoc">Encode and send out serial port the referenced packet structure.</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l01261">com_manager.c:1261</a></div></div>
<div class="ttc" id="structcom__manager__status__t_html_a0ad6d483eb2fbd825a90a518dad9e0ce"><div class="ttname"><a href="structcom__manager__status__t.html#a0ad6d483eb2fbd825a90a518dad9e0ce">com_manager_status_t::txPktCount</a></div><div class="ttdeci">uint32_t txPktCount</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00101">com_manager.h:101</a></div></div>
<div class="ttc" id="com__manager_8c_html_adefe5ab74a1adf2b17626a35b7b5d8e8"><div class="ttname"><a href="com__manager_8c.html#adefe5ab74a1adf2b17626a35b7b5d8e8">sendDataPacket</a></div><div class="ttdeci">int sendDataPacket(com_manager_t *cmInstance, int pHandle, pkt_info_t *msg)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l01281">com_manager.c:1281</a></div></div>
<div class="ttc" id="structpacket__hdr__t_html"><div class="ttname"><a href="structpacket__hdr__t.html">packet_hdr_t</a></div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00424">ISComm.h:424</a></div></div>
<div class="ttc" id="structcom__manager__t_html"><div class="ttname"><a href="structcom__manager__t.html">com_manager_t</a></div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00200">com_manager.h:200</a></div></div>
<div class="ttc" id="structcom__manager__t_html_af1204df7157bed57959a9daa3f83884c"><div class="ttname"><a href="structcom__manager__t.html#af1204df7157bed57959a9daa3f83884c">com_manager_t::maxEnsuredPackets</a></div><div class="ttdeci">int32_t maxEnsuredPackets</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00246">com_manager.h:246</a></div></div>
<div class="ttc" id="com__manager_8c_html_a3b21e0e3ea5a2fb71bac0c3e36c31622"><div class="ttname"><a href="com__manager_8c.html#a3b21e0e3ea5a2fb71bac0c3e36c31622">comManagerSendEnsured</a></div><div class="ttdeci">int comManagerSendEnsured(int pHandle, uint8_t pktInfo, unsigned char *data, unsigned int dataSize)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l00691">com_manager.c:691</a></div></div>
<div class="ttc" id="structcom__manager__status__t_html_a277a4268d8d1eb8e152c65f016d64f68"><div class="ttname"><a href="structcom__manager__status__t.html#a277a4268d8d1eb8e152c65f016d64f68">com_manager_status_t::rxError</a></div><div class="ttdeci">uint32_t rxError</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00095">com_manager.h:95</a></div></div>
<div class="ttc" id="_i_s_comm_8h_html_a27634099d972a0c65e8a3de17ea9d094"><div class="ttname"><a href="_i_s_comm_8h.html#a27634099d972a0c65e8a3de17ea9d094">PID_GET_DATA</a></div><div class="ttdeci">#define PID_GET_DATA</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00290">ISComm.h:290</a></div></div>
<div class="ttc" id="_i_s_comm_8h_html_a739834da5d5205125ac7115741c30c63aa49dc3f2b3a356aaca93e955456e6856"><div class="ttname"><a href="_i_s_comm_8h.html#a739834da5d5205125ac7115741c30c63aa49dc3f2b3a356aaca93e955456e6856">PSC_ASCII_END_BYTE</a></div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00383">ISComm.h:383</a></div></div>
<div class="ttc" id="com__manager_8c_html_a295549e9a60f31107cf055cdc3c13b28"><div class="ttname"><a href="com__manager_8c.html#a295549e9a60f31107cf055cdc3c13b28">MAX_REQUEST_PERIOD_MS</a></div><div class="ttdeci">#define MAX_REQUEST_PERIOD_MS</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l00027">com_manager.c:27</a></div></div>
<div class="ttc" id="com__manager_8c_html_a9bfdf04b15fa460f0bedcf268e596f42"><div class="ttname"><a href="com__manager_8c.html#a9bfdf04b15fa460f0bedcf268e596f42">comManagerSendRawDataInstance</a></div><div class="ttdeci">int comManagerSendRawDataInstance(CMHANDLE cmInstance, int pHandle, uint32_t dataId, void *dataPtr, int dataSize, int dataOffset)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l00631">com_manager.c:631</a></div></div>
<div class="ttc" id="com__manager_8c_html_a6d8d453c752f85113a253e87285694fa"><div class="ttname"><a href="com__manager_8c.html#a6d8d453c752f85113a253e87285694fa">comManagerGetDataInstance</a></div><div class="ttdeci">void comManagerGetDataInstance(CMHANDLE cmInstance, int pHandle, uint32_t dataId, int offset, int size, int periodMultiple)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l00546">com_manager.c:546</a></div></div>
<div class="ttc" id="structp__data__disable__t_html_aca2ef5d5ec699f32fe117e470f6c1986"><div class="ttname"><a href="structp__data__disable__t.html#aca2ef5d5ec699f32fe117e470f6c1986">p_data_disable_t::id</a></div><div class="ttdeci">uint32_t id</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00525">ISComm.h:525</a></div></div>
<div class="ttc" id="com__manager_8h_html_aa4c7b70d216e3ec5adc54f13afc5ffde"><div class="ttname"><a href="com__manager_8h.html#aa4c7b70d216e3ec5adc54f13afc5ffde">CMHANDLE</a></div><div class="ttdeci">void * CMHANDLE</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00151">com_manager.h:151</a></div></div>
<div class="ttc" id="structpkt__info__t_html"><div class="ttname"><a href="structpkt__info__t.html">pkt_info_t</a></div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00472">ISComm.h:472</a></div></div>
<div class="ttc" id="structbuf_ptr__t_html_ad4295aa9699eea57f6219a92475a327c"><div class="ttname"><a href="structbuf_ptr__t.html#ad4295aa9699eea57f6219a92475a327c">bufPtr_t::ptr</a></div><div class="ttdeci">uint8_t * ptr</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00313">ISComm.h:313</a></div></div>
<div class="ttc" id="structp__ack__t_html"><div class="ttname"><a href="structp__ack__t.html">p_ack_t</a></div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00539">ISComm.h:539</a></div></div>
<div class="ttc" id="structcom__manager__t_html_a49b2fded8a1c7c3142bc1a90f34603ea"><div class="ttname"><a href="structcom__manager__t.html#a49b2fded8a1c7c3142bc1a90f34603ea">com_manager_t::sendPacketCallback</a></div><div class="ttdeci">pfnComManagerSend sendPacketCallback</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00209">com_manager.h:209</a></div></div>
<div class="ttc" id="structcom__manager__t_html_ab416d1e7f6dd0ab395d0867d0083d5a9"><div class="ttname"><a href="structcom__manager__t.html#ab416d1e7f6dd0ab395d0867d0083d5a9">com_manager_t::passThroughHandler</a></div><div class="ttdeci">pfnComManagerPassThrough passThroughHandler</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00261">com_manager.h:261</a></div></div>
<div class="ttc" id="com__manager_8c_html_ad0bc38eb0c3c8f9dcf3b18813cc02e8e"><div class="ttname"><a href="com__manager_8c.html#ad0bc38eb0c3c8f9dcf3b18813cc02e8e">comManagerRegisterASCIIInstance</a></div><div class="ttdeci">void comManagerRegisterASCIIInstance(CMHANDLE cmInstance_, asciiMessageMap_t *asciiMessages, int asciiMessagesCount, pfnComManagerAsciiMessageHandler msgFnc, pfnComManagerAsciiMessageHandler msgFncPost)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l00255">com_manager.c:255</a></div></div>
<div class="ttc" id="com__manager_8c_html_ac3c471d6faca973221ce4e43e34fc817"><div class="ttname"><a href="com__manager_8c.html#ac3c471d6faca973221ce4e43e34fc817">findAsciiMessage</a></div><div class="ttdeci">int findAsciiMessage(const void *a, const void *b)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l00715">com_manager.c:715</a></div></div>
<div class="ttc" id="_i_s_comm_8h_html_ab0476659eb782bc338d77d1e1142abc3ad74e332e6cd1df17a285332390c72323"><div class="ttname"><a href="_i_s_comm_8h.html#ab0476659eb782bc338d77d1e1142abc3ad74e332e6cd1df17a285332390c72323">CM_PKT_FLAGS_RX_VALID_DATA</a></div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00358">ISComm.h:358</a></div></div>
<div class="ttc" id="structcom__manager__buffers__t_html_a4045c290e509f8bcc7eec6f7c2d9948e"><div class="ttname"><a href="structcom__manager__buffers__t.html#a4045c290e509f8bcc7eec6f7c2d9948e">com_manager_buffers_t::status</a></div><div class="ttdeci">com_manager_status_t * status</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00125">com_manager.h:125</a></div></div>
<div class="ttc" id="structp__data__t_html_ad581435f6761781c248158d69ca502f9"><div class="ttname"><a href="structp__data__t.html#ad581435f6761781c248158d69ca502f9">p_data_t::hdr</a></div><div class="ttdeci">p_data_hdr_t hdr</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00496">ISComm.h:496</a></div></div>
<div class="ttc" id="_i_s_comm_8h_html_ab1df21b0e8f59b5c8c30a48166a01482"><div class="ttname"><a href="_i_s_comm_8h.html#ab1df21b0e8f59b5c8c30a48166a01482">PID_NACK</a></div><div class="ttdeci">#define PID_NACK</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00289">ISComm.h:289</a></div></div>
<div class="ttc" id="com__manager_8c_html_a3e131ffd2b0658b9fa9b90271bb5b638"><div class="ttname"><a href="com__manager_8c.html#a3e131ffd2b0658b9fa9b90271bb5b638">processAsciiPacket</a></div><div class="ttdeci">int processAsciiPacket(com_manager_t *cmInstance, int pHandle, unsigned char *data, int dataLength)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l01442">com_manager.c:1442</a></div></div>
<div class="ttc" id="structensured__pkt__t_html_a0e33c78ab018ea5e2c608fea068f746d"><div class="ttname"><a href="structensured__pkt__t.html#a0e33c78ab018ea5e2c608fea068f746d">ensured_pkt_t::counter</a></div><div class="ttdeci">int counter</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00082">com_manager.h:82</a></div></div>
<div class="ttc" id="_i_s_comm_8h_html_ae8a53e32ddcd42ac1df8e6bdf6a36eef"><div class="ttname"><a href="_i_s_comm_8h.html#ae8a53e32ddcd42ac1df8e6bdf6a36eef">asciiDataType</a></div><div class="ttdeci">asciiDataType</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00333">ISComm.h:333</a></div></div>
<div class="ttc" id="_i_s_comm_8h_html_a37da6e9c18d89f76c39fa9a27394275a"><div class="ttname"><a href="_i_s_comm_8h.html#a37da6e9c18d89f76c39fa9a27394275a">PID_STOP_DID_BROADCAST</a></div><div class="ttdeci">#define PID_STOP_DID_BROADCAST</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00294">ISComm.h:294</a></div></div>
<div class="ttc" id="structregistered__data__t_html_ad7c741990c4b4bf9af22356127dc2f08"><div class="ttname"><a href="structregistered__data__t.html#ad7c741990c4b4bf9af22356127dc2f08">registered_data_t::pktFlags</a></div><div class="ttdeci">uint8_t pktFlags</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00197">com_manager.h:197</a></div></div>
<div class="ttc" id="structp__data__get__t_html_ab12d63b4fd0d9d6f5a27e8b0856af7a8"><div class="ttname"><a href="structp__data__get__t.html#ab12d63b4fd0d9d6f5a27e8b0856af7a8">p_data_get_t::id</a></div><div class="ttdeci">uint32_t id</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00506">ISComm.h:506</a></div></div>
<div class="ttc" id="structbroadcast__msg__t_html_aa9773244e47b9bc526725b359947d842"><div class="ttname"><a href="structbroadcast__msg__t.html#aa9773244e47b9bc526725b359947d842">broadcast_msg_t::pkt</a></div><div class="ttdeci">pkt_info_t pkt</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00045">com_manager.h:45</a></div></div>
<div class="ttc" id="structcom__manager__t_html_acdd39e362d1688f6af6f80ca5399cb1f"><div class="ttname"><a href="structcom__manager__t.html#acdd39e362d1688f6af6f80ca5399cb1f">com_manager_t::asciiMessagesCount</a></div><div class="ttdeci">uint32_t asciiMessagesCount</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00237">com_manager.h:237</a></div></div>
<div class="ttc" id="structcom__manager__t_html_a2a4da8b8846be0d82a1d83af2adb7698"><div class="ttname"><a href="structcom__manager__t.html#a2a4da8b8846be0d82a1d83af2adb7698">com_manager_t::ensureRetryCount</a></div><div class="ttdeci">int32_t ensureRetryCount</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00252">com_manager.h:252</a></div></div>
<div class="ttc" id="com__manager_8c_html_aeeee35f3d2f1cf8f56a7b95d1ccc8ab4"><div class="ttname"><a href="com__manager_8c.html#aeeee35f3d2f1cf8f56a7b95d1ccc8ab4">processPassThroughBytes</a></div><div class="ttdeci">int processPassThroughBytes(com_manager_t *cmInstance, int pHandle, ring_buffer_t *ringBuffer)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l01481">com_manager.c:1481</a></div></div>
<div class="ttc" id="structpacket__hdr__t_html_a915f088eeed50b151584165a97598709"><div class="ttname"><a href="structpacket__hdr__t.html#a915f088eeed50b151584165a97598709">packet_hdr_t::pid</a></div><div class="ttdeci">uint8_t pid</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00430">ISComm.h:430</a></div></div>
<div class="ttc" id="_i_s_comm_8h_html_a739834da5d5205125ac7115741c30c63ae6fe9b97817df1aa809783bfc33f5d39"><div class="ttname"><a href="_i_s_comm_8h.html#a739834da5d5205125ac7115741c30c63ae6fe9b97817df1aa809783bfc33f5d39">PSC_ASCII_START_BYTE</a></div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00380">ISComm.h:380</a></div></div>
<div class="ttc" id="com__manager_8c_html_a6adce0b5b228eff4bd756011b3c2c6c8"><div class="ttname"><a href="com__manager_8c.html#a6adce0b5b228eff4bd756011b3c2c6c8">comManagerSendDataNoAckInstance</a></div><div class="ttdeci">int comManagerSendDataNoAckInstance(CMHANDLE cmInstance, int pHandle, uint32_t dataId, void *dataPtr, int dataSize, int dataOffset)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l00607">com_manager.c:607</a></div></div>
<div class="ttc" id="structascii_message_map__t_html_a33d8b7845ee9c8d532fa5e22fadb9b37"><div class="ttname"><a href="structascii_message_map__t.html#a33d8b7845ee9c8d532fa5e22fadb9b37">asciiMessageMap_t::ptr</a></div><div class="ttdeci">uint8_t * ptr</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00411">ISComm.h:411</a></div></div>
<div class="ttc" id="structcom__manager__t_html_a4e76816e96ec28569e523fcf38150775"><div class="ttname"><a href="structcom__manager__t.html#a4e76816e96ec28569e523fcf38150775">com_manager_t::lastEnsuredPacketIndex</a></div><div class="ttdeci">int32_t lastEnsuredPacketIndex</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00240">com_manager.h:240</a></div></div>
<div class="ttc" id="_i_s_comm_8h_html_a739834da5d5205125ac7115741c30c63a3c40c8ab20b400ce92d105b470e09891"><div class="ttname"><a href="_i_s_comm_8h.html#a739834da5d5205125ac7115741c30c63a3c40c8ab20b400ce92d105b470e09891">UBLOX_START_BYTE1</a></div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00395">ISComm.h:395</a></div></div>
<div class="ttc" id="com__manager_8c_html_a5a99656c76c4e36420c61a9887081286"><div class="ttname"><a href="com__manager_8c.html#a5a99656c76c4e36420c61a9887081286">comManagerAssignUserPointer</a></div><div class="ttdeci">void comManagerAssignUserPointer(CMHANDLE cmInstance, void *userPointer)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l00509">com_manager.c:509</a></div></div>
<div class="ttc" id="structbuffer__t_html_ab1ce0deb7a33566b5c9e2705ae822007"><div class="ttname"><a href="structbuffer__t.html#ab1ce0deb7a33566b5c9e2705ae822007">buffer_t::size</a></div><div class="ttdeci">uint32_t size</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00303">ISComm.h:303</a></div></div>
<div class="ttc" id="structcom__manager__buffers__t_html"><div class="ttname"><a href="structcom__manager__buffers__t.html">com_manager_buffers_t</a></div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00120">com_manager.h:120</a></div></div>
<div class="ttc" id="com__manager_8c_html_a8bb05c7251208dda62e92b8be1f4c5ad"><div class="ttname"><a href="com__manager_8c.html#a8bb05c7251208dda62e92b8be1f4c5ad">stepComManagerSendMessagesInstance</a></div><div class="ttdeci">void stepComManagerSendMessagesInstance(CMHANDLE cmInstance)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l00443">com_manager.c:443</a></div></div>
<div class="ttc" id="structcom__manager__buffers__t_html_ad73b0757abb3b56ec49180e9076715b0"><div class="ttname"><a href="structcom__manager__buffers__t.html#ad73b0757abb3b56ec49180e9076715b0">com_manager_buffers_t::ringBuffer</a></div><div class="ttdeci">ring_buffer_t * ringBuffer</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00122">com_manager.h:122</a></div></div>
<div class="ttc" id="structp__data__hdr__t_html"><div class="ttname"><a href="structp__data__hdr__t.html">p_data_hdr_t</a></div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00480">ISComm.h:480</a></div></div>
<div class="ttc" id="structbuf_tx_rx_ptr__t_html_adb7fdcf7f9e8c13377db7643b67199b2"><div class="ttname"><a href="structbuf_tx_rx_ptr__t.html#adb7fdcf7f9e8c13377db7643b67199b2">bufTxRxPtr_t::txPtr</a></div><div class="ttdeci">uint8_t * txPtr</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00323">ISComm.h:323</a></div></div>
<div class="ttc" id="com__manager_8c_html_a2350b0785db4c4bf35d46901128475e6"><div class="ttname"><a href="com__manager_8c.html#a2350b0785db4c4bf35d46901128475e6">encodeBinaryPacket</a></div><div class="ttdeci">int encodeBinaryPacket(com_manager_t *cmInstance, int pHandle, buffer_t *pkt, packet_t *dPkt, uint8_t additionalPktFlags)</div><div class="ttdoc">Adds data to a packet: adds start, info, data length, data, checksum, and stop bytes....</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l01430">com_manager.c:1430</a></div></div>
<div class="ttc" id="structcom__manager__status__t_html_a799659757d78ea8a857bc35994b9cb8a"><div class="ttname"><a href="structcom__manager__status__t.html#a799659757d78ea8a857bc35994b9cb8a">com_manager_status_t::startByte</a></div><div class="ttdeci">uint8_t startByte</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00113">com_manager.h:113</a></div></div>
<div class="ttc" id="structp__ack__hdr__t_html"><div class="ttname"><a href="structp__ack__hdr__t.html">p_ack_hdr_t</a></div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00529">ISComm.h:529</a></div></div>
<div class="ttc" id="_i_s_comm_8h_html_a739834da5d5205125ac7115741c30c63ae2342a40d92a37d68326fb13d2f7d40e"><div class="ttname"><a href="_i_s_comm_8h.html#a739834da5d5205125ac7115741c30c63ae2342a40d92a37d68326fb13d2f7d40e">RTCM3_START_BYTE</a></div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00401">ISComm.h:401</a></div></div>
<div class="ttc" id="com__manager_8h_html_aa0545344d4561b3d4aa1a603e7f634bb"><div class="ttname"><a href="com__manager_8h.html#aa0545344d4561b3d4aa1a603e7f634bb">COM_MANAGER_BUF_SIZE_ENSURED_PKTS</a></div><div class="ttdeci">#define COM_MANAGER_BUF_SIZE_ENSURED_PKTS(max_num_ensured_pkts)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00147">com_manager.h:147</a></div></div>
<div class="ttc" id="com__manager_8h_html_a08d1326bfd508f5c35f3a8853488ad04"><div class="ttname"><a href="com__manager_8h.html#a08d1326bfd508f5c35f3a8853488ad04">MAX_NUM_BCAST_MSGS</a></div><div class="ttdeci">#define MAX_NUM_BCAST_MSGS</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00141">com_manager.h:141</a></div></div>
<div class="ttc" id="_i_s_comm_8h_html_ad8310776b70fca7c3b56b2734a68ad9f"><div class="ttname"><a href="_i_s_comm_8h.html#ad8310776b70fca7c3b56b2734a68ad9f">PID_SET_DATA</a></div><div class="ttdeci">#define PID_SET_DATA</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00292">ISComm.h:292</a></div></div>
<div class="ttc" id="com__manager_8c_html_a8a84f49889437055ac05a506c5b9a292"><div class="ttname"><a href="com__manager_8c.html#a8a84f49889437055ac05a506c5b9a292">initComManagerInstanceInternal</a></div><div class="ttdeci">int initComManagerInstanceInternal(com_manager_t *cmInstance, int numHandles, int maxEnsuredPackets, int stepPeriodMilliseconds, int retryCount, pfnComManagerRead readFnc, pfnComManagerSend sendFnc, pfnComManagerSendBufferAvailableBytes txFreeFnc, pfnComManagerPostRead pstRxFnc, pfnComManagerPostAck pstAckFnc, pfnComManagerDisableBroadcasts disableBcastFnc, com_manager_buffers_t *buffers)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l00151">com_manager.c:151</a></div></div>
<div class="ttc" id="com__manager_8c_html_a305a8082a720fd5b3bc521012df55202"><div class="ttname"><a href="com__manager_8c.html#a305a8082a720fd5b3bc521012df55202">disableBroadcastMsg</a></div><div class="ttdeci">void disableBroadcastMsg(com_manager_t *cmInstance, broadcast_msg_t *msg)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l01207">com_manager.c:1207</a></div></div>
<div class="ttc" id="struct_p_a_c_k_e_d_html_aaccb3eeb711867f9d36d033359eb8917"><div class="ttname"><a href="struct_p_a_c_k_e_d.html#aaccb3eeb711867f9d36d033359eb8917">PACKED::bits</a></div><div class="ttdeci">uint64_t bits</div><div class="ttdef"><b>Definition:</b> <a href="data__sets_8h_source.html#l01277">data_sets.h:1277</a></div></div>
<div class="ttc" id="com__manager_8c_html_a9f308bd49e5afa45f8deb7f01302241f"><div class="ttname"><a href="com__manager_8c.html#a9f308bd49e5afa45f8deb7f01302241f">beginUbloxPacket</a></div><div class="ttdeci">int beginUbloxPacket(com_manager_t *cmInstance, int pHandle, ring_buffer_t *ringBuffer)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l01514">com_manager.c:1514</a></div></div>
<div class="ttc" id="structp__data__t_html"><div class="ttname"><a href="structp__data__t.html">p_data_t</a></div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00493">ISComm.h:493</a></div></div>
<div class="ttc" id="structring__buffer__t_html_ac100861fe6491df179556a3c0cb7384b"><div class="ttname"><a href="structring__buffer__t.html#ac100861fe6491df179556a3c0cb7384b">ring_buffer_t::scanIndex</a></div><div class="ttdeci">uint32_t scanIndex</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00069">com_manager.h:69</a></div></div>
<div class="ttc" id="com__manager_8c_html_a75c9e4c2b6f2c9a44991454fa9dc8822"><div class="ttname"><a href="com__manager_8c.html#a75c9e4c2b6f2c9a44991454fa9dc8822">comManagerSetPassThroughInstance</a></div><div class="ttdeci">void comManagerSetPassThroughInstance(CMHANDLE cmInstance, pfnComManagerPassThrough handler)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l00488">com_manager.c:488</a></div></div>
<div class="ttc" id="_i_s_comm_8h_html_adcb8d04d0e267c9a6e5b6f47717e8629"><div class="ttname"><a href="_i_s_comm_8h.html#adcb8d04d0e267c9a6e5b6f47717e8629">PKT_BUF_SIZE</a></div><div class="ttdeci">#define PKT_BUF_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00208">ISComm.h:208</a></div></div>
<div class="ttc" id="com__manager_8c_html_aae55430658079aefb707533cd58c5f5a"><div class="ttname"><a href="com__manager_8c.html#aae55430658079aefb707533cd58c5f5a">comManagerGetDataRmc</a></div><div class="ttdeci">void comManagerGetDataRmc(int pHandle, uint64_t rmcBits, uint32_t rmcOptions)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l00564">com_manager.c:564</a></div></div>
<div class="ttc" id="com__manager_8c_html_a9ffb3e89b6bb53a26e590903ac97b8e9"><div class="ttname"><a href="com__manager_8c.html#a9ffb3e89b6bb53a26e590903ac97b8e9">comManagerSend</a></div><div class="ttdeci">int comManagerSend(int pHandle, uint8_t pktInfo, bufPtr_t *bodyHdr, bufPtr_t *txData, uint8_t pFlags)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l00664">com_manager.c:664</a></div></div>
<div class="ttc" id="com__manager_8c_html_a6de6ec07690eea63b78d52c6b36f6557"><div class="ttname"><a href="com__manager_8c.html#a6de6ec07690eea63b78d52c6b36f6557">stepComManagerSendMessages</a></div><div class="ttdeci">void stepComManagerSendMessages(void)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l00438">com_manager.c:438</a></div></div>
<div class="ttc" id="structbroadcast__msg__t_html_a3db0429a66a52239f3df4e4741d35409"><div class="ttname"><a href="structbroadcast__msg__t.html#a3db0429a66a52239f3df4e4741d35409">broadcast_msg_t::period</a></div><div class="ttdeci">int32_t period</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00054">com_manager.h:54</a></div></div>
<div class="ttc" id="com__manager_8c_html_ae2cd08328452b51eb95fdfdaaac1f869"><div class="ttname"><a href="com__manager_8c.html#ae2cd08328452b51eb95fdfdaaac1f869">comManagerGetUserPointer</a></div><div class="ttdeci">void * comManagerGetUserPointer(CMHANDLE cmInstance)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l00514">com_manager.c:514</a></div></div>
<div class="ttc" id="structring__buffer__t_html"><div class="ttname"><a href="structring__buffer__t.html">ring_buffer_t</a></div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00064">com_manager.h:64</a></div></div>
<div class="ttc" id="structcom__manager__t_html_a17e30577ccee8dfd9f641af9d5e49940"><div class="ttname"><a href="structcom__manager__t.html#a17e30577ccee8dfd9f641af9d5e49940">com_manager_t::pstAckFnc</a></div><div class="ttdeci">pfnComManagerPostAck pstAckFnc</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00218">com_manager.h:218</a></div></div>
<div class="ttc" id="_i_s_comm_8h_html_a739834da5d5205125ac7115741c30c63a5206c6e0545c0e46afc3cb7eaf2fe9c4"><div class="ttname"><a href="_i_s_comm_8h.html#a739834da5d5205125ac7115741c30c63a5206c6e0545c0e46afc3cb7eaf2fe9c4">PSC_END_BYTE</a></div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00389">ISComm.h:389</a></div></div>
<div class="ttc" id="com__manager_8c_html_a4f2c449501f06efa1689f82b88a1db64"><div class="ttname"><a href="com__manager_8c.html#a4f2c449501f06efa1689f82b88a1db64">comManagerSendData</a></div><div class="ttdeci">int comManagerSendData(int pHandle, uint32_t dataId, void *dataPtr, int dataSize, int dataOffset)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l00578">com_manager.c:578</a></div></div>
<div class="ttc" id="com__manager_8c_html_af012b68382286a50eeef956a4e68f124"><div class="ttname"><a href="com__manager_8c.html#af012b68382286a50eeef956a4e68f124">comManagerDisableDataInstance</a></div><div class="ttdeci">int comManagerDisableDataInstance(CMHANDLE cmInstance, int pHandle, uint32_t dataId)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l00655">com_manager.c:655</a></div></div>
<div class="ttc" id="_i_s_comm_8h_html_ab0476659eb782bc338d77d1e1142abc3af50f893f1117ff75e69c84617c928775"><div class="ttname"><a href="_i_s_comm_8h.html#ab0476659eb782bc338d77d1e1142abc3af50f893f1117ff75e69c84617c928775">CM_PKT_FLAGS_RAW_DATA_NO_SWAP</a></div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00364">ISComm.h:364</a></div></div>
<div class="ttc" id="structpacket__t_html"><div class="ttname"><a href="structpacket__t.html">packet_t</a></div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00462">ISComm.h:462</a></div></div>
<div class="ttc" id="_i_s_comm_8c_html_a5b68834d97874ca7fe0b54ad4943a733"><div class="ttname"><a href="_i_s_comm_8c.html#a5b68834d97874ca7fe0b54ad4943a733">is_encode_binary_packet</a></div><div class="ttdeci">int is_encode_binary_packet(void *srcBuffer, unsigned int srcBufferLength, packet_hdr_t *hdr, uint8_t additionalPktFlags, void *encodedPacket, int encodedPacketLength)</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8c_source.html#l00696">ISComm.c:696</a></div></div>
<div class="ttc" id="structcom__manager__t_html_a7b82b19bdc580ff201c26478dccf4bcf"><div class="ttname"><a href="structcom__manager__t.html#a7b82b19bdc580ff201c26478dccf4bcf">com_manager_t::asciiMessages</a></div><div class="ttdeci">asciiMessageMap_t * asciiMessages</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00236">com_manager.h:236</a></div></div>
<div class="ttc" id="com__manager_8h_html_a779b513296068d2a6186659183ff3c2c"><div class="ttname"><a href="com__manager_8h.html#a779b513296068d2a6186659183ff3c2c">RING_BUFFER_SIZE</a></div><div class="ttdeci">#define RING_BUFFER_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00060">com_manager.h:60</a></div></div>
<div class="ttc" id="structbuf_ptr__t_html_a89121516bb8e4f198c13eaf8e1d23457"><div class="ttname"><a href="structbuf_ptr__t.html#a89121516bb8e4f198c13eaf8e1d23457">bufPtr_t::size</a></div><div class="ttdeci">uint32_t size</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00316">ISComm.h:316</a></div></div>
<div class="ttc" id="com__manager_8c_html_a0a04aba97ca175f8e08018d2965ac0af"><div class="ttname"><a href="com__manager_8c.html#a0a04aba97ca175f8e08018d2965ac0af">enableBroadcastMsg</a></div><div class="ttdeci">void enableBroadcastMsg(com_manager_t *cmInstance, broadcast_msg_t *msg, int periodMultiple)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l01193">com_manager.c:1193</a></div></div>
<div class="ttc" id="com__manager_8c_html_aaa0cccdf3490b0effcce07fed8460953"><div class="ttname"><a href="com__manager_8c.html#aaa0cccdf3490b0effcce07fed8460953">parseAsciiPacket</a></div><div class="ttdeci">void parseAsciiPacket(com_manager_t *cmInstance, int pHandle, unsigned char *buf, int count)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l00757">com_manager.c:757</a></div></div>
<div class="ttc" id="com__manager_8c_html_a4ad33af42c470295b3e053956cd3a6b4"><div class="ttname"><a href="com__manager_8c.html#a4ad33af42c470295b3e053956cd3a6b4">comManagerSetRmcCallback</a></div><div class="ttdeci">void comManagerSetRmcCallback(pfnComManagerAsapMsg handler)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l00496">com_manager.c:496</a></div></div>
<div class="ttc" id="struct_p_a_c_k_e_d_html_a2fc5b85d6ca7828bedab08e5f019c2f6"><div class="ttname"><a href="struct_p_a_c_k_e_d.html#a2fc5b85d6ca7828bedab08e5f019c2f6">PACKED::options</a></div><div class="ttdeci">uint32_t options</div><div class="ttdef"><b>Definition:</b> <a href="data__sets_8h_source.html#l01129">data_sets.h:1129</a></div></div>
<div class="ttc" id="structcom__manager__buffers__t_html_a477681448e22b6f844d039f5e14d3839"><div class="ttname"><a href="structcom__manager__buffers__t.html#a477681448e22b6f844d039f5e14d3839">com_manager_buffers_t::broadcastMsg</a></div><div class="ttdeci">broadcast_msg_t * broadcastMsg</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00128">com_manager.h:128</a></div></div>
<div class="ttc" id="com__manager_8c_html_a2f5355ba3c4e3467fd3eba423904324b"><div class="ttname"><a href="com__manager_8c.html#a2f5355ba3c4e3467fd3eba423904324b">comManagerGetData</a></div><div class="ttdeci">void comManagerGetData(int pHandle, uint32_t dataId, int offset, int size, int periodMultiple)</div><div class="ttdoc">Request data This function requests the specified data w/ offset and length for partial reads.</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l00541">com_manager.c:541</a></div></div>
<div class="ttc" id="structp__data__t_html_a006c80696cc8ad6e3699d853da9c9c07"><div class="ttname"><a href="structp__data__t.html#a006c80696cc8ad6e3699d853da9c9c07">p_data_t::buf</a></div><div class="ttdeci">uint8_t buf[MAX_DATASET_SIZE]</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00499">ISComm.h:499</a></div></div>
<div class="ttc" id="com__manager_8c_html_acbf78e85e9b31849a67e1dca09688f9f"><div class="ttname"><a href="com__manager_8c.html#acbf78e85e9b31849a67e1dca09688f9f">beginRtcm3Packet</a></div><div class="ttdeci">int beginRtcm3Packet(com_manager_t *cmInstance, int pHandle, ring_buffer_t *ringBuffer)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l01543">com_manager.c:1543</a></div></div>
<div class="ttc" id="structcom__manager__status__t_html_ac612f97d0b588330e0ce0293170a60f0"><div class="ttname"><a href="structcom__manager__status__t.html#ac612f97d0b588330e0ce0293170a60f0">com_manager_status_t::readCounter</a></div><div class="ttdeci">uint32_t readCounter</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00092">com_manager.h:92</a></div></div>
<div class="ttc" id="com__manager_8c_html_aef0ad84b52912d62c84e234f23b920fd"><div class="ttname"><a href="com__manager_8c.html#aef0ad84b52912d62c84e234f23b920fd">comManagerInit</a></div><div class="ttdeci">int comManagerInit(int numHandles, int maxEnsuredPackets, int stepPeriodMilliseconds, int retryCount, pfnComManagerRead readFnc, pfnComManagerSend sendFnc, pfnComManagerSendBufferAvailableBytes txFreeFnc, pfnComManagerPostRead pstRxFnc, pfnComManagerPostAck pstAckFnc, pfnComManagerDisableBroadcasts disableBcastFnc, com_manager_buffers_t *buffers)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l00082">com_manager.c:82</a></div></div>
<div class="ttc" id="_i_s_comm_8h_html_ab0476659eb782bc338d77d1e1142abc3a48ce7c163309a8193e5cfbf5512071a8"><div class="ttname"><a href="_i_s_comm_8h.html#ab0476659eb782bc338d77d1e1142abc3a48ce7c163309a8193e5cfbf5512071a8">CM_PKT_FLAGS_MORE_DATA_AVAILABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00361">ISComm.h:361</a></div></div>
<div class="ttc" id="_i_s_comm_8c_html_a404354ab6f34767f2e7b90f2a3590051"><div class="ttname"><a href="_i_s_comm_8c.html#a404354ab6f34767f2e7b90f2a3590051">copyDataPToStructP</a></div><div class="ttdeci">char copyDataPToStructP(void *sptr, const p_data_t *data, const unsigned int maxsize)</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8c_source.html#l00879">ISComm.c:879</a></div></div>
<div class="ttc" id="_i_s_comm_8h_html_ae8a53e32ddcd42ac1df8e6bdf6a36eefa12285fb40a75c9bb8ad72ebfe86a89ac"><div class="ttname"><a href="_i_s_comm_8h.html#ae8a53e32ddcd42ac1df8e6bdf6a36eefa12285fb40a75c9bb8ad72ebfe86a89ac">asciiTypeUInt</a></div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00339">ISComm.h:339</a></div></div>
<div class="ttc" id="structring__buffer__t_html_a2923f0836c88d3d7055f20b25edc2fd8"><div class="ttname"><a href="structring__buffer__t.html#a2923f0836c88d3d7055f20b25edc2fd8">ring_buffer_t::startIndex</a></div><div class="ttdeci">uint32_t startIndex</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00067">com_manager.h:67</a></div></div>
<div class="ttc" id="structcom__manager__t_html_ad698cf1f00ae25965d355ec7f6e86c94"><div class="ttname"><a href="structcom__manager__t.html#ad698cf1f00ae25965d355ec7f6e86c94">com_manager_t::stepPeriodMilliseconds</a></div><div class="ttdeci">int32_t stepPeriodMilliseconds</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00249">com_manager.h:249</a></div></div>
<div class="ttc" id="com__manager_8h_html"><div class="ttname"><a href="com__manager_8h.html">com_manager.h</a></div></div>
<div class="ttc" id="structpacket__hdr__t_html_a2f70c5610514823dd705571fd68df9d7"><div class="ttname"><a href="structpacket__hdr__t.html#a2f70c5610514823dd705571fd68df9d7">packet_hdr_t::flags</a></div><div class="ttdeci">uint8_t flags</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00442">ISComm.h:442</a></div></div>
<div class="ttc" id="com__manager_8h_html_a9d0f8665a43491f9b0e729ae7ff3695c"><div class="ttname"><a href="com__manager_8h.html#a9d0f8665a43491f9b0e729ae7ff3695c">pfnComManagerAsciiMessageHandler</a></div><div class="ttdeci">int(* pfnComManagerAsciiMessageHandler)(CMHANDLE cmHandle, int pHandle, unsigned char *messageId, unsigned char *line, int lineLength)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00176">com_manager.h:176</a></div></div>
<div class="ttc" id="_i_s_constants_8h_html_ae165d3d36e78851434995cd9e9fc8d78"><div class="ttname"><a href="_i_s_constants_8h.html#ae165d3d36e78851434995cd9e9fc8d78">_ARRAY_ELEMENT_COUNT</a></div><div class="ttdeci">#define _ARRAY_ELEMENT_COUNT(a)</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_constants_8h_source.html#l00322">ISConstants.h:322</a></div></div>
<div class="ttc" id="structp__data__get__t_html_ac96de892e311a7a68676a99d8e9c6f98"><div class="ttname"><a href="structp__data__get__t.html#ac96de892e311a7a68676a99d8e9c6f98">p_data_get_t::bc_period_multiple</a></div><div class="ttdeci">uint32_t bc_period_multiple</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00518">ISComm.h:518</a></div></div>
<div class="ttc" id="structregistered__data__t_html_a89967b25487646d30f3d94c72cbe0430"><div class="ttname"><a href="structregistered__data__t.html#a89967b25487646d30f3d94c72cbe0430">registered_data_t::dataSet</a></div><div class="ttdeci">bufTxRxPtr_t dataSet</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00188">com_manager.h:188</a></div></div>
<div class="ttc" id="structcom__manager__t_html_a96e9b622e9ce79bafbe1f603b20e2a20"><div class="ttname"><a href="structcom__manager__t.html#a96e9b622e9ce79bafbe1f603b20e2a20">com_manager_t::ringBuffers</a></div><div class="ttdeci">ring_buffer_t * ringBuffers</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00227">com_manager.h:227</a></div></div>
<div class="ttc" id="structp__data__hdr__t_html_a5671779d9843a522942f60cbca2dee18"><div class="ttname"><a href="structp__data__hdr__t.html#a5671779d9843a522942f60cbca2dee18">p_data_hdr_t::offset</a></div><div class="ttdeci">uint32_t offset</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00489">ISComm.h:489</a></div></div>
<div class="ttc" id="structcom__manager__t_html_a8ec022c21b008d2c9c3c706470e47e26"><div class="ttname"><a href="structcom__manager__t.html#a8ec022c21b008d2c9c3c706470e47e26">com_manager_t::disableBcastFnc</a></div><div class="ttdeci">pfnComManagerDisableBroadcasts disableBcastFnc</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00221">com_manager.h:221</a></div></div>
<div class="ttc" id="structcom__manager__buffers__t_html_a9fd06bf2e96ae43aa2be6edff9e473ad"><div class="ttname"><a href="structcom__manager__buffers__t.html#a9fd06bf2e96ae43aa2be6edff9e473ad">com_manager_buffers_t::ringBufferSize</a></div><div class="ttdeci">uint32_t ringBufferSize</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00123">com_manager.h:123</a></div></div>
<div class="ttc" id="structcom__manager__t_html_ae1c22dddc776abe38f50a78ff1f76893"><div class="ttname"><a href="structcom__manager__t.html#ae1c22dddc776abe38f50a78ff1f76893">com_manager_t::status</a></div><div class="ttdeci">com_manager_status_t * status</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00255">com_manager.h:255</a></div></div>
<div class="ttc" id="_i_s_comm_8h_html_ac6e603670e69c96b8f8d3ad9ef9d7920"><div class="ttname"><a href="_i_s_comm_8h.html#ac6e603670e69c96b8f8d3ad9ef9d7920">PID_STOP_BROADCASTS_ALL_PORTS</a></div><div class="ttdeci">#define PID_STOP_BROADCASTS_ALL_PORTS</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00293">ISComm.h:293</a></div></div>
<div class="ttc" id="_i_s_comm_8c_html_a5844b6fb9de7d000eb3f72ab4dc55f4e"><div class="ttname"><a href="_i_s_comm_8c.html#a5844b6fb9de7d000eb3f72ab4dc55f4e">g_validBaudRates</a></div><div class="ttdeci">const unsigned int g_validBaudRates[IS_BAUDRATE_COUNT]</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8c_source.html#l00084">ISComm.c:84</a></div></div>
<div class="ttc" id="com__manager_8c_html_a9887c6cd8d50dbb31888d12f9b7efddc"><div class="ttname"><a href="com__manager_8c.html#a9887c6cd8d50dbb31888d12f9b7efddc">comManagerRegister</a></div><div class="ttdeci">void comManagerRegister(uint32_t dataId, pfnComManagerPreSend txFnc, pfnComManagerPostRead pstRxFnc, const void *txDataPtr, void *rxDataPtr, int dataSize, uint8_t pktFlags)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l00270">com_manager.c:270</a></div></div>
<div class="ttc" id="structp__data__disable__t_html"><div class="ttname"><a href="structp__data__disable__t.html">p_data_disable_t</a></div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00522">ISComm.h:522</a></div></div>
<div class="ttc" id="structcom__manager__t_html_a59a276b78b028a84985cd68d53132639"><div class="ttname"><a href="structcom__manager__t.html#a59a276b78b028a84985cd68d53132639">com_manager_t::pktCounter</a></div><div class="ttdeci">uint8_t pktCounter</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00203">com_manager.h:203</a></div></div>
<div class="ttc" id="_i_s_comm_8h_html_a20242d8c94321ec78956a2eee64f94f3"><div class="ttname"><a href="_i_s_comm_8h.html#a20242d8c94321ec78956a2eee64f94f3">PID_STOP_BROADCASTS_CURRENT_PORT</a></div><div class="ttdeci">#define PID_STOP_BROADCASTS_CURRENT_PORT</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00295">ISComm.h:295</a></div></div>
<div class="ttc" id="structpacket__hdr__t_html_a5e22ca5884ff79547cdaf5577cad9f41"><div class="ttname"><a href="structpacket__hdr__t.html#a5e22ca5884ff79547cdaf5577cad9f41">packet_hdr_t::counter</a></div><div class="ttdeci">uint8_t counter</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00433">ISComm.h:433</a></div></div>
<div class="ttc" id="structp__data__get__t_html_a11afc3ecb51275d65121ed378d24267a"><div class="ttname"><a href="structp__data__get__t.html#a11afc3ecb51275d65121ed378d24267a">p_data_get_t::size</a></div><div class="ttdeci">uint32_t size</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00509">ISComm.h:509</a></div></div>
<div class="ttc" id="structascii_message_map__t_html"><div class="ttname"><a href="structascii_message_map__t.html">asciiMessageMap_t</a></div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00405">ISComm.h:405</a></div></div>
<div class="ttc" id="com__manager_8c_html_a7f293526ff6f68cdedfb57181d456bd8"><div class="ttname"><a href="com__manager_8c.html#a7f293526ff6f68cdedfb57181d456bd8">comManagerSetRmcCallbackInstance</a></div><div class="ttdeci">void comManagerSetRmcCallbackInstance(CMHANDLE cmInstance, pfnComManagerAsapMsg handler)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l00501">com_manager.c:501</a></div></div>
<div class="ttc" id="structp__data__get__t_html"><div class="ttname"><a href="structp__data__get__t.html">p_data_get_t</a></div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00503">ISComm.h:503</a></div></div>
<div class="ttc" id="com__manager_8h_html_a018afe7c16e51b37e48d536d977fbc75"><div class="ttname"><a href="com__manager_8h.html#a018afe7c16e51b37e48d536d977fbc75">pfnComManagerPostAck</a></div><div class="ttdeci">void(* pfnComManagerPostAck)(CMHANDLE cmHandle, int pHandle, p_ack_t *ack, unsigned char packetIdentifier)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00167">com_manager.h:167</a></div></div>
<div class="ttc" id="com__manager_8c_html_abb80b40c7d59e01f84a4cb5a4a337a37"><div class="ttname"><a href="com__manager_8c.html#abb80b40c7d59e01f84a4cb5a4a337a37">comManagerStepInstance</a></div><div class="ttdeci">void comManagerStepInstance(CMHANDLE cmInstance_)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l00309">com_manager.c:309</a></div></div>
<div class="ttc" id="com__manager_8c_html_af2d03a088e68708a42a99cae3dac4924"><div class="ttname"><a href="com__manager_8c.html#af2d03a088e68708a42a99cae3dac4924">comManagerSendEnsuredInstance</a></div><div class="ttdeci">int comManagerSendEnsuredInstance(CMHANDLE cmInstance, int pHandle, uint8_t pktInfo, unsigned char *data, unsigned int dataSize)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l00696">com_manager.c:696</a></div></div>
<div class="ttc" id="structp__ack__t_html_a2c304755ebea9c13682813a6edd44a1a"><div class="ttname"><a href="structp__ack__t.html#a2c304755ebea9c13682813a6edd44a1a">p_ack_t::buf</a></div><div class="ttdeci">uint8_t buf[MAX_P_ACK_BODY_SIZE]</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00545">ISComm.h:545</a></div></div>
<div class="ttc" id="com__manager_8c_html_a4336f36a840ad97152a693893866ca2e"><div class="ttname"><a href="com__manager_8c.html#a4336f36a840ad97152a693893866ca2e">comManagerGetGlobal</a></div><div class="ttdeci">CMHANDLE comManagerGetGlobal(void)</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8c_source.html#l00079">com_manager.c:79</a></div></div>
<div class="ttc" id="struct_p_a_c_k_e_d_html"><div class="ttname"><a href="struct_p_a_c_k_e_d.html">PACKED</a></div><div class="ttdef"><b>Definition:</b> <a href="data__sets_8h_source.html#l00418">data_sets.h:418</a></div></div>
<div class="ttc" id="_i_s_comm_8h_html_aeafbbae0d562134d2aa48c43dfa849b8"><div class="ttname"><a href="_i_s_comm_8h.html#aeafbbae0d562134d2aa48c43dfa849b8">PID_DATA</a></div><div class="ttdeci">#define PID_DATA</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00291">ISComm.h:291</a></div></div>
<div class="ttc" id="_i_s_comm_8h_html_aac4daff0ea7dba01675954db4842343f"><div class="ttname"><a href="_i_s_comm_8h.html#aac4daff0ea7dba01675954db4842343f">MAX_P_DATA_BODY_SIZE</a></div><div class="ttdeci">#define MAX_P_DATA_BODY_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00218">ISComm.h:218</a></div></div>
<div class="ttc" id="com__manager_8h_html_aeb9aa926cea56bd3907b418e3c62a7e7"><div class="ttname"><a href="com__manager_8h.html#aeb9aa926cea56bd3907b418e3c62a7e7">RING_BUFFER_FLUSH_THRESHOLD</a></div><div class="ttdeci">#define RING_BUFFER_FLUSH_THRESHOLD</div><div class="ttdef"><b>Definition:</b> <a href="com__manager_8h_source.html#l00061">com_manager.h:61</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
