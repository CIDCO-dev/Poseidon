<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SDK: src/GpsParser.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Logo_Full_color_300x61.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SDK
   &#160;<span id="projectnumber">Release 1.7.6</span>
   </div>
   <div id="projectbrief">Communications, logger, and bootloader libraries.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">GpsParser.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_gps_parser_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">MIT LICENSE</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">Copyright 2014-2018 Inertial Sense, Inc. - http://inertialsense.com</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files(the &quot;Software&quot;), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions :</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_gps_parser_8h.html">GpsParser.h</a>&quot;</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_i_s_comm_8h.html">ISComm.h</a>&quot;</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#if defined(__GNUC__)</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#pragma GCC diagnostic push</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#pragma GCC diagnostic ignored &quot;-Wpedantic&quot;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div><div class="line"><a name="l00021"></a><span class="lineno"><a class="line" href="_gps_parser_8cpp.html#a04ee0b4cfe6327d1e3de36b7c1a66e84">   21</a></span>&#160;<span class="preprocessor">#define UBLOX_PREAMBLE1 0xb5</span></div><div class="line"><a name="l00022"></a><span class="lineno"><a class="line" href="_gps_parser_8cpp.html#a0ae2a1d4f7042bc01c87fc19041bc421">   22</a></span>&#160;<span class="preprocessor">#define UBLOX_PREAMBLE2 0x62</span></div><div class="line"><a name="l00023"></a><span class="lineno"><a class="line" href="_gps_parser_8cpp.html#a77fd73f7c23687368fac3da6984d04cb">   23</a></span>&#160;<span class="preprocessor">#define UBLOX_HEADER_SIZE 6</span></div><div class="line"><a name="l00024"></a><span class="lineno"><a class="line" href="_gps_parser_8cpp.html#a486c299d08b6c853a39f6c796f67040f">   24</a></span>&#160;<span class="preprocessor">#define UBLOX_CHECKSUM_SIZE 2</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#if defined(RTK_EMBEDDED)</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#define INIT_M_RTCM init_rtcm(&amp;m_rtcm, 0, 1); SetReceiverIndex(RECEIVER_INDEX_EXTERNAL_BASE);</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#define ALLOCATE_M_RTCM if (!m_rtcm.ownsBuff) { m_rtcm.buff = (unsigned char*)RTK_MALLOC(MAXRTCMLEN); m_rtcm.ownsBuff = 1; }</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#define INIT_M_RAW(fmt) init_raw(&amp;m_raw, fmt, 0); SetReceiverIndex(RECEIVER_INDEX_GPS1);</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#define ALLOCATE_M_RAW if (!m_raw.ownsBuff) { m_raw.buff = (unsigned char*)RTK_MALLOC(MAXRAWLEN); m_raw.ownsBuff = 1; }</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#define DECLARE_RTCM_DESTRUCTOR(class_name) ~class_name() OVERRIDE { free_rtcm(&amp;m_rtcm); }</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#define DECLARE_RAW_DESTRUCTOR(class_name) ~class_name() OVERRIDE { free_raw(&amp;m_raw); }</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#define DECLARE_M_RTCM rtcm_t m_rtcm;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#define DECLARE_M_RAW raw_t m_raw;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;{</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <span class="keyword">extern</span> <span class="keywordtype">int</span> decode_rtcm3(rtcm_t *rtcm);</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <span class="keyword">extern</span> <span class="keywordtype">int</span> decode_ubx(raw_t* raw, <span class="keywordtype">int</span> doChecksum);</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <a class="code" href="structgtime__t.html">gtime_t</a> <a class="code" href="_gps_parser_8h.html#ab52308f24bc1b1e7656c79b23fde92be">g_gps_latest_time</a>;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;}</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div><div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="_gps_parser_8cpp.html#a148e5e8ba2ec554ced26a9d7bbe910da">   46</a></span>&#160;<span class="preprocessor">#define INIT_M_RTCM m_rtcm.len = 0; m_rtcm.nbyte = 0;</span></div><div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="_gps_parser_8cpp.html#a684bb41a65461b7e9985286aea1d23d7">   47</a></span>&#160;<span class="preprocessor">#define ALLOCATE_M_RTCM</span></div><div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="_gps_parser_8cpp.html#a4d0912b39c05d5b3689ab040900a1899">   48</a></span>&#160;<span class="preprocessor">#define INIT_M_RAW(fmt) m_raw.len = 0; m_raw.nbyte = 0;</span></div><div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="_gps_parser_8cpp.html#a0c3b92111acd780de5d7c7d0fc43ebeb">   49</a></span>&#160;<span class="preprocessor">#define ALLOCATE_M_RAW</span></div><div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="_gps_parser_8cpp.html#a3b4a35e1496652bd128ff66c6f1b92b4">   50</a></span>&#160;<span class="preprocessor">#define DECLARE_RTCM_DESTRUCTOR(c)</span></div><div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="_gps_parser_8cpp.html#a8f514a127bd594703dbd0f311a7df330">   51</a></span>&#160;<span class="preprocessor">#define DECLARE_RAW_DESTRUCTOR(c)</span></div><div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="_gps_parser_8cpp.html#a0feeb55b1c694a25e067e3f15432eb66">   52</a></span>&#160;<span class="preprocessor">#define MAXRTCMLEN 1200</span></div><div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="_gps_parser_8cpp.html#a7e956e73ff783054bbd9326df6d69820">   53</a></span>&#160;<span class="preprocessor">#define MAXRAWLEN 4096</span></div><div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="_gps_parser_8cpp.html#aec7e40600d94d802a2c591d780c76ec8">   54</a></span>&#160;<span class="preprocessor">#define DECLARE_M_RTCM struct { uint8_t buff[MAXRTCMLEN]; int len; int nbyte; } m_rtcm;</span></div><div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="_gps_parser_8cpp.html#a55f3cf8133ccd54d68b2c60575c60ea4">   55</a></span>&#160;<span class="preprocessor">#define DECLARE_M_RAW struct { uint8_t buff[MAXRAWLEN]; int len; int nbyte; } m_raw;</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div><div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="classc_inertial_sense_parser.html">   59</a></span>&#160;<span class="keyword">class </span><a class="code" href="classc_inertial_sense_parser.html">cInertialSenseParser</a> : <span class="keyword">public</span> <a class="code" href="classc_gps_parser.html">cGpsParser</a></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;{</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="classc_inertial_sense_parser.html#a7a2539213977fbca6f25899e144c0e5f">   63</a></span>&#160;    <a class="code" href="classc_inertial_sense_parser.html#a7a2539213977fbca6f25899e144c0e5f">cInertialSenseParser</a>(<a class="code" href="classi_gps_parser_delegate.html">iGpsParserDelegate</a>* delegate) : <a class="code" href="classc_gps_parser.html">cGpsParser</a>(delegate)</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    {</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        commBuffer = <a class="code" href="_i_s_constants_8h.html#a3ef7eab8cd0e570b6586628cc9d5ccab">NULLPTR</a>;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    }</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div><div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="classc_inertial_sense_parser.html#ad876e557da9a8ec270c3131fbe460008">   68</a></span>&#160;    <a class="code" href="classc_inertial_sense_parser.html#ad876e557da9a8ec270c3131fbe460008">~cInertialSenseParser</a>() <a class="code" href="_i_s_constants_8h.html#a5dea698950629d9e51d19c1a25be1c30">OVERRIDE</a></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    {</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        <span class="keywordflow">if</span> (commBuffer != <a class="code" href="_i_s_constants_8h.html#a3ef7eab8cd0e570b6586628cc9d5ccab">NULLPTR</a>)</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        {</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;            <a class="code" href="_i_s_constants_8h.html#a08df5b6fa6b8d02fce35aedf8776e435">FREE</a>(commBuffer);</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        }</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    }</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div><div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="classc_inertial_sense_parser.html#a946b92985b6663bccd5f02d6afee1776">   76</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classc_inertial_sense_parser.html#a946b92985b6663bccd5f02d6afee1776">WriteByte</a>(uint8_t b) <a class="code" href="_i_s_constants_8h.html#a5dea698950629d9e51d19c1a25be1c30">OVERRIDE</a></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    {</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        <span class="comment">// create comm lazily, some cases just use ParseMessage and never call WriteByte</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        <span class="keywordflow">if</span> (commBuffer == <a class="code" href="_i_s_constants_8h.html#a3ef7eab8cd0e570b6586628cc9d5ccab">NULLPTR</a>)</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        {</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;            commBuffer = (uint8_t*)<a class="code" href="_i_s_constants_8h.html#a43880057a63fb01126278a533081c603">MALLOC</a>(2048);</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;            comm.<a class="code" href="structis__comm__instance__t.html#a9d0ddeeff9552b068e88ada137f1a144">buffer</a> = commBuffer;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;            comm.<a class="code" href="structis__comm__instance__t.html#a529481b163367f8aa8e863dbce769553">bufferSize</a> = 2048;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;            <a class="code" href="_i_s_comm_8c.html#ab81821036e21d6afe0fca0f1c087dac3">is_comm_init</a>(&amp;comm);</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        }</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        <span class="keywordflow">switch</span> (<a class="code" href="_i_s_comm_8c.html#a9ee32c6b88cfb4ea9697e1a1b2b6b657">is_comm_parse</a>(&amp;comm, b))</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        {</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="data__sets_8h.html#ae805de4fa8fac52ea9ed1e9c6fd6259f">DID_GPS1_RAW</a>:</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="data__sets_8h.html#af7402feb87584ebeaefe507e191f8930">DID_GPS2_RAW</a>:</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="data__sets_8h.html#ac8520eaea81a5b3d8e163ee01e2f9388">DID_GPS_BASE_RAW</a>:</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;            <a class="code" href="classc_inertial_sense_parser.html#a3ffee82704c03bc803c5826f44601d8d">ParseMessage</a>(comm.<a class="code" href="structis__comm__instance__t.html#a9d0ddeeff9552b068e88ada137f1a144">buffer</a>, <span class="keyword">sizeof</span>(<a class="code" href="struct_p_a_c_k_e_d.html">gps_raw_t</a>));</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        }</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        <a class="code" href="classc_gps_parser.html#ab163e893a00283fd78a7798ecb5d0076">m_corruptPacketCount</a> = comm.<a class="code" href="structis__comm__instance__t.html#a1dec969da2a5410a03f86f20a04f59c9">errorCount</a>;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    }</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div><div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="classc_inertial_sense_parser.html#a3ffee82704c03bc803c5826f44601d8d">   98</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classc_inertial_sense_parser.html#a3ffee82704c03bc803c5826f44601d8d">ParseMessage</a>(<span class="keyword">const</span> uint8_t* data, <span class="keywordtype">int</span> dataLength) <a class="code" href="_i_s_constants_8h.html#a5dea698950629d9e51d19c1a25be1c30">OVERRIDE</a></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    {</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="preprocessor">#if defined(RTK_EMBEDDED)</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        <span class="comment">// data ptr is always a packet of gps_raw_t</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        <a class="code" href="struct_p_a_c_k_e_d.html">gps_raw_t</a>* raw = (<a class="code" href="struct_p_a_c_k_e_d.html">gps_raw_t</a>*)data;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <span class="keywordtype">int</span> prn;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        <span class="keywordflow">switch</span> (raw-&gt;<a class="code" href="struct_p_a_c_k_e_d.html#adc36112750f9a3e53751c1df40765112">dataType</a>)</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        {</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="data__sets_8h.html#a534377a848e290b847dc1830258b216fa402bb369fbbeff903fbe5dd44aa8d321">raw_data_type_observation</a>:</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        {</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;            <a class="code" href="structobs__t.html">obs_t</a> obs;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;            obs.<a class="code" href="structobs__t.html#a09e05f3d10900ec57feab9eca3c6c8a9">n</a> = raw-&gt;<a class="code" href="struct_p_a_c_k_e_d.html#a56850797a0ab0be4c8c7ee6dc291b06b">obsCount</a>;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;            obs.<a class="code" href="structobs__t.html#a2dfe38f511872663338a62d184de9940">nmax</a> = <a class="code" href="data__sets_8h.html#ad9a80974e60c35748e602c96a84aea25">MAX_OBSERVATION_COUNT_IN_RTK_MESSAGE</a>;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;            obs.<a class="code" href="structobs__t.html#a3cff1d90b248369f3c0d31b34cfb6344">data</a> = raw-&gt;<a class="code" href="struct_p_a_c_k_e_d.html#a42fe1fcebdd514c95fccd45b8bb8fb03">data</a>.<a class="code" href="struct_p_a_c_k_e_d.html#aab9207c118fc708020907d9b1e70740d">obs</a>;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;            <span class="comment">// ensure each obs has the correct receiver index</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="struct_p_a_c_k_e_d.html">obsd_t</a>* ptr = obs.<a class="code" href="structobs__t.html#a3cff1d90b248369f3c0d31b34cfb6344">data</a>, *ptrEnd = obs.<a class="code" href="structobs__t.html#a3cff1d90b248369f3c0d31b34cfb6344">data</a> + obs.<a class="code" href="structobs__t.html#a09e05f3d10900ec57feab9eca3c6c8a9">n</a>; ptr != ptrEnd; ptr++)</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;            {</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                ptr-&gt;<a class="code" href="struct_p_a_c_k_e_d.html#acc5234ecdd35b25f79485517be8eed92">rcv</a> = raw-&gt;<a class="code" href="struct_p_a_c_k_e_d.html#a8af60fcafd9292c1d211f52aa2cdad66">receiverIndex</a>;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;            }</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            <a class="code" href="classc_gps_parser.html#a3bb55b5835ba5fcea42b9a8fa824c945">GetDelegate</a>()-&gt;<a class="code" href="classi_gps_parser_delegate.html#a3d84621cccf117972b96af70c6e2c86a">OnObservationReceived</a>(<span class="keyword">this</span>, &amp;obs);</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        } <span class="keywordflow">break</span>;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="data__sets_8h.html#a534377a848e290b847dc1830258b216fa57efc6373e9ad1daf4074fb01cb73ff7">raw_data_type_ephemeris</a>:</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            <span class="keywordflow">switch</span> (satsys(raw-&gt;<a class="code" href="struct_p_a_c_k_e_d.html#a42fe1fcebdd514c95fccd45b8bb8fb03">data</a>.<a class="code" href="struct_p_a_c_k_e_d.html#a507d0fea4e85ab35d2b9b28cf195f880">eph</a>.<a class="code" href="structeph__t.html#ac0a88b549db74cff4f15b667e43860c5">sat</a>, &amp;prn))</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;            {</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            <span class="keywordflow">case</span> SYS_GPS:</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;            <span class="keywordflow">case</span> SYS_GAL:</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;            <span class="keywordflow">case</span> SYS_QZS:</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;            <span class="keywordflow">case</span> SYS_CMP:</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                <a class="code" href="classc_gps_parser.html#a3bb55b5835ba5fcea42b9a8fa824c945">GetDelegate</a>()-&gt;<a class="code" href="classi_gps_parser_delegate.html#ad51fee5d3324537e4a9a8664237b8626">OnGpsEphemerisReceived</a>(<span class="keyword">this</span>, &amp;(raw-&gt;<a class="code" href="struct_p_a_c_k_e_d.html#a42fe1fcebdd514c95fccd45b8bb8fb03">data</a>.<a class="code" href="struct_p_a_c_k_e_d.html#a507d0fea4e85ab35d2b9b28cf195f880">eph</a>), prn);</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;            }</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="data__sets_8h.html#a534377a848e290b847dc1830258b216fab15cb82530c3391252b7ae76b3692cec">raw_data_type_glonass_ephemeris</a>:</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;            <span class="keywordflow">if</span> (satsys(raw-&gt;<a class="code" href="struct_p_a_c_k_e_d.html#a42fe1fcebdd514c95fccd45b8bb8fb03">data</a>.<a class="code" href="struct_p_a_c_k_e_d.html#a507d0fea4e85ab35d2b9b28cf195f880">eph</a>.<a class="code" href="structeph__t.html#ac0a88b549db74cff4f15b667e43860c5">sat</a>, &amp;prn) == SYS_GLO)</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;            {</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                <a class="code" href="classc_gps_parser.html#a3bb55b5835ba5fcea42b9a8fa824c945">GetDelegate</a>()-&gt;<a class="code" href="classi_gps_parser_delegate.html#ab711598d3e65ae1b7ba4e7a04afedc29">OnGlonassEphemerisReceived</a>(<span class="keyword">this</span>, &amp;(raw-&gt;<a class="code" href="struct_p_a_c_k_e_d.html#a42fe1fcebdd514c95fccd45b8bb8fb03">data</a>.<a class="code" href="struct_p_a_c_k_e_d.html#a865f3b82703609d32876acf6188632e1">gloEph</a>), prn);</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;            }</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="data__sets_8h.html#a534377a848e290b847dc1830258b216fa847fc64d56ed382b32dc862f90926be0">raw_data_type_sbas</a>:</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;            <a class="code" href="classc_gps_parser.html#a3bb55b5835ba5fcea42b9a8fa824c945">GetDelegate</a>()-&gt;<a class="code" href="classi_gps_parser_delegate.html#a94a8e9fc5ffaf0635a5c19d468701a48">OnSbsReceived</a>(<span class="keyword">this</span>, &amp;(raw-&gt;<a class="code" href="struct_p_a_c_k_e_d.html#a42fe1fcebdd514c95fccd45b8bb8fb03">data</a>.<a class="code" href="struct_p_a_c_k_e_d.html#a881de0d23b22131154988ec36810d854">sbas</a>));</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="data__sets_8h.html#a534377a848e290b847dc1830258b216fad589388167a4194be62d479546af1c4f">raw_data_type_base_station_antenna_position</a>:</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            <a class="code" href="classc_gps_parser.html#a3bb55b5835ba5fcea42b9a8fa824c945">GetDelegate</a>()-&gt;<a class="code" href="classi_gps_parser_delegate.html#a1fea12f01b07177946f1ce10cd26eb9a">OnStationReceived</a>(<span class="keyword">this</span>, &amp;(raw-&gt;<a class="code" href="struct_p_a_c_k_e_d.html#a42fe1fcebdd514c95fccd45b8bb8fb03">data</a>.<a class="code" href="struct_p_a_c_k_e_d.html#ad2670dac578bf08fb3f85e72b6f68d3d">sta</a>));</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        }</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        (void)data;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        (void)dataLength;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    }</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="keyword">private</span>:</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <a class="code" href="structis__comm__instance__t.html">is_comm_instance_t</a> comm;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    uint8_t* commBuffer;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;};</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;</div><div class="line"><a name="l00164"></a><span class="lineno"><a class="line" href="classc_rtcm_parser.html">  164</a></span>&#160;<span class="keyword">class </span><a class="code" href="classc_rtcm_parser.html">cRtcmParser</a> : <span class="keyword">public</span> <a class="code" href="classc_gps_parser.html">cGpsParser</a></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;{</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00167"></a><span class="lineno"><a class="line" href="classc_rtcm_parser.html#afaaa681ef1eb70c3e0acf6550269f589">  167</a></span>&#160;    <a class="code" href="classc_rtcm_parser.html#afaaa681ef1eb70c3e0acf6550269f589">cRtcmParser</a>(<a class="code" href="classi_gps_parser_delegate.html">iGpsParserDelegate</a>* delegate) : <a class="code" href="classc_gps_parser.html">cGpsParser</a>(delegate)</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    {</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <a class="code" href="_gps_parser_8cpp.html#a148e5e8ba2ec554ced26a9d7bbe910da">INIT_M_RTCM</a>;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    }</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <a class="code" href="classc_rtcm_parser.html#af1f219fc554775a8241c7c7fcdd9c118">DECLARE_RTCM_DESTRUCTOR</a>(<a class="code" href="classc_rtcm_parser.html">cRtcmParser</a>);</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div><div class="line"><a name="l00174"></a><span class="lineno"><a class="line" href="classc_rtcm_parser.html#aa49ac9396fcf583ddbb1f7bcf2e6af71">  174</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classc_rtcm_parser.html#aa49ac9396fcf583ddbb1f7bcf2e6af71">WriteByte</a>(uint8_t b) <a class="code" href="_i_s_constants_8h.html#a5dea698950629d9e51d19c1a25be1c30">OVERRIDE</a></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    {</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        <a class="code" href="_gps_parser_8cpp.html#a684bb41a65461b7e9985286aea1d23d7">ALLOCATE_M_RTCM</a>;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        <span class="comment">// if we have no bytes yet, check for header</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        <span class="comment">// if we have exactly 3 bytes, we have enough to calculate the length</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        <span class="comment">// fewer than 3 bytes and we want to exit out early</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <span class="keywordflow">if</span> (m_rtcm.len &lt;= 3)</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        {</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;            <span class="comment">// check for header byte</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;            <span class="keywordflow">if</span> (m_rtcm.len == 0)</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;            {</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                <span class="comment">// 0xD3 is the first byte in an RTCM3 message</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                <span class="keywordflow">if</span> (b != 0xD3)</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                {</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                    <span class="comment">// no rtcm3 start byte yet...</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                }</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;            }</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m_rtcm.len == 3)</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;            {</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                uint32_t msgLength = <a class="code" href="_i_s_comm_8c.html#a272de13a614209d508c335242a1094ae">getBitsAsUInt32</a>(m_rtcm.buff, 14, 10);</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                <span class="keywordflow">if</span> (msgLength &gt; 1023)</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                {</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                    <span class="comment">// corrupt data</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                    <a class="code" href="classc_gps_parser.html#ab163e893a00283fd78a7798ecb5d0076">m_corruptPacketCount</a>++;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                    m_rtcm.len = 0;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                }</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                <span class="keywordflow">else</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                {</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                    <span class="comment">// set the bytes left to read (nbyte)</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                    <span class="comment">// use + 2 because we already read the first byte of the message here to bring us</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                    <span class="comment">// to a total length of 4</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                    m_rtcm.nbyte = msgLength + 2;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                }</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            }</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            <span class="comment">// append the byte</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            m_rtcm.buff[m_rtcm.len++] = b;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        }</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <span class="comment">// append the byte</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        m_rtcm.buff[m_rtcm.len++] = b;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        <span class="comment">// see if we are done reading bytes, if so calculate CRC and forward the message on to the uINS if it is valid</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        <span class="keywordflow">if</span> (--m_rtcm.nbyte == 0)</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        {</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;            <span class="comment">// if the message is large enough, forward it on</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            <span class="keywordflow">if</span> (m_rtcm.len &gt; 5)</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;            {</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                <span class="comment">// calculate length without crc bytes</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                uint32_t lenWithoutCrc = m_rtcm.len - 3;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                <span class="comment">// the CRC calculation does not include the 3 CRC bytes at the end for obvious reasons</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                uint32_t actualCRC = <a class="code" href="_i_s_comm_8c.html#abc9731bf8671a0eab821560d162d6a71">calculate24BitCRCQ</a>(m_rtcm.buff, lenWithoutCrc);</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                <span class="comment">// get the CRC from the last 3 bytes of the message</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                uint32_t correctCRC = <a class="code" href="_i_s_comm_8c.html#a272de13a614209d508c335242a1094ae">getBitsAsUInt32</a>(m_rtcm.buff + lenWithoutCrc, 0, 24);</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                <span class="comment">// if valid CRC, forward mesasge to uINS</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                <span class="keywordflow">if</span> (actualCRC == correctCRC)</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                {</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="classc_gps_parser.html#a3bb55b5835ba5fcea42b9a8fa824c945">GetDelegate</a>()-&gt;OnPacketReceived(<span class="keyword">this</span>, m_rtcm.buff, m_rtcm.len))</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                    {</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                        <span class="comment">// remove checksum from length</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                        m_rtcm.len = lenWithoutCrc;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                        <a class="code" href="classc_rtcm_parser.html#ae85ccd9e816c808f696f730f10b34b45">ParseMessage</a>(m_rtcm.buff, m_rtcm.len);</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                    }</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                }</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                <span class="keywordflow">else</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                {</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                    <span class="comment">// corrupt data</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                    <a class="code" href="classc_gps_parser.html#ab163e893a00283fd78a7798ecb5d0076">m_corruptPacketCount</a>++;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                }</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;            }</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;            m_rtcm.len = 0;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        }</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    }</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div><div class="line"><a name="l00255"></a><span class="lineno"><a class="line" href="classc_rtcm_parser.html#ae85ccd9e816c808f696f730f10b34b45">  255</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classc_rtcm_parser.html#ae85ccd9e816c808f696f730f10b34b45">ParseMessage</a>(<span class="keyword">const</span> uint8_t* data, <span class="keywordtype">int</span> dataLength) <a class="code" href="_i_s_constants_8h.html#a5dea698950629d9e51d19c1a25be1c30">OVERRIDE</a></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    {</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        (void)data;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        (void)dataLength;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="preprocessor">#if defined(RTK_EMBEDDED)</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="preprocessor">#if PLATFORM_IS_ARM</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        m_rtcm.time = <a class="code" href="_gps_parser_8h.html#ab52308f24bc1b1e7656c79b23fde92be">g_gps_latest_time</a>;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="_gps_parser_8h.html#ab52308f24bc1b1e7656c79b23fde92be">g_gps_latest_time</a>.<a class="code" href="structgtime__t.html#a56a0300ca49d82b1d2e7604027ec920b">time</a> == 0)</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        {</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;            m_rtcm.<a class="code" href="structgtime__t.html#a56a0300ca49d82b1d2e7604027ec920b">time</a> = utc2gpst(timeget());</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        }</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        {</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;            m_rtcm.time = <a class="code" href="_gps_parser_8h.html#ab52308f24bc1b1e7656c79b23fde92be">g_gps_latest_time</a>;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        }</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        <span class="keywordflow">if</span> (m_rtcm.time.time == 0)</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        {</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;            <span class="comment">// cannot parse until start time is set</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        }</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m_rtcm.buff != data)</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        {</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;            <span class="keywordflow">if</span> (m_rtcm.ownsBuff)</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;            {</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                RTK_FREE(m_rtcm.buff);</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;            }</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;            m_rtcm.ownsBuff = 0;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;            m_rtcm.buff = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)data;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        }</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        m_rtcm.len = dataLength;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        <span class="keywordflow">switch</span> (decode_rtcm3(&amp;m_rtcm))</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        {</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        <span class="keywordflow">case</span> DATA_TYPE_OBSERVATION:</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="struct_p_a_c_k_e_d.html">obsd_t</a>* ptr = m_rtcm.<a class="code" href="struct_p_a_c_k_e_d.html#aab9207c118fc708020907d9b1e70740d">obs</a>.<a class="code" href="struct_p_a_c_k_e_d.html#a42fe1fcebdd514c95fccd45b8bb8fb03">data</a>, *ptrEnd = m_rtcm.<a class="code" href="struct_p_a_c_k_e_d.html#aab9207c118fc708020907d9b1e70740d">obs</a>.<a class="code" href="struct_p_a_c_k_e_d.html#a42fe1fcebdd514c95fccd45b8bb8fb03">data</a> + m_rtcm.<a class="code" href="struct_p_a_c_k_e_d.html#aab9207c118fc708020907d9b1e70740d">obs</a>.n; ptr != ptrEnd; ptr++)</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;            {</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;                ptr-&gt;rcv = <a class="code" href="classc_gps_parser.html#a64d628afd753e74659ebb00a9f09fa37">GetReceiverIndex</a>();</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;            }</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            <a class="code" href="classc_gps_parser.html#a3bb55b5835ba5fcea42b9a8fa824c945">GetDelegate</a>()-&gt;<a class="code" href="classi_gps_parser_delegate.html#a3d84621cccf117972b96af70c6e2c86a">OnObservationReceived</a>(<span class="keyword">this</span>, &amp;m_rtcm.obs);</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;            m_rtcm.obs.n = 0; <span class="comment">// reset state</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        <span class="keywordflow">case</span> DATA_TYPE_EPHEMERIS:</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;            <span class="keywordtype">int</span> prn;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;            <span class="keywordflow">switch</span> (satsys(m_rtcm.ephsat, &amp;prn))</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            {</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;            <span class="keywordflow">case</span> SYS_GPS:</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;            <span class="keywordflow">case</span> SYS_GAL:</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;            <span class="keywordflow">case</span> SYS_QZS:</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;            <span class="keywordflow">case</span> SYS_CMP:</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                <a class="code" href="classc_gps_parser.html#a3bb55b5835ba5fcea42b9a8fa824c945">GetDelegate</a>()-&gt;<a class="code" href="classi_gps_parser_delegate.html#ad51fee5d3324537e4a9a8664237b8626">OnGpsEphemerisReceived</a>(<span class="keyword">this</span>, &amp;m_rtcm.eph, prn);</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;            <span class="keywordflow">case</span> SYS_GLO:</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                <a class="code" href="classc_gps_parser.html#a3bb55b5835ba5fcea42b9a8fa824c945">GetDelegate</a>()-&gt;<a class="code" href="classi_gps_parser_delegate.html#ab711598d3e65ae1b7ba4e7a04afedc29">OnGlonassEphemerisReceived</a>(<span class="keyword">this</span>, &amp;m_rtcm.geph, prn);</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;            }</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        <span class="keywordflow">case</span> DATA_TYPE_ANTENNA_POSITION:</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            <a class="code" href="classc_gps_parser.html#a3bb55b5835ba5fcea42b9a8fa824c945">GetDelegate</a>()-&gt;<a class="code" href="classi_gps_parser_delegate.html#a1fea12f01b07177946f1ce10cd26eb9a">OnStationReceived</a>(<span class="keyword">this</span>, &amp;m_rtcm.sta);</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;            </div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        <span class="keywordflow">case</span> DATA_TYPE_ERROR:</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        {</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;            uint32_t type = type = getbitu(m_rtcm.buff, 24, 12);</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;            <a class="code" href="classc_gps_parser.html#a3bb55b5835ba5fcea42b9a8fa824c945">GetDelegate</a>()-&gt;<a class="code" href="classi_gps_parser_delegate.html#a235705085991ff760cf10cb49317a743">OnError</a>(<span class="keyword">this</span>, type, -1);</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        } <span class="keywordflow">break</span>;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        }</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        m_rtcm.len = 0;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    }</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="keyword">private</span>:</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    DECLARE_M_RTCM;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;};</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;</div><div class="line"><a name="l00344"></a><span class="lineno"><a class="line" href="classc_ublox_parser.html">  344</a></span>&#160;<span class="keyword">class </span><a class="code" href="classc_ublox_parser.html">cUbloxParser</a> : <span class="keyword">public</span> <a class="code" href="classc_gps_parser.html">cGpsParser</a></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;{</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00347"></a><span class="lineno"><a class="line" href="classc_ublox_parser.html#a6c4ae2e169937ea33945a64de06b7400">  347</a></span>&#160;    <a class="code" href="classc_ublox_parser.html#a6c4ae2e169937ea33945a64de06b7400">cUbloxParser</a>(<a class="code" href="classi_gps_parser_delegate.html">iGpsParserDelegate</a>* delegate) : <a class="code" href="classc_gps_parser.html">cGpsParser</a>(delegate)</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    {</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        Reset();</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        <a class="code" href="_gps_parser_8cpp.html#a4d0912b39c05d5b3689ab040900a1899">INIT_M_RAW</a>(STRFMT_UBX);</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    }</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <a class="code" href="classc_ublox_parser.html#a373c095d651d8d10ce33917ea2af0162">DECLARE_RAW_DESTRUCTOR</a>(<a class="code" href="classc_ublox_parser.html">cUbloxParser</a>);</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div><div class="line"><a name="l00355"></a><span class="lineno"><a class="line" href="classc_ublox_parser.html#a4daf658f9f6edf2cc1bbf6dfe5a60660">  355</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classc_ublox_parser.html#a4daf658f9f6edf2cc1bbf6dfe5a60660">WriteByte</a>(uint8_t b) <a class="code" href="_i_s_constants_8h.html#a5dea698950629d9e51d19c1a25be1c30">OVERRIDE</a></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    {</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        <a class="code" href="_gps_parser_8cpp.html#a0c3b92111acd780de5d7c7d0fc43ebeb">ALLOCATE_M_RAW</a>;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        <span class="keywordflow">switch</span> (m_raw.len)</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        {</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        <span class="keywordflow">case</span> 0:</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;            <span class="keywordflow">if</span> (b == <a class="code" href="_gps_parser_8cpp.html#a04ee0b4cfe6327d1e3de36b7c1a66e84">UBLOX_PREAMBLE1</a>)</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;            {</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                m_raw.buff[m_raw.len++] = b;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;            }</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        <span class="keywordflow">case</span> 1:</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;            <span class="keywordflow">if</span> (b != <a class="code" href="_gps_parser_8cpp.html#a0ae2a1d4f7042bc01c87fc19041bc421">UBLOX_PREAMBLE2</a>)</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;            {</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                <span class="comment">// corrupt data</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                Reset();</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                <span class="keywordflow">return</span>;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;            }</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;            m_raw.buff[m_raw.len++] = b;</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        <span class="keywordflow">case</span> 2:</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;            m_classId = b;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;            m_raw.buff[m_raw.len++] = b;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        <span class="keywordflow">case</span> 3:</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;            m_messageId = b;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        <span class="keywordflow">case</span> 4: <span class="comment">// payload 1</span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        <span class="keywordflow">case</span> 5: <span class="comment">// payload 2</span></div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;            m_raw.buff[m_raw.len++] = b;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="_gps_parser_8cpp.html#a77fd73f7c23687368fac3da6984d04cb">UBLOX_HEADER_SIZE</a>:</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;            <span class="comment">// add 2 bytes for the checksum</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;            m_raw.nbyte = <a class="code" href="data__sets_8h.html#a3f5951b259e3965ee2f12dd5847c896c">BE_SWAP16</a>(*(uint16_t*)(m_raw.buff + 4)) + <a class="code" href="_gps_parser_8cpp.html#a486c299d08b6c853a39f6c796f67040f">UBLOX_CHECKSUM_SIZE</a>;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;            <span class="comment">// if packet size is larger than buffer minus header and checksum</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;            <span class="keywordflow">if</span> (m_raw.nbyte &lt; <a class="code" href="_gps_parser_8cpp.html#a486c299d08b6c853a39f6c796f67040f">UBLOX_CHECKSUM_SIZE</a> || m_raw.nbyte &gt; (<a class="code" href="_gps_parser_8cpp.html#a7e956e73ff783054bbd9326df6d69820">MAXRAWLEN</a> - <a class="code" href="_gps_parser_8cpp.html#a77fd73f7c23687368fac3da6984d04cb">UBLOX_HEADER_SIZE</a>))</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;            {</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                <span class="comment">// corrupt data</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;                <a class="code" href="classc_gps_parser.html#ab163e893a00283fd78a7798ecb5d0076">m_corruptPacketCount</a>++;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;                Reset();</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;                <span class="keywordflow">return</span>;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;            }</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        }</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        m_raw.buff[m_raw.len++] = b;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        <span class="keywordflow">if</span> (--m_raw.nbyte == 0)</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        {</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;            <span class="comment">// get actual checksum</span></div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;            uint8_t checksum1 = m_raw.buff[m_raw.len - 2];</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;            uint8_t checksum2 = m_raw.buff[m_raw.len - 1];</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;            uint8_t actualChecksum1, actualChecksum2;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;            <span class="comment">// checksum does not include the two preamble bytes</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;            CalculateChecksum(m_raw.buff, m_raw.len, actualChecksum1, actualChecksum2);</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;            <span class="keywordflow">if</span> (checksum1 == actualChecksum1 &amp;&amp; checksum2 == actualChecksum2)</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;            {</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="classc_gps_parser.html#a3bb55b5835ba5fcea42b9a8fa824c945">GetDelegate</a>()-&gt;OnPacketReceived(<span class="keyword">this</span>, m_raw.buff, m_raw.len))</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;                {</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;                    <a class="code" href="classc_ublox_parser.html#a52295ab27f45764fbb6f145e34acdedd">ParseMessage</a>(m_raw.buff, m_raw.len);</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;                }</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;            }</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;            {</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                <span class="comment">// corrupt data</span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                <a class="code" href="classc_gps_parser.html#ab163e893a00283fd78a7798ecb5d0076">m_corruptPacketCount</a>++;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;            }</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;            Reset();</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        }</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    }</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;</div><div class="line"><a name="l00425"></a><span class="lineno"><a class="line" href="classc_ublox_parser.html#a52295ab27f45764fbb6f145e34acdedd">  425</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classc_ublox_parser.html#a52295ab27f45764fbb6f145e34acdedd">ParseMessage</a>(<span class="keyword">const</span> uint8_t* data, <span class="keywordtype">int</span> dataLength) <a class="code" href="_i_s_constants_8h.html#a5dea698950629d9e51d19c1a25be1c30">OVERRIDE</a></div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    {</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        (void)data;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        (void)dataLength;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="preprocessor">#if defined(RTK_EMBEDDED)</span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        <span class="keywordflow">if</span> (m_raw.buff != data)</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        {</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;            <span class="keywordflow">if</span> (m_raw.ownsBuff)</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;            {</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;                RTK_FREE(m_raw.buff);</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;            }</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;            m_raw.ownsBuff = 0;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;            m_raw.buff = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)data;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        }</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        m_raw.len = dataLength;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        <span class="keywordflow">switch</span> (decode_ubx(&amp;m_raw, 0))</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        {</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        <span class="keywordflow">case</span> DATA_TYPE_OBSERVATION:</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="struct_p_a_c_k_e_d.html">obsd_t</a>* ptr = m_raw.<a class="code" href="struct_p_a_c_k_e_d.html#aab9207c118fc708020907d9b1e70740d">obs</a>.<a class="code" href="struct_p_a_c_k_e_d.html#a42fe1fcebdd514c95fccd45b8bb8fb03">data</a>, *ptrEnd = m_raw.<a class="code" href="struct_p_a_c_k_e_d.html#aab9207c118fc708020907d9b1e70740d">obs</a>.<a class="code" href="struct_p_a_c_k_e_d.html#a42fe1fcebdd514c95fccd45b8bb8fb03">data</a> + m_raw.<a class="code" href="struct_p_a_c_k_e_d.html#aab9207c118fc708020907d9b1e70740d">obs</a>.n; ptr != ptrEnd; ptr++)</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;            {</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                ptr-&gt;rcv = <a class="code" href="classc_gps_parser.html#a64d628afd753e74659ebb00a9f09fa37">GetReceiverIndex</a>();</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;            }</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;            <a class="code" href="classc_gps_parser.html#a3bb55b5835ba5fcea42b9a8fa824c945">GetDelegate</a>()-&gt;<a class="code" href="classi_gps_parser_delegate.html#a3d84621cccf117972b96af70c6e2c86a">OnObservationReceived</a>(<span class="keyword">this</span>, &amp;m_raw.obs);</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        <span class="keywordflow">case</span> DATA_TYPE_EPHEMERIS:</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;            <span class="keywordtype">int</span> prn;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;            <span class="keywordflow">switch</span> (satsys(m_raw.ephsat, &amp;prn))</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;            {</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;            <span class="keywordflow">case</span> SYS_GPS:</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;            <span class="keywordflow">case</span> SYS_GAL:</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;            <span class="keywordflow">case</span> SYS_QZS:</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;            <span class="keywordflow">case</span> SYS_CMP:</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;                <a class="code" href="classc_gps_parser.html#a3bb55b5835ba5fcea42b9a8fa824c945">GetDelegate</a>()-&gt;<a class="code" href="classi_gps_parser_delegate.html#ad51fee5d3324537e4a9a8664237b8626">OnGpsEphemerisReceived</a>(<span class="keyword">this</span>, &amp;m_raw.eph, prn);</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;            <span class="keywordflow">case</span> SYS_GLO:</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                <a class="code" href="classc_gps_parser.html#a3bb55b5835ba5fcea42b9a8fa824c945">GetDelegate</a>()-&gt;<a class="code" href="classi_gps_parser_delegate.html#ab711598d3e65ae1b7ba4e7a04afedc29">OnGlonassEphemerisReceived</a>(<span class="keyword">this</span>, &amp;m_raw.geph, prn);</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;            }</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        <span class="keywordflow">case</span> DATA_TYPE_SBS:</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;            <a class="code" href="classc_gps_parser.html#a3bb55b5835ba5fcea42b9a8fa824c945">GetDelegate</a>()-&gt;<a class="code" href="classi_gps_parser_delegate.html#a94a8e9fc5ffaf0635a5c19d468701a48">OnSbsReceived</a>(<span class="keyword">this</span>, &amp;m_raw.sbsmsg);</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        <span class="keywordflow">case</span> DATA_TYPE_ANTENNA_POSITION:</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;            <a class="code" href="classc_gps_parser.html#a3bb55b5835ba5fcea42b9a8fa824c945">GetDelegate</a>()-&gt;<a class="code" href="classi_gps_parser_delegate.html#a1fea12f01b07177946f1ce10cd26eb9a">OnStationReceived</a>(<span class="keyword">this</span>, &amp;m_raw.sta);</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        <span class="keywordflow">case</span> DATA_TYPE_ION_UTC_ALMANAC:</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;            <a class="code" href="classc_gps_parser.html#a3bb55b5835ba5fcea42b9a8fa824c945">GetDelegate</a>()-&gt;<a class="code" href="classi_gps_parser_delegate.html#a938592121441395308150fa8d1a9faf3">OnIonosphereModelUtcAlmanacReceived</a>(<span class="keyword">this</span>, &amp;m_raw.ionUtcAlm);</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;            </div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        <span class="keywordflow">case</span> DATA_TYPE_ERROR:</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        {</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;            uint32_t type = (*(m_raw.buff + 2) &lt;&lt; 8) + *(m_raw.buff + 3);</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;            <a class="code" href="classc_gps_parser.html#a3bb55b5835ba5fcea42b9a8fa824c945">GetDelegate</a>()-&gt;<a class="code" href="classi_gps_parser_delegate.html#a235705085991ff760cf10cb49317a743">OnError</a>(<span class="keyword">this</span>, type, -1);</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        } <span class="keywordflow">break</span>;    </div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        }</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        Reset();</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    }</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;<span class="keyword">private</span>:</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <span class="keywordtype">void</span> Reset()</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    {</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        m_raw.len = m_raw.nbyte = 0;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        m_messageId = 0;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        m_classId = 0;</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    }</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="keywordtype">void</span> CalculateChecksum(<span class="keyword">const</span> uint8_t* data, <span class="keywordtype">int</span> dataLength, uint8_t&amp; checksum1, uint8_t&amp; checksum2)</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    {</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        checksum1 = 0;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        checksum2 = 0;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        <span class="comment">// skip the first two preamble bytes and the last two checksum bytes, they are not part of the checksum</span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">const</span> uint8_t* ptr = data + 2, *ptrEnd = data + (dataLength - <a class="code" href="_gps_parser_8cpp.html#a486c299d08b6c853a39f6c796f67040f">UBLOX_CHECKSUM_SIZE</a>); ptr != ptrEnd; ptr++)</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        {</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;            checksum1 += *ptr;</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;            checksum2 += checksum1;</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        }</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    }</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    DECLARE_M_RAW;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    uint8_t m_messageId;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    uint8_t m_classId;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;};</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;</div><div class="line"><a name="l00522"></a><span class="lineno"><a class="line" href="classc_gps_parser.html#aeef2b134ff51e193c5723eb26ffead58">  522</a></span>&#160;<a class="code" href="classc_gps_parser.html">cGpsParser</a>* <a class="code" href="classc_gps_parser.html#aeef2b134ff51e193c5723eb26ffead58">cGpsParser::CreateParser</a>(<a class="code" href="_gps_parser_8h.html#a281586dc7a286fe7a7b73e608ff8402b">eGpsParserType</a> type, <a class="code" href="classi_gps_parser_delegate.html">iGpsParserDelegate</a>* delegate)</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;{</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <a class="code" href="classc_gps_parser.html">cGpsParser</a>* parser = <a class="code" href="_i_s_constants_8h.html#a3ef7eab8cd0e570b6586628cc9d5ccab">NULLPTR</a>;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    </div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="keywordflow">switch</span> (type)</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    {</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="_gps_parser_8h.html#a281586dc7a286fe7a7b73e608ff8402bafb20930bc97135c6a20de3655f1bef05">GpsParserTypeInertialSense</a>:</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        parser = <span class="keyword">new</span> <a class="code" href="classc_inertial_sense_parser.html">cInertialSenseParser</a>(delegate);</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="_gps_parser_8h.html#a281586dc7a286fe7a7b73e608ff8402ba24375dc3471667ab50dc2a7dfe14699c">GpsParserTypeUblox</a>:</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        parser = <span class="keyword">new</span> <a class="code" href="classc_ublox_parser.html">cUbloxParser</a>(delegate);</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="_gps_parser_8h.html#a281586dc7a286fe7a7b73e608ff8402babcc322c3c01b64f0d8830ea810b3c18c">GpsParserTypeRtcm3</a>:</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        parser = <span class="keyword">new</span> <a class="code" href="classc_rtcm_parser.html">cRtcmParser</a>(delegate);</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        <span class="keywordflow">return</span> parser;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    }</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    </div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    parser-&gt;m_receiverIndex = 1;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <span class="keywordflow">return</span> parser;</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;}</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;</div><div class="line"><a name="l00548"></a><span class="lineno"><a class="line" href="classc_gps_parser.html#a5600c0ca39301545821df51a0292d270">  548</a></span>&#160;<a class="code" href="classc_gps_parser.html#a5600c0ca39301545821df51a0292d270">cGpsParser::cGpsParser</a>(<a class="code" href="classi_gps_parser_delegate.html">iGpsParserDelegate</a>* delegate)</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;{</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    assert(delegate != NULL);</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    m_delegate = delegate;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <a class="code" href="classc_gps_parser.html#ab163e893a00283fd78a7798ecb5d0076">m_corruptPacketCount</a> = 0;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;}</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="preprocessor">#if defined(__GNUC__)</span></div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="preprocessor">#pragma GCC diagnostic pop</span></div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="preprocessor">#endif</span></div><div class="ttc" id="structis__comm__instance__t_html_a9d0ddeeff9552b068e88ada137f1a144"><div class="ttname"><a href="structis__comm__instance__t.html#a9d0ddeeff9552b068e88ada137f1a144">is_comm_instance_t::buffer</a></div><div class="ttdeci">uint8_t * buffer</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00089">ISComm.h:89</a></div></div>
<div class="ttc" id="data__sets_8h_html_a534377a848e290b847dc1830258b216fa402bb369fbbeff903fbe5dd44aa8d321"><div class="ttname"><a href="data__sets_8h.html#a534377a848e290b847dc1830258b216fa402bb369fbbeff903fbe5dd44aa8d321">raw_data_type_observation</a></div><div class="ttdef"><b>Definition:</b> <a href="data__sets_8h_source.html#l02371">data_sets.h:2371</a></div></div>
<div class="ttc" id="_gps_parser_8cpp_html_a77fd73f7c23687368fac3da6984d04cb"><div class="ttname"><a href="_gps_parser_8cpp.html#a77fd73f7c23687368fac3da6984d04cb">UBLOX_HEADER_SIZE</a></div><div class="ttdeci">#define UBLOX_HEADER_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="_gps_parser_8cpp_source.html#l00023">GpsParser.cpp:23</a></div></div>
<div class="ttc" id="struct_p_a_c_k_e_d_html_ad2670dac578bf08fb3f85e72b6f68d3d"><div class="ttname"><a href="struct_p_a_c_k_e_d.html#ad2670dac578bf08fb3f85e72b6f68d3d">PACKED::sta</a></div><div class="ttdeci">sta_t sta</div><div class="ttdef"><b>Definition:</b> <a href="data__sets_8h_source.html#l02407">data_sets.h:2407</a></div></div>
<div class="ttc" id="_gps_parser_8cpp_html_a7e956e73ff783054bbd9326df6d69820"><div class="ttname"><a href="_gps_parser_8cpp.html#a7e956e73ff783054bbd9326df6d69820">MAXRAWLEN</a></div><div class="ttdeci">#define MAXRAWLEN</div><div class="ttdef"><b>Definition:</b> <a href="_gps_parser_8cpp_source.html#l00053">GpsParser.cpp:53</a></div></div>
<div class="ttc" id="classc_ublox_parser_html_a373c095d651d8d10ce33917ea2af0162"><div class="ttname"><a href="classc_ublox_parser.html#a373c095d651d8d10ce33917ea2af0162">cUbloxParser::DECLARE_RAW_DESTRUCTOR</a></div><div class="ttdeci">DECLARE_RAW_DESTRUCTOR(cUbloxParser)</div></div>
<div class="ttc" id="data__sets_8h_html_a534377a848e290b847dc1830258b216fad589388167a4194be62d479546af1c4f"><div class="ttname"><a href="data__sets_8h.html#a534377a848e290b847dc1830258b216fad589388167a4194be62d479546af1c4f">raw_data_type_base_station_antenna_position</a></div><div class="ttdef"><b>Definition:</b> <a href="data__sets_8h_source.html#l02383">data_sets.h:2383</a></div></div>
<div class="ttc" id="classc_ublox_parser_html_a4daf658f9f6edf2cc1bbf6dfe5a60660"><div class="ttname"><a href="classc_ublox_parser.html#a4daf658f9f6edf2cc1bbf6dfe5a60660">cUbloxParser::WriteByte</a></div><div class="ttdeci">void WriteByte(uint8_t b) OVERRIDE</div><div class="ttdef"><b>Definition:</b> <a href="_gps_parser_8cpp_source.html#l00355">GpsParser.cpp:355</a></div></div>
<div class="ttc" id="_gps_parser_8cpp_html_a0ae2a1d4f7042bc01c87fc19041bc421"><div class="ttname"><a href="_gps_parser_8cpp.html#a0ae2a1d4f7042bc01c87fc19041bc421">UBLOX_PREAMBLE2</a></div><div class="ttdeci">#define UBLOX_PREAMBLE2</div><div class="ttdef"><b>Definition:</b> <a href="_gps_parser_8cpp_source.html#l00022">GpsParser.cpp:22</a></div></div>
<div class="ttc" id="data__sets_8h_html_ad9a80974e60c35748e602c96a84aea25"><div class="ttname"><a href="data__sets_8h.html#ad9a80974e60c35748e602c96a84aea25">MAX_OBSERVATION_COUNT_IN_RTK_MESSAGE</a></div><div class="ttdeci">#define MAX_OBSERVATION_COUNT_IN_RTK_MESSAGE</div><div class="ttdef"><b>Definition:</b> <a href="data__sets_8h_source.html#l01929">data_sets.h:1929</a></div></div>
<div class="ttc" id="classi_gps_parser_delegate_html_a235705085991ff760cf10cb49317a743"><div class="ttname"><a href="classi_gps_parser_delegate.html#a235705085991ff760cf10cb49317a743">iGpsParserDelegate::OnError</a></div><div class="ttdeci">virtual void OnError(const cGpsParser *parser, uint32_t id, uint32_t errorCode)</div><div class="ttdef"><b>Definition:</b> <a href="_gps_parser_8h_source.html#l00151">GpsParser.h:151</a></div></div>
<div class="ttc" id="_i_s_constants_8h_html_a3ef7eab8cd0e570b6586628cc9d5ccab"><div class="ttname"><a href="_i_s_constants_8h.html#a3ef7eab8cd0e570b6586628cc9d5ccab">NULLPTR</a></div><div class="ttdeci">#define NULLPTR</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_constants_8h_source.html#l00426">ISConstants.h:426</a></div></div>
<div class="ttc" id="classi_gps_parser_delegate_html_a938592121441395308150fa8d1a9faf3"><div class="ttname"><a href="classi_gps_parser_delegate.html#a938592121441395308150fa8d1a9faf3">iGpsParserDelegate::OnIonosphereModelUtcAlmanacReceived</a></div><div class="ttdeci">virtual void OnIonosphereModelUtcAlmanacReceived(const cGpsParser *parser, ion_model_utc_alm_t *ionUtcAlm)</div><div class="ttdef"><b>Definition:</b> <a href="_gps_parser_8h_source.html#l00139">GpsParser.h:139</a></div></div>
<div class="ttc" id="classc_inertial_sense_parser_html_a3ffee82704c03bc803c5826f44601d8d"><div class="ttname"><a href="classc_inertial_sense_parser.html#a3ffee82704c03bc803c5826f44601d8d">cInertialSenseParser::ParseMessage</a></div><div class="ttdeci">void ParseMessage(const uint8_t *data, int dataLength) OVERRIDE</div><div class="ttdef"><b>Definition:</b> <a href="_gps_parser_8cpp_source.html#l00098">GpsParser.cpp:98</a></div></div>
<div class="ttc" id="classc_rtcm_parser_html_af1f219fc554775a8241c7c7fcdd9c118"><div class="ttname"><a href="classc_rtcm_parser.html#af1f219fc554775a8241c7c7fcdd9c118">cRtcmParser::DECLARE_RTCM_DESTRUCTOR</a></div><div class="ttdeci">DECLARE_RTCM_DESTRUCTOR(cRtcmParser)</div></div>
<div class="ttc" id="structobs__t_html_a09e05f3d10900ec57feab9eca3c6c8a9"><div class="ttname"><a href="structobs__t.html#a09e05f3d10900ec57feab9eca3c6c8a9">obs_t::n</a></div><div class="ttdeci">int32_t n</div><div class="ttdef"><b>Definition:</b> <a href="data__sets_8h_source.html#l01935">data_sets.h:1935</a></div></div>
<div class="ttc" id="data__sets_8h_html_a534377a848e290b847dc1830258b216fa57efc6373e9ad1daf4074fb01cb73ff7"><div class="ttname"><a href="data__sets_8h.html#a534377a848e290b847dc1830258b216fa57efc6373e9ad1daf4074fb01cb73ff7">raw_data_type_ephemeris</a></div><div class="ttdef"><b>Definition:</b> <a href="data__sets_8h_source.html#l02374">data_sets.h:2374</a></div></div>
<div class="ttc" id="struct_p_a_c_k_e_d_html_a56850797a0ab0be4c8c7ee6dc291b06b"><div class="ttname"><a href="struct_p_a_c_k_e_d.html#a56850797a0ab0be4c8c7ee6dc291b06b">PACKED::obsCount</a></div><div class="ttdeci">uint8_t obsCount</div><div class="ttdef"><b>Definition:</b> <a href="data__sets_8h_source.html#l02426">data_sets.h:2426</a></div></div>
<div class="ttc" id="classc_inertial_sense_parser_html_a7a2539213977fbca6f25899e144c0e5f"><div class="ttname"><a href="classc_inertial_sense_parser.html#a7a2539213977fbca6f25899e144c0e5f">cInertialSenseParser::cInertialSenseParser</a></div><div class="ttdeci">cInertialSenseParser(iGpsParserDelegate *delegate)</div><div class="ttdef"><b>Definition:</b> <a href="_gps_parser_8cpp_source.html#l00063">GpsParser.cpp:63</a></div></div>
<div class="ttc" id="structis__comm__instance__t_html_a1dec969da2a5410a03f86f20a04f59c9"><div class="ttname"><a href="structis__comm__instance__t.html#a1dec969da2a5410a03f86f20a04f59c9">is_comm_instance_t::errorCount</a></div><div class="ttdeci">uint32_t errorCount</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00098">ISComm.h:98</a></div></div>
<div class="ttc" id="struct_p_a_c_k_e_d_html_a865f3b82703609d32876acf6188632e1"><div class="ttname"><a href="struct_p_a_c_k_e_d.html#a865f3b82703609d32876acf6188632e1">PACKED::gloEph</a></div><div class="ttdeci">geph_t gloEph</div><div class="ttdef"><b>Definition:</b> <a href="data__sets_8h_source.html#l02401">data_sets.h:2401</a></div></div>
<div class="ttc" id="_gps_parser_8h_html_a281586dc7a286fe7a7b73e608ff8402bafb20930bc97135c6a20de3655f1bef05"><div class="ttname"><a href="_gps_parser_8h.html#a281586dc7a286fe7a7b73e608ff8402bafb20930bc97135c6a20de3655f1bef05">GpsParserTypeInertialSense</a></div><div class="ttdef"><b>Definition:</b> <a href="_gps_parser_8h_source.html#l00041">GpsParser.h:41</a></div></div>
<div class="ttc" id="classc_ublox_parser_html_a52295ab27f45764fbb6f145e34acdedd"><div class="ttname"><a href="classc_ublox_parser.html#a52295ab27f45764fbb6f145e34acdedd">cUbloxParser::ParseMessage</a></div><div class="ttdeci">void ParseMessage(const uint8_t *data, int dataLength) OVERRIDE</div><div class="ttdef"><b>Definition:</b> <a href="_gps_parser_8cpp_source.html#l00425">GpsParser.cpp:425</a></div></div>
<div class="ttc" id="classc_gps_parser_html_aeef2b134ff51e193c5723eb26ffead58"><div class="ttname"><a href="classc_gps_parser.html#aeef2b134ff51e193c5723eb26ffead58">cGpsParser::CreateParser</a></div><div class="ttdeci">static cGpsParser * CreateParser(eGpsParserType type, iGpsParserDelegate *delegate)</div><div class="ttdef"><b>Definition:</b> <a href="_gps_parser_8cpp_source.html#l00522">GpsParser.cpp:522</a></div></div>
<div class="ttc" id="data__sets_8h_html_ac8520eaea81a5b3d8e163ee01e2f9388"><div class="ttname"><a href="data__sets_8h.html#ac8520eaea81a5b3d8e163ee01e2f9388">DID_GPS_BASE_RAW</a></div><div class="ttdeci">#define DID_GPS_BASE_RAW</div><div class="ttdef"><b>Definition:</b> <a href="data__sets_8h_source.html#l00094">data_sets.h:94</a></div></div>
<div class="ttc" id="classi_gps_parser_delegate_html_ab711598d3e65ae1b7ba4e7a04afedc29"><div class="ttname"><a href="classi_gps_parser_delegate.html#ab711598d3e65ae1b7ba4e7a04afedc29">iGpsParserDelegate::OnGlonassEphemerisReceived</a></div><div class="ttdeci">virtual void OnGlonassEphemerisReceived(const cGpsParser *parser, const geph_t *geph, int prn)</div><div class="ttdef"><b>Definition:</b> <a href="_gps_parser_8h_source.html#l00105">GpsParser.h:105</a></div></div>
<div class="ttc" id="_gps_parser_8h_html_ab52308f24bc1b1e7656c79b23fde92be"><div class="ttname"><a href="_gps_parser_8h.html#ab52308f24bc1b1e7656c79b23fde92be">g_gps_latest_time</a></div><div class="ttdeci">gtime_t g_gps_latest_time</div></div>
<div class="ttc" id="classi_gps_parser_delegate_html_a94a8e9fc5ffaf0635a5c19d468701a48"><div class="ttname"><a href="classi_gps_parser_delegate.html#a94a8e9fc5ffaf0635a5c19d468701a48">iGpsParserDelegate::OnSbsReceived</a></div><div class="ttdeci">virtual void OnSbsReceived(const cGpsParser *parser, const sbsmsg_t *sbs)</div><div class="ttdef"><b>Definition:</b> <a href="_gps_parser_8h_source.html#l00117">GpsParser.h:117</a></div></div>
<div class="ttc" id="classc_inertial_sense_parser_html_a946b92985b6663bccd5f02d6afee1776"><div class="ttname"><a href="classc_inertial_sense_parser.html#a946b92985b6663bccd5f02d6afee1776">cInertialSenseParser::WriteByte</a></div><div class="ttdeci">void WriteByte(uint8_t b) OVERRIDE</div><div class="ttdef"><b>Definition:</b> <a href="_gps_parser_8cpp_source.html#l00076">GpsParser.cpp:76</a></div></div>
<div class="ttc" id="_i_s_comm_8c_html_a272de13a614209d508c335242a1094ae"><div class="ttname"><a href="_i_s_comm_8c.html#a272de13a614209d508c335242a1094ae">getBitsAsUInt32</a></div><div class="ttdeci">unsigned int getBitsAsUInt32(const unsigned char *buffer, unsigned int pos, unsigned int len)</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8c_source.html#l00080">ISComm.c:80</a></div></div>
<div class="ttc" id="_i_s_constants_8h_html_a5dea698950629d9e51d19c1a25be1c30"><div class="ttname"><a href="_i_s_constants_8h.html#a5dea698950629d9e51d19c1a25be1c30">OVERRIDE</a></div><div class="ttdeci">#define OVERRIDE</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_constants_8h_source.html#l00423">ISConstants.h:423</a></div></div>
<div class="ttc" id="_i_s_comm_8c_html_a9ee32c6b88cfb4ea9697e1a1b2b6b657"><div class="ttname"><a href="_i_s_comm_8c.html#a9ee32c6b88cfb4ea9697e1a1b2b6b657">is_comm_parse</a></div><div class="ttdeci">uint32_t is_comm_parse(is_comm_instance_t *instance, uint8_t byte)</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8c_source.html#l00445">ISComm.c:445</a></div></div>
<div class="ttc" id="classc_ublox_parser_html"><div class="ttname"><a href="classc_ublox_parser.html">cUbloxParser</a></div><div class="ttdef"><b>Definition:</b> <a href="_gps_parser_8cpp_source.html#l00344">GpsParser.cpp:344</a></div></div>
<div class="ttc" id="structgtime__t_html"><div class="ttname"><a href="structgtime__t.html">gtime_t</a></div><div class="ttdef"><b>Definition:</b> <a href="data__sets_8h_source.html#l01726">data_sets.h:1726</a></div></div>
<div class="ttc" id="classc_inertial_sense_parser_html"><div class="ttname"><a href="classc_inertial_sense_parser.html">cInertialSenseParser</a></div><div class="ttdef"><b>Definition:</b> <a href="_gps_parser_8cpp_source.html#l00059">GpsParser.cpp:59</a></div></div>
<div class="ttc" id="struct_p_a_c_k_e_d_html_a507d0fea4e85ab35d2b9b28cf195f880"><div class="ttname"><a href="struct_p_a_c_k_e_d.html#a507d0fea4e85ab35d2b9b28cf195f880">PACKED::eph</a></div><div class="ttdeci">eph_t eph</div><div class="ttdef"><b>Definition:</b> <a href="data__sets_8h_source.html#l02398">data_sets.h:2398</a></div></div>
<div class="ttc" id="classc_rtcm_parser_html_aa49ac9396fcf583ddbb1f7bcf2e6af71"><div class="ttname"><a href="classc_rtcm_parser.html#aa49ac9396fcf583ddbb1f7bcf2e6af71">cRtcmParser::WriteByte</a></div><div class="ttdeci">void WriteByte(uint8_t b) OVERRIDE</div><div class="ttdef"><b>Definition:</b> <a href="_gps_parser_8cpp_source.html#l00174">GpsParser.cpp:174</a></div></div>
<div class="ttc" id="data__sets_8h_html_af7402feb87584ebeaefe507e191f8930"><div class="ttname"><a href="data__sets_8h.html#af7402feb87584ebeaefe507e191f8930">DID_GPS2_RAW</a></div><div class="ttdeci">#define DID_GPS2_RAW</div><div class="ttdef"><b>Definition:</b> <a href="data__sets_8h_source.html#l00104">data_sets.h:104</a></div></div>
<div class="ttc" id="classc_gps_parser_html_a5600c0ca39301545821df51a0292d270"><div class="ttname"><a href="classc_gps_parser.html#a5600c0ca39301545821df51a0292d270">cGpsParser::cGpsParser</a></div><div class="ttdeci">cGpsParser(iGpsParserDelegate *delegate)</div><div class="ttdef"><b>Definition:</b> <a href="_gps_parser_8cpp_source.html#l00548">GpsParser.cpp:548</a></div></div>
<div class="ttc" id="classi_gps_parser_delegate_html_ad51fee5d3324537e4a9a8664237b8626"><div class="ttname"><a href="classi_gps_parser_delegate.html#ad51fee5d3324537e4a9a8664237b8626">iGpsParserDelegate::OnGpsEphemerisReceived</a></div><div class="ttdeci">virtual void OnGpsEphemerisReceived(const cGpsParser *parser, const eph_t *eph, int prn)</div><div class="ttdef"><b>Definition:</b> <a href="_gps_parser_8h_source.html#l00092">GpsParser.h:92</a></div></div>
<div class="ttc" id="data__sets_8h_html_a3f5951b259e3965ee2f12dd5847c896c"><div class="ttname"><a href="data__sets_8h.html#a3f5951b259e3965ee2f12dd5847c896c">BE_SWAP16</a></div><div class="ttdeci">#define BE_SWAP16(_i)</div><div class="ttdef"><b>Definition:</b> <a href="data__sets_8h_source.html#l03061">data_sets.h:3061</a></div></div>
<div class="ttc" id="data__sets_8h_html_ae805de4fa8fac52ea9ed1e9c6fd6259f"><div class="ttname"><a href="data__sets_8h.html#ae805de4fa8fac52ea9ed1e9c6fd6259f">DID_GPS1_RAW</a></div><div class="ttdeci">#define DID_GPS1_RAW</div><div class="ttdef"><b>Definition:</b> <a href="data__sets_8h_source.html#l00103">data_sets.h:103</a></div></div>
<div class="ttc" id="_i_s_constants_8h_html_a08df5b6fa6b8d02fce35aedf8776e435"><div class="ttname"><a href="_i_s_constants_8h.html#a08df5b6fa6b8d02fce35aedf8776e435">FREE</a></div><div class="ttdeci">#define FREE(m)</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_constants_8h_source.html#l00148">ISConstants.h:148</a></div></div>
<div class="ttc" id="_i_s_constants_8h_html_a43880057a63fb01126278a533081c603"><div class="ttname"><a href="_i_s_constants_8h.html#a43880057a63fb01126278a533081c603">MALLOC</a></div><div class="ttdeci">#define MALLOC(m)</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_constants_8h_source.html#l00146">ISConstants.h:146</a></div></div>
<div class="ttc" id="_i_s_comm_8c_html_abc9731bf8671a0eab821560d162d6a71"><div class="ttname"><a href="_i_s_comm_8c.html#abc9731bf8671a0eab821560d162d6a71">calculate24BitCRCQ</a></div><div class="ttdeci">unsigned int calculate24BitCRCQ(unsigned char *buffer, unsigned int len)</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8c_source.html#l00027">ISComm.c:27</a></div></div>
<div class="ttc" id="_gps_parser_8h_html_a281586dc7a286fe7a7b73e608ff8402babcc322c3c01b64f0d8830ea810b3c18c"><div class="ttname"><a href="_gps_parser_8h.html#a281586dc7a286fe7a7b73e608ff8402babcc322c3c01b64f0d8830ea810b3c18c">GpsParserTypeRtcm3</a></div><div class="ttdef"><b>Definition:</b> <a href="_gps_parser_8h_source.html#l00051">GpsParser.h:51</a></div></div>
<div class="ttc" id="classc_gps_parser_html"><div class="ttname"><a href="classc_gps_parser.html">cGpsParser</a></div><div class="ttdef"><b>Definition:</b> <a href="_gps_parser_8h_source.html#l00159">GpsParser.h:159</a></div></div>
<div class="ttc" id="structobs__t_html_a2dfe38f511872663338a62d184de9940"><div class="ttname"><a href="structobs__t.html#a2dfe38f511872663338a62d184de9940">obs_t::nmax</a></div><div class="ttdeci">int32_t nmax</div><div class="ttdef"><b>Definition:</b> <a href="data__sets_8h_source.html#l01938">data_sets.h:1938</a></div></div>
<div class="ttc" id="struct_p_a_c_k_e_d_html_adc36112750f9a3e53751c1df40765112"><div class="ttname"><a href="struct_p_a_c_k_e_d.html#adc36112750f9a3e53751c1df40765112">PACKED::dataType</a></div><div class="ttdeci">uint8_t dataType</div><div class="ttdef"><b>Definition:</b> <a href="data__sets_8h_source.html#l02423">data_sets.h:2423</a></div></div>
<div class="ttc" id="_gps_parser_8cpp_html_a486c299d08b6c853a39f6c796f67040f"><div class="ttname"><a href="_gps_parser_8cpp.html#a486c299d08b6c853a39f6c796f67040f">UBLOX_CHECKSUM_SIZE</a></div><div class="ttdeci">#define UBLOX_CHECKSUM_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="_gps_parser_8cpp_source.html#l00024">GpsParser.cpp:24</a></div></div>
<div class="ttc" id="classi_gps_parser_delegate_html_a1fea12f01b07177946f1ce10cd26eb9a"><div class="ttname"><a href="classi_gps_parser_delegate.html#a1fea12f01b07177946f1ce10cd26eb9a">iGpsParserDelegate::OnStationReceived</a></div><div class="ttdeci">virtual void OnStationReceived(const cGpsParser *parser, sta_t *sta)</div><div class="ttdef"><b>Definition:</b> <a href="_gps_parser_8h_source.html#l00128">GpsParser.h:128</a></div></div>
<div class="ttc" id="structgtime__t_html_a56a0300ca49d82b1d2e7604027ec920b"><div class="ttname"><a href="structgtime__t.html#a56a0300ca49d82b1d2e7604027ec920b">gtime_t::time</a></div><div class="ttdeci">int64_t time</div><div class="ttdef"><b>Definition:</b> <a href="data__sets_8h_source.html#l01729">data_sets.h:1729</a></div></div>
<div class="ttc" id="structis__comm__instance__t_html_a529481b163367f8aa8e863dbce769553"><div class="ttname"><a href="structis__comm__instance__t.html#a529481b163367f8aa8e863dbce769553">is_comm_instance_t::bufferSize</a></div><div class="ttdeci">uint32_t bufferSize</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00092">ISComm.h:92</a></div></div>
<div class="ttc" id="_gps_parser_8h_html"><div class="ttname"><a href="_gps_parser_8h.html">GpsParser.h</a></div></div>
<div class="ttc" id="struct_p_a_c_k_e_d_html_a42fe1fcebdd514c95fccd45b8bb8fb03"><div class="ttname"><a href="struct_p_a_c_k_e_d.html#a42fe1fcebdd514c95fccd45b8bb8fb03">PACKED::data</a></div><div class="ttdeci">uGpsRawData data</div><div class="ttdef"><b>Definition:</b> <a href="data__sets_8h_source.html#l02432">data_sets.h:2432</a></div></div>
<div class="ttc" id="classi_gps_parser_delegate_html_a3d84621cccf117972b96af70c6e2c86a"><div class="ttname"><a href="classi_gps_parser_delegate.html#a3d84621cccf117972b96af70c6e2c86a">iGpsParserDelegate::OnObservationReceived</a></div><div class="ttdeci">virtual void OnObservationReceived(const cGpsParser *parser, const obs_t *obs)</div><div class="ttdef"><b>Definition:</b> <a href="_gps_parser_8h_source.html#l00080">GpsParser.h:80</a></div></div>
<div class="ttc" id="_gps_parser_8cpp_html_a04ee0b4cfe6327d1e3de36b7c1a66e84"><div class="ttname"><a href="_gps_parser_8cpp.html#a04ee0b4cfe6327d1e3de36b7c1a66e84">UBLOX_PREAMBLE1</a></div><div class="ttdeci">#define UBLOX_PREAMBLE1</div><div class="ttdef"><b>Definition:</b> <a href="_gps_parser_8cpp_source.html#l00021">GpsParser.cpp:21</a></div></div>
<div class="ttc" id="_gps_parser_8cpp_html_a684bb41a65461b7e9985286aea1d23d7"><div class="ttname"><a href="_gps_parser_8cpp.html#a684bb41a65461b7e9985286aea1d23d7">ALLOCATE_M_RTCM</a></div><div class="ttdeci">#define ALLOCATE_M_RTCM</div><div class="ttdef"><b>Definition:</b> <a href="_gps_parser_8cpp_source.html#l00047">GpsParser.cpp:47</a></div></div>
<div class="ttc" id="structobs__t_html_a3cff1d90b248369f3c0d31b34cfb6344"><div class="ttname"><a href="structobs__t.html#a3cff1d90b248369f3c0d31b34cfb6344">obs_t::data</a></div><div class="ttdeci">obsd_t * data</div><div class="ttdef"><b>Definition:</b> <a href="data__sets_8h_source.html#l01941">data_sets.h:1941</a></div></div>
<div class="ttc" id="data__sets_8h_html_a534377a848e290b847dc1830258b216fab15cb82530c3391252b7ae76b3692cec"><div class="ttname"><a href="data__sets_8h.html#a534377a848e290b847dc1830258b216fab15cb82530c3391252b7ae76b3692cec">raw_data_type_glonass_ephemeris</a></div><div class="ttdef"><b>Definition:</b> <a href="data__sets_8h_source.html#l02377">data_sets.h:2377</a></div></div>
<div class="ttc" id="data__sets_8h_html_a534377a848e290b847dc1830258b216fa847fc64d56ed382b32dc862f90926be0"><div class="ttname"><a href="data__sets_8h.html#a534377a848e290b847dc1830258b216fa847fc64d56ed382b32dc862f90926be0">raw_data_type_sbas</a></div><div class="ttdef"><b>Definition:</b> <a href="data__sets_8h_source.html#l02380">data_sets.h:2380</a></div></div>
<div class="ttc" id="classc_rtcm_parser_html_ae85ccd9e816c808f696f730f10b34b45"><div class="ttname"><a href="classc_rtcm_parser.html#ae85ccd9e816c808f696f730f10b34b45">cRtcmParser::ParseMessage</a></div><div class="ttdeci">void ParseMessage(const uint8_t *data, int dataLength) OVERRIDE</div><div class="ttdef"><b>Definition:</b> <a href="_gps_parser_8cpp_source.html#l00255">GpsParser.cpp:255</a></div></div>
<div class="ttc" id="classc_gps_parser_html_ab163e893a00283fd78a7798ecb5d0076"><div class="ttname"><a href="classc_gps_parser.html#ab163e893a00283fd78a7798ecb5d0076">cGpsParser::m_corruptPacketCount</a></div><div class="ttdeci">uint32_t m_corruptPacketCount</div><div class="ttdef"><b>Definition:</b> <a href="_gps_parser_8h_source.html#l00232">GpsParser.h:232</a></div></div>
<div class="ttc" id="classc_rtcm_parser_html_afaaa681ef1eb70c3e0acf6550269f589"><div class="ttname"><a href="classc_rtcm_parser.html#afaaa681ef1eb70c3e0acf6550269f589">cRtcmParser::cRtcmParser</a></div><div class="ttdeci">cRtcmParser(iGpsParserDelegate *delegate)</div><div class="ttdef"><b>Definition:</b> <a href="_gps_parser_8cpp_source.html#l00167">GpsParser.cpp:167</a></div></div>
<div class="ttc" id="structeph__t_html_ac0a88b549db74cff4f15b667e43860c5"><div class="ttname"><a href="structeph__t.html#ac0a88b549db74cff4f15b667e43860c5">eph_t::sat</a></div><div class="ttdeci">int32_t sat</div><div class="ttdef"><b>Definition:</b> <a href="data__sets_8h_source.html#l01948">data_sets.h:1948</a></div></div>
<div class="ttc" id="struct_p_a_c_k_e_d_html_acc5234ecdd35b25f79485517be8eed92"><div class="ttname"><a href="struct_p_a_c_k_e_d.html#acc5234ecdd35b25f79485517be8eed92">PACKED::rcv</a></div><div class="ttdeci">uint8_t rcv</div><div class="ttdef"><b>Definition:</b> <a href="data__sets_8h_source.html#l01898">data_sets.h:1898</a></div></div>
<div class="ttc" id="classc_gps_parser_html_a3bb55b5835ba5fcea42b9a8fa824c945"><div class="ttname"><a href="classc_gps_parser.html#a3bb55b5835ba5fcea42b9a8fa824c945">cGpsParser::GetDelegate</a></div><div class="ttdeci">iGpsParserDelegate * GetDelegate()</div><div class="ttdef"><b>Definition:</b> <a href="_gps_parser_8h_source.html#l00195">GpsParser.h:195</a></div></div>
<div class="ttc" id="_i_s_comm_8h_html"><div class="ttname"><a href="_i_s_comm_8h.html">ISComm.h</a></div></div>
<div class="ttc" id="classc_gps_parser_html_a64d628afd753e74659ebb00a9f09fa37"><div class="ttname"><a href="classc_gps_parser.html#a64d628afd753e74659ebb00a9f09fa37">cGpsParser::GetReceiverIndex</a></div><div class="ttdeci">int32_t GetReceiverIndex() const</div><div class="ttdef"><b>Definition:</b> <a href="_gps_parser_8h_source.html#l00207">GpsParser.h:207</a></div></div>
<div class="ttc" id="_gps_parser_8h_html_a281586dc7a286fe7a7b73e608ff8402b"><div class="ttname"><a href="_gps_parser_8h.html#a281586dc7a286fe7a7b73e608ff8402b">eGpsParserType</a></div><div class="ttdeci">eGpsParserType</div><div class="ttdef"><b>Definition:</b> <a href="_gps_parser_8h_source.html#l00036">GpsParser.h:36</a></div></div>
<div class="ttc" id="_i_s_comm_8c_html_ab81821036e21d6afe0fca0f1c087dac3"><div class="ttname"><a href="_i_s_comm_8c.html#ab81821036e21d6afe0fca0f1c087dac3">is_comm_init</a></div><div class="ttdeci">void is_comm_init(is_comm_instance_t *instance)</div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8c_source.html#l00193">ISComm.c:193</a></div></div>
<div class="ttc" id="struct_p_a_c_k_e_d_html_aab9207c118fc708020907d9b1e70740d"><div class="ttname"><a href="struct_p_a_c_k_e_d.html#aab9207c118fc708020907d9b1e70740d">PACKED::obs</a></div><div class="ttdeci">obsd_t obs[MAX_OBSERVATION_COUNT_IN_RTK_MESSAGE]</div><div class="ttdef"><b>Definition:</b> <a href="data__sets_8h_source.html#l02395">data_sets.h:2395</a></div></div>
<div class="ttc" id="struct_p_a_c_k_e_d_html_a8af60fcafd9292c1d211f52aa2cdad66"><div class="ttname"><a href="struct_p_a_c_k_e_d.html#a8af60fcafd9292c1d211f52aa2cdad66">PACKED::receiverIndex</a></div><div class="ttdeci">uint8_t receiverIndex</div><div class="ttdef"><b>Definition:</b> <a href="data__sets_8h_source.html#l02420">data_sets.h:2420</a></div></div>
<div class="ttc" id="struct_p_a_c_k_e_d_html_a881de0d23b22131154988ec36810d854"><div class="ttname"><a href="struct_p_a_c_k_e_d.html#a881de0d23b22131154988ec36810d854">PACKED::sbas</a></div><div class="ttdeci">sbsmsg_t sbas</div><div class="ttdef"><b>Definition:</b> <a href="data__sets_8h_source.html#l02404">data_sets.h:2404</a></div></div>
<div class="ttc" id="_gps_parser_8cpp_html_a148e5e8ba2ec554ced26a9d7bbe910da"><div class="ttname"><a href="_gps_parser_8cpp.html#a148e5e8ba2ec554ced26a9d7bbe910da">INIT_M_RTCM</a></div><div class="ttdeci">#define INIT_M_RTCM</div><div class="ttdef"><b>Definition:</b> <a href="_gps_parser_8cpp_source.html#l00046">GpsParser.cpp:46</a></div></div>
<div class="ttc" id="_gps_parser_8h_html_a281586dc7a286fe7a7b73e608ff8402ba24375dc3471667ab50dc2a7dfe14699c"><div class="ttname"><a href="_gps_parser_8h.html#a281586dc7a286fe7a7b73e608ff8402ba24375dc3471667ab50dc2a7dfe14699c">GpsParserTypeUblox</a></div><div class="ttdef"><b>Definition:</b> <a href="_gps_parser_8h_source.html#l00046">GpsParser.h:46</a></div></div>
<div class="ttc" id="structobs__t_html"><div class="ttname"><a href="structobs__t.html">obs_t</a></div><div class="ttdef"><b>Definition:</b> <a href="data__sets_8h_source.html#l01932">data_sets.h:1932</a></div></div>
<div class="ttc" id="structis__comm__instance__t_html"><div class="ttname"><a href="structis__comm__instance__t.html">is_comm_instance_t</a></div><div class="ttdef"><b>Definition:</b> <a href="_i_s_comm_8h_source.html#l00083">ISComm.h:83</a></div></div>
<div class="ttc" id="classc_inertial_sense_parser_html_ad876e557da9a8ec270c3131fbe460008"><div class="ttname"><a href="classc_inertial_sense_parser.html#ad876e557da9a8ec270c3131fbe460008">cInertialSenseParser::~cInertialSenseParser</a></div><div class="ttdeci">~cInertialSenseParser() OVERRIDE</div><div class="ttdef"><b>Definition:</b> <a href="_gps_parser_8cpp_source.html#l00068">GpsParser.cpp:68</a></div></div>
<div class="ttc" id="classc_ublox_parser_html_a6c4ae2e169937ea33945a64de06b7400"><div class="ttname"><a href="classc_ublox_parser.html#a6c4ae2e169937ea33945a64de06b7400">cUbloxParser::cUbloxParser</a></div><div class="ttdeci">cUbloxParser(iGpsParserDelegate *delegate)</div><div class="ttdef"><b>Definition:</b> <a href="_gps_parser_8cpp_source.html#l00347">GpsParser.cpp:347</a></div></div>
<div class="ttc" id="classi_gps_parser_delegate_html"><div class="ttname"><a href="classi_gps_parser_delegate.html">iGpsParserDelegate</a></div><div class="ttdef"><b>Definition:</b> <a href="_gps_parser_8h_source.html#l00057">GpsParser.h:57</a></div></div>
<div class="ttc" id="classc_rtcm_parser_html"><div class="ttname"><a href="classc_rtcm_parser.html">cRtcmParser</a></div><div class="ttdef"><b>Definition:</b> <a href="_gps_parser_8cpp_source.html#l00164">GpsParser.cpp:164</a></div></div>
<div class="ttc" id="struct_p_a_c_k_e_d_html"><div class="ttname"><a href="struct_p_a_c_k_e_d.html">PACKED</a></div><div class="ttdef"><b>Definition:</b> <a href="data__sets_8h_source.html#l00411">data_sets.h:411</a></div></div>
<div class="ttc" id="_gps_parser_8cpp_html_a4d0912b39c05d5b3689ab040900a1899"><div class="ttname"><a href="_gps_parser_8cpp.html#a4d0912b39c05d5b3689ab040900a1899">INIT_M_RAW</a></div><div class="ttdeci">#define INIT_M_RAW(fmt)</div><div class="ttdef"><b>Definition:</b> <a href="_gps_parser_8cpp_source.html#l00048">GpsParser.cpp:48</a></div></div>
<div class="ttc" id="_gps_parser_8cpp_html_a0c3b92111acd780de5d7c7d0fc43ebeb"><div class="ttname"><a href="_gps_parser_8cpp.html#a0c3b92111acd780de5d7c7d0fc43ebeb">ALLOCATE_M_RAW</a></div><div class="ttdeci">#define ALLOCATE_M_RAW</div><div class="ttdef"><b>Definition:</b> <a href="_gps_parser_8cpp_source.html#l00049">GpsParser.cpp:49</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
